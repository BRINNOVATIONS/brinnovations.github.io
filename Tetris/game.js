window.packerplugin={textures : ["texture",]}; window.packerplugin.json={}; window.packerplugin.json['texture'] = '{"frames": {"media/graphics/game/blocks/purple.png": {"frame": {"y": 437, "x": 546, "w": 44, "h": 43}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 43, "w": 44}, "spriteSourceSize": {"y": 0, "x": 0, "w": 44, "h": 43}}, "media/graphics/game/pop-border.png": {"frame": {"y": 2, "x": 1306, "w": 474, "h": 474}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 474, "w": 474}, "spriteSourceSize": {"y": 0, "x": 0, "w": 474, "h": 474}}, "media/graphics/game/music.png": {"frame": {"y": 495, "x": 594, "w": 32, "h": 39}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 39, "w": 32}, "spriteSourceSize": {"y": 0, "x": 0, "w": 32, "h": 39}}, "media/graphics/sprites/coin.png": {"frame": {"y": 354, "x": 546, "w": 79, "h": 79}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 79, "w": 79}, "spriteSourceSize": {"y": 0, "x": 0, "w": 79, "h": 79}}, "media/graphics/game/btn-replay-over.png": {"frame": {"y": 442, "x": 748, "w": 67, "h": 67}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 67, "w": 67}, "spriteSourceSize": {"y": 0, "x": 0, "w": 67, "h": 67}}, "media/graphics/game/border-up.png": {"frame": {"y": 1930, "x": 282, "w": 542, "h": 83}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 83, "w": 542}, "spriteSourceSize": {"y": 0, "x": 0, "w": 542, "h": 83}}, "media/graphics/sprites/exit-fullscreen-transparent.png": {"frame": {"y": 368, "x": 753, "w": 70, "h": 70}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 70, "w": 70}, "spriteSourceSize": {"y": 0, "x": 0, "w": 70, "h": 70}}, "media/graphics/game/btn-replay.png": {"frame": {"y": 238, "x": 712, "w": 53, "h": 46}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 46, "w": 53}, "spriteSourceSize": {"y": 0, "x": 0, "w": 53, "h": 46}}, "media/graphics/game/blocks/small/orange.png": {"frame": {"y": 160, "x": 781, "w": 35, "h": 34}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 34, "w": 35}, "spriteSourceSize": {"y": 0, "x": 0, "w": 35, "h": 34}}, "media/graphics/game/background.png": {"frame": {"y": 2, "x": 2, "w": 540, "h": 960}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 960, "w": 540}, "spriteSourceSize": {"y": 0, "x": 0, "w": 540, "h": 960}}, "media/graphics/game/light.png": {"frame": {"y": 484, "x": 546, "w": 44, "h": 43}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 43, "w": 44}, "spriteSourceSize": {"y": 0, "x": 0, "w": 44, "h": 43}}, "media/graphics/sprites/tutorial-highlight.png": {"frame": {"y": 484, "x": 546, "w": 44, "h": 43}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 43, "w": 44}, "spriteSourceSize": {"y": 0, "x": 0, "w": 44, "h": 43}}, "media/graphics/game/btn-pink.png": {"frame": {"y": 2, "x": 546, "w": 231, "h": 75}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 75, "w": 231}, "spriteSourceSize": {"y": 0, "x": 0, "w": 231, "h": 75}}, "media/graphics/sprites/cash-panel.png": {"frame": {"y": 312, "x": 546, "w": 129, "h": 38}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 38, "w": 129}, "spriteSourceSize": {"y": 0, "x": 0, "w": 129, "h": 38}}, "media/graphics/game/bg.png": {"frame": {"y": 966, "x": 2, "w": 540, "h": 960}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 960, "w": 540}, "spriteSourceSize": {"y": 0, "x": 0, "w": 540, "h": 960}}, "media/graphics/game/blocks/green.png": {"frame": {"y": 321, "x": 760, "w": 44, "h": 43}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 43, "w": 44}, "spriteSourceSize": {"y": 0, "x": 0, "w": 44, "h": 43}}, "media/graphics/game/sound.png": {"frame": {"y": 46, "x": 781, "w": 39, "h": 34}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 34, "w": 39}, "spriteSourceSize": {"y": 0, "x": 0, "w": 39, "h": 34}}, "media/graphics/game/btn-continue.png": {"frame": {"y": 1930, "x": 101, "w": 94, "h": 93}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 93, "w": 94}, "spriteSourceSize": {"y": 0, "x": 0, "w": 94, "h": 93}}, "media/graphics/game/btn-pause.png": {"frame": {"y": 531, "x": 546, "w": 32, "h": 36}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 36, "w": 32}, "spriteSourceSize": {"y": 0, "x": 0, "w": 32, "h": 36}}, "media/graphics/game/blocks/pink.png": {"frame": {"y": 401, "x": 629, "w": 44, "h": 43}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 43, "w": 44}, "spriteSourceSize": {"y": 0, "x": 0, "w": 44, "h": 43}}, "media/graphics/game/blocks/yellow.png": {"frame": {"y": 448, "x": 594, "w": 44, "h": 43}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 43, "w": 44}, "spriteSourceSize": {"y": 0, "x": 0, "w": 44, "h": 43}}, "media/graphics/game/blocks/blue.png": {"frame": {"y": 288, "x": 712, "w": 44, "h": 43}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 43, "w": 44}, "spriteSourceSize": {"y": 0, "x": 0, "w": 44, "h": 43}}, "media/graphics/game/btn-ok.png": {"frame": {"y": 1930, "x": 2, "w": 95, "h": 94}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 94, "w": 95}, "spriteSourceSize": {"y": 0, "x": 0, "w": 95, "h": 94}}, "media/graphics/game/block-base.png": {"frame": {"y": 274, "x": 769, "w": 44, "h": 43}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 43, "w": 44}, "spriteSourceSize": {"y": 0, "x": 0, "w": 44, "h": 43}}, "media/graphics/game/border-score.png": {"frame": {"y": 238, "x": 546, "w": 162, "h": 70}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 70, "w": 162}, "spriteSourceSize": {"y": 0, "x": 0, "w": 162, "h": 70}}, "media/graphics/game/btn-home.png": {"frame": {"y": 409, "x": 677, "w": 67, "h": 67}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 67, "w": 67}, "spriteSourceSize": {"y": 0, "x": 0, "w": 67, "h": 67}}, "media/graphics/sprites/enter-fullscreen-transparent.png": {"frame": {"y": 335, "x": 679, "w": 70, "h": 70}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 70, "w": 70}, "spriteSourceSize": {"y": 0, "x": 0, "w": 70, "h": 70}}, "media/graphics/game/blocks/orange.png": {"frame": {"y": 354, "x": 629, "w": 44, "h": 43}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 43, "w": 44}, "spriteSourceSize": {"y": 0, "x": 0, "w": 44, "h": 43}}, "media/graphics/sprites/tutorial-panel.png": {"frame": {"y": 480, "x": 828, "w": 330, "h": 75}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 75, "w": 330}, "spriteSourceSize": {"y": 0, "x": 0, "w": 330, "h": 75}}, "media/graphics/game/blocks/small/yellow.png": {"frame": {"y": 480, "x": 642, "w": 35, "h": 34}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 34, "w": 35}, "spriteSourceSize": {"y": 0, "x": 0, "w": 35, "h": 34}}, "media/graphics/game/btn-blue.png": {"frame": {"y": 160, "x": 546, "w": 231, "h": 74}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 74, "w": 231}, "spriteSourceSize": {"y": 0, "x": 0, "w": 231, "h": 74}}, "media/graphics/game/volume-slide.png": {"frame": {"y": 2, "x": 781, "w": 40, "h": 40}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 40, "w": 40}, "spriteSourceSize": {"y": 0, "x": 0, "w": 40, "h": 40}}, "media/graphics/game/btn-purple.png": {"frame": {"y": 81, "x": 546, "w": 231, "h": 75}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 75, "w": 231}, "spriteSourceSize": {"y": 0, "x": 0, "w": 231, "h": 75}}, "media/graphics/sprites/hand-pointer.png": {"frame": {"y": 1930, "x": 199, "w": 79, "h": 93}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 93, "w": 79}, "spriteSourceSize": {"y": 0, "x": 0, "w": 79, "h": 93}}, "media/graphics/game/blocks/small/pink.png": {"frame": {"y": 198, "x": 781, "w": 35, "h": 34}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 34, "w": 35}, "spriteSourceSize": {"y": 0, "x": 0, "w": 35, "h": 34}}, "media/graphics/game/volume-base.png": {"frame": {"y": 2017, "x": 318, "w": 325, "h": 24}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 24, "w": 325}, "spriteSourceSize": {"y": 0, "x": 0, "w": 325, "h": 24}}, "media/graphics/game/border-over.png": {"frame": {"y": 2, "x": 828, "w": 474, "h": 474}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 474, "w": 474}, "spriteSourceSize": {"y": 0, "x": 0, "w": 474, "h": 474}}, "media/graphics/game/blocks/small/blue.png": {"frame": {"y": 84, "x": 781, "w": 35, "h": 34}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 34, "w": 35}, "spriteSourceSize": {"y": 0, "x": 0, "w": 35, "h": 34}}, "media/graphics/game/blocks/small/purple.png": {"frame": {"y": 236, "x": 781, "w": 35, "h": 34}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 34, "w": 35}, "spriteSourceSize": {"y": 0, "x": 0, "w": 35, "h": 34}}, "media/graphics/game/blocks/small/green.png": {"frame": {"y": 122, "x": 781, "w": 35, "h": 34}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 34, "w": 35}, "spriteSourceSize": {"y": 0, "x": 0, "w": 35, "h": 34}}, "media/graphics/game/volume-bar.png": {"frame": {"y": 2028, "x": 2, "w": 312, "h": 10}, "rotated": false, "trimmed": false, "pivot": {"y": 0.5, "x": 0.5}, "sourceSize": {"h": 10, "w": 312}, "spriteSourceSize": {"y": 0, "x": 0, "w": 312, "h": 10}}}, "meta": {"scale": 1, "format": "RGBA8888", "app": "http://github.com/odrick/free-tex-packer-cli", "version": "0.3.0", "image": "texture.png", "size": {"h": 2043, "w": 1782}}}';
var _STRINGS={Ad:{Mobile:{Preroll:{ReadyIn:"The game is ready in ",Loading:"Your game is loading...",Close:"Close"},Header:{ReadyIn:"The game is ready in ",Loading:"Your game is loading...",Close:"Close"},End:{ReadyIn:"Advertisement ends in ",Loading:"Please wait ...",Close:"Close"}}},Splash:{Loading:"LOADING",LogoLine1:"Some text here",LogoLine2:"powered by MarketJS",LogoLine3:"none",TapToStart:"TAP TO START"},Game:{SelectPlayer:"Select Player",Win:"You win!",Lose:"You lose!",GameOver:"GAME OVER",
Score:"Score",HighScore:"High Score",Time:"Time",Paused:"PAUSED",SelectTheme:"Selected",Best:"BEST  ",New:"NEW HIGH SCORE",Settings:"SETTINGS",Ok:"OK",ButtonLabels:{Play:"PLAY",Continue:"Continue",Home:"Home",Replay:"Replay",Theme:"Theme",MoreGames:"LEADERBOARD",SelectTheme:"Select",BuyTheme:"Buy for",Settings:"SETTINGS"},Tutorial:{FirstInstructionLine1:"Drag and drop the pieces",FirstInstructionLine2:"into empty slots on the board",SecondInstructionLine1:"Create full rows to eliminate tiles.",SecondInstructionLine2:"You score when a row is cleared",
ThirdInstructionLine1:"Clear 2 or more rows with a single",ThirdInstructionLine2:"move for bonus combo points.",ThirdInstructionLine3:"Money drops with every combo created."}},Results:{}};var _SETTINGS={API:{Enabled:!0,Log:{Events:{InitializeGame:!0,EndGame:!0,Level:{Begin:!0,End:!0,Win:!0,Lose:!0,Draw:!0}}}},Ad:{Mobile:{Preroll:{Enabled:!1,Duration:5,Width:300,Height:250,Rotation:{Enabled:!1,Weight:{MobileAdInGamePreroll:40,MobileAdInGamePreroll2:40,MobileAdInGamePreroll3:20}}},Header:{Enabled:!1,Duration:5,Width:320,Height:50,Rotation:{Enabled:!1,Weight:{MobileAdInGameHeader:40,MobileAdInGameHeader2:40,MobileAdInGameHeader3:20}}},Footer:{Enabled:!1,Duration:5,Width:320,Height:50,
Rotation:{Enabled:!1,Weight:{MobileAdInGameFooter:40,MobileAdInGameFooter2:40,MobileAdInGameFooter3:20}}},End:{Enabled:!1,Duration:1,Width:300,Height:250,Rotation:{Enabled:!1,Weight:{MobileAdInGameEnd:40,MobileAdInGameEnd2:40,MobileAdInGameEnd3:20}}}}},Language:{Default:"en"},DeveloperBranding:{Splash:{Enabled:!1},Logo:{Enabled:!1,Link:"http://google.com",LinkEnabled:!1,NewWindow:!0,Width:166,Height:61}},Branding:{Splash:{Enabled:!1},Logo:{Enabled:!1,Link:"http://google.com",LinkEnabled:!1,NewWindow:!0,
Width:166,Height:61}},MoreGames:{Enabled:!0,Link:"javascript:moreGamesLink()",NewWindow:!1}},moreGamesLink=function(){console.log("leaderboard link onclick");parent.postMessage("show_board","*")};var MobileAdInGamePreroll={ad_duration:_SETTINGS.Ad.Mobile.Preroll.Duration,ad_width:_SETTINGS.Ad.Mobile.Preroll.Width,ad_height:_SETTINGS.Ad.Mobile.Preroll.Height,ready_in:_STRINGS.Ad.Mobile.Preroll.ReadyIn,loading:_STRINGS.Ad.Mobile.Preroll.Loading,close:_STRINGS.Ad.Mobile.Preroll.Close+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",Initialize:function(){if(_SETTINGS.Ad.Mobile.Preroll.Rotation.Enabled){var e=_SETTINGS.Ad.Mobile.Preroll.Rotation.Weight,f=e.MobileAdInGamePreroll,g=
f+e.MobileAdInGamePreroll2,e=g+e.MobileAdInGamePreroll3,j=Math.floor(100*Math.random());console.log("seed: ",j);j<=f?this.selectedOverlayName="MobileAdInGamePreroll":j<=g?this.selectedOverlayName="MobileAdInGamePreroll2":j<=e&&(this.selectedOverlayName="MobileAdInGamePreroll3");console.log("Ad rotating preroll enabled")}else this.selectedOverlayName="MobileAdInGamePreroll",console.log("Ad rotating preroll disabled");console.log("selected:",this.selectedOverlayName);this.overlay=$("#"+this.selectedOverlayName);
this.box=$("#"+this.selectedOverlayName+"-Box");this.game=$("#game");this.boxContents={footer:$("#"+this.selectedOverlayName+"-Box-Footer"),header:$("#"+this.selectedOverlayName+"-Box-Header"),close:$("#"+this.selectedOverlayName+"-Box-Close"),body:$("#"+this.selectedOverlayName+"-Box-Body")};this.box.width(this.ad_width);this.box.height(this.ad_height);this.box.css("left",(this.overlay.width()-this.box.width())/2);this.box.css("top",(this.overlay.height()-this.box.height()-this.boxContents.header.height()-
this.boxContents.footer.height())/2);this.overlay.show(this.Timer(this.ad_duration))},Timer:function(e){var f=e,g=setInterval(function(){MobileAdInGamePreroll.boxContents.header.text(MobileAdInGamePreroll.ready_in+f+"...");MobileAdInGamePreroll.boxContents.footer.text(MobileAdInGamePreroll.loading);f--;0>f&&(clearInterval(g),MobileAdInGamePreroll.boxContents.close.css("left",MobileAdInGamePreroll.boxContents.body.width()-23),MobileAdInGamePreroll.boxContents.close.show(),MobileAdInGamePreroll.boxContents.header.html(MobileAdInGamePreroll.close),
MobileAdInGamePreroll.boxContents.footer.text(""))},1E3)},Close:function(){this.boxContents.close.hide();this.overlay.hide()}};var MobileAdInGameHeader={ad_duration:_SETTINGS.Ad.Mobile.Header.Duration,ad_width:_SETTINGS.Ad.Mobile.Header.Width,ad_height:_SETTINGS.Ad.Mobile.Header.Height,Initialize:function(){if(_SETTINGS.Ad.Mobile.Header.Rotation.Enabled){var e=_SETTINGS.Ad.Mobile.Header.Rotation.Weight,f=e.MobileAdInGameHeader,g=f+e.MobileAdInGameHeader2,e=g+e.MobileAdInGameHeader3,j=Math.floor(100*Math.random());console.log("seed: ",j);j<=f?this.selectedOverlayName="MobileAdInGameHeader":j<=g?this.selectedOverlayName="MobileAdInGameHeader2":
j<=e&&(this.selectedOverlayName="MobileAdInGameHeader3");console.log("Ad rotating header enabled")}else this.selectedOverlayName="MobileAdInGameHeader",console.log("Ad rotating header disabled");this.div=$("#"+this.selectedOverlayName);this.game=$("#game");this.div.width(this.ad_width);this.div.height(this.ad_height);this.div.css("left",this.game.position().left+(this.game.width()-this.div.width())/2);this.div.css("top",0);this.div.show(this.Timer(this.ad_duration))},Timer:function(e){var f=setInterval(function(){e--;
0>e&&(MobileAdInGameHeader.div.hide(),clearInterval(f))},1E3)}};var MobileAdInGameFooter={ad_duration:_SETTINGS.Ad.Mobile.Footer.Duration,ad_width:_SETTINGS.Ad.Mobile.Footer.Width,ad_height:_SETTINGS.Ad.Mobile.Footer.Height,Initialize:function(){if(_SETTINGS.Ad.Mobile.Footer.Rotation.Enabled){var e=_SETTINGS.Ad.Mobile.Footer.Rotation.Weight,f=e.MobileAdInGameFooter,g=f+e.MobileAdInGameFooter2,e=g+e.MobileAdInGameFooter3,j=Math.floor(100*Math.random());console.log("seed: ",j);j<=f?this.selectedOverlayName="MobileAdInGameFooter":j<=g?this.selectedOverlayName="MobileAdInGameFooter2":
j<=e&&(this.selectedOverlayName="MobileAdInGameFooter3");console.log("Ad rotating footer enabled")}else this.selectedOverlayName="MobileAdInGameFooter",console.log("Ad rotating footer disabled");this.div=$("#"+this.selectedOverlayName);this.game=$("#game");this.div.width(this.ad_width);this.div.height(this.ad_height);this.div.css("left",this.game.position().left+(this.game.width()-this.div.width())/2);this.div.css("top",this.game.height()-this.div.height()-5);this.div.show(this.Timer(this.ad_duration))},
Timer:function(e){var f=setInterval(function(){e--;0>e&&(MobileAdInGameFooter.div.hide(),clearInterval(f))},1E3)}};var MobileAdInGameEnd={ad_duration:_SETTINGS.Ad.Mobile.End.Duration,ad_width:_SETTINGS.Ad.Mobile.End.Width,ad_height:_SETTINGS.Ad.Mobile.End.Height,ready_in:_STRINGS.Ad.Mobile.End.ReadyIn,loading:_STRINGS.Ad.Mobile.End.Loading,close:_STRINGS.Ad.Mobile.End.Close+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",Initialize:function(){if(_SETTINGS.Ad.Mobile.End.Rotation.Enabled){var e=_SETTINGS.Ad.Mobile.End.Rotation.Weight,f=e.MobileAdInGameEnd,g=f+e.MobileAdInGameEnd2,e=g+e.MobileAdInGameEnd3,
j=Math.floor(100*Math.random());console.log("seed: ",j);j<=f?this.selectedOverlayName="MobileAdInGameEnd":j<=g?this.selectedOverlayName="MobileAdInGameEnd2":j<=e&&(this.selectedOverlayName="MobileAdInGameEnd3");console.log("Ad rotating end enabled")}else this.selectedOverlayName="MobileAdInGameEnd",console.log("Ad rotating end disabled");console.log("selected:",this.selectedOverlayName);this.overlay=$("#"+this.selectedOverlayName);this.box=$("#"+this.selectedOverlayName+"-Box");this.game=$("#game");
this.boxContents={footer:$("#"+this.selectedOverlayName+"-Box-Footer"),header:$("#"+this.selectedOverlayName+"-Box-Header"),close:$("#"+this.selectedOverlayName+"-Box-Close"),body:$("#"+this.selectedOverlayName+"-Box-Body")};this.box.width(this.ad_width);this.box.height(this.ad_height);this.box.css("left",(this.overlay.width()-this.box.width())/2);this.box.css("top",(this.overlay.height()-this.box.height()-this.boxContents.header.height()-this.boxContents.footer.height())/2);this.overlay.show(this.Timer(this.ad_duration))},
Timer:function(e){var f=e,g=setInterval(function(){MobileAdInGameEnd.boxContents.header.text(MobileAdInGameEnd.ready_in+f+"...");MobileAdInGameEnd.boxContents.footer.text(MobileAdInGameEnd.loading);f--;0>f&&(clearInterval(g),MobileAdInGameEnd.boxContents.close.css("left",MobileAdInGameEnd.boxContents.body.width()-23),MobileAdInGameEnd.boxContents.close.show(),MobileAdInGameEnd.boxContents.header.html(MobileAdInGameEnd.close),MobileAdInGameEnd.boxContents.footer.text(""))},1E3)},Close:function(){this.boxContents.close.hide();
this.overlay.hide()}};!function(e,f){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?f(e,!0):function(e){if(!e.document)throw Error("jQuery requires a window with a document");return f(e)}:f(e)}("undefined"!=typeof window?window:this,function(e,f){function g(e,f){f=f||B;var g=f.createElement("script");g.text=e;f.head.appendChild(g).parentNode.removeChild(g)}function j(e){var f=!!e&&"length"in e&&e.length,g=p.type(e);return"function"!==g&&!p.isWindow(e)&&("array"===g||0===f||"number"==
typeof f&&0<f&&f-1 in e)}function l(e,f){return e.nodeName&&e.nodeName.toLowerCase()===f.toLowerCase()}function n(e,f,g){return p.isFunction(f)?p.grep(e,function(e,z){return!!f.call(e,z,e)!==g}):f.nodeType?p.grep(e,function(e){return e===f!==g}):"string"!=typeof f?p.grep(e,function(e){return-1<Oa.call(f,e)!==g}):Ec.test(f)?p.filter(f,e,g):(f=p.filter(f,e),p.grep(e,function(e){return-1<Oa.call(f,e)!==g&&1===e.nodeType}))}function s(e,f){for(;(e=e[f])&&1!==e.nodeType;);return e}function q(e){return e}
function m(e){throw e;}function r(e,f,g,m){var j;try{e&&p.isFunction(j=e.promise)?j.call(e).done(f).fail(g):e&&p.isFunction(j=e.then)?j.call(e,f,g):f.apply(void 0,[e].slice(m))}catch(l){g.apply(void 0,[l])}}function t(){B.removeEventListener("DOMContentLoaded",t);e.removeEventListener("load",t);p.ready()}function u(){this.expando=p.expando+u.uid++}function v(e,f,g){var m;if(void 0===g&&1===e.nodeType)if(m="data-"+f.replace(Fc,"-$&").toLowerCase(),g=e.getAttribute(m),"string"==typeof g){try{g="true"===
g||"false"!==g&&("null"===g?null:g===+g+""?+g:Gc.test(g)?JSON.parse(g):g)}catch(j){}aa.set(e,f,g)}else g=void 0;return g}function x(e,f,g,m){var j,l=1,r=20,n=m?function(){return m.cur()}:function(){return p.css(e,f,"")},t=n(),q=g&&g[3]||(p.cssNumber[f]?"":"px"),u=(p.cssNumber[f]||"px"!==q&&+t)&&Qa.exec(p.css(e,f));if(u&&u[3]!==q){q=q||u[3];g=g||[];u=+t||1;do l=l||".5",u/=l,p.style(e,f,u+q);while(l!==(l=n()/t)&&1!==l&&--r)}return g&&(u=+u||+t||0,j=g[1]?u+(g[1]+1)*g[2]:+g[2],m&&(m.unit=q,m.start=u,
m.end=j)),j}function E(e,f){for(var g,m,j=[],l=0,r=e.length;l<r;l++)if(m=e[l],m.style)if(g=m.style.display,f){if("none"===g&&(j[l]=D.get(m,"display")||null,j[l]||(m.style.display="")),""===m.style.display&&ab(m)){g=j;var n=l,t,q=void 0;t=m.ownerDocument;var u=m.nodeName;t=(m=Ob[u])?m:(q=t.body.appendChild(t.createElement(u)),m=p.css(q,"display"),q.parentNode.removeChild(q),"none"===m&&(m="block"),Ob[u]=m,m);g[n]=t}}else"none"!==g&&(j[l]="none",D.set(m,"display",g));for(l=0;l<r;l++)null!=j[l]&&(e[l].style.display=
j[l]);return e}function C(e,f){var g;return g="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(f||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(f||"*"):[],void 0===f||f&&l(e,f)?p.merge([e],g):g}function G(e,f){for(var g=0,m=e.length;g<m;g++)D.set(e[g],"globalEval",!f||D.get(f[g],"globalEval"))}function N(e,f,g,m,j){for(var l,r,n,t,q=f.createDocumentFragment(),u=[],v=0,s=e.length;v<s;v++)if(l=e[v],l||0===l)if("object"===p.type(l))p.merge(u,l.nodeType?[l]:l);else if(Hc.test(l)){r=
r||q.appendChild(f.createElement("div"));n=(Pb.exec(l)||["",""])[1].toLowerCase();n=ca[n]||ca._default;r.innerHTML=n[1]+p.htmlPrefilter(l)+n[2];for(n=n[0];n--;)r=r.lastChild;p.merge(u,r.childNodes);r=q.firstChild;r.textContent=""}else u.push(f.createTextNode(l));q.textContent="";for(v=0;l=u[v++];)if(m&&-1<p.inArray(l,m))j&&j.push(l);else if(t=p.contains(l.ownerDocument,l),r=C(q.appendChild(l),"script"),t&&G(r),g)for(n=0;l=r[n++];)Qb.test(l.type||"")&&g.push(l);return q}function da(){return!0}function H(){return!1}
function na(){try{return B.activeElement}catch(e){}}function ba(e,f,g,m,j,l){var r,n;if("object"==typeof f){"string"!=typeof g&&(m=m||g,g=void 0);for(n in f)ba(e,n,g,m,f[n],l);return e}if(null==m&&null==j?(j=g,m=g=void 0):null==j&&("string"==typeof g?(j=m,m=void 0):(j=m,m=g,g=void 0)),!1===j)j=H;else if(!j)return e;return 1===l&&(r=j,j=function(e){return p().off(e),r.apply(this,arguments)},j.guid=r.guid||(r.guid=p.guid++)),e.each(function(){p.event.add(this,f,j,m,g)})}function Ga(e,f){return l(e,
"table")&&l(11!==f.nodeType?f:f.firstChild,"tr")?p(">tbody",e)[0]||e:e}function Ra(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function bb(e){var f=Ic.exec(e.type);return f?e.type=f[1]:e.removeAttribute("type"),e}function Sa(e,f){var g,m,j,l,r,n;if(1===f.nodeType){if(D.hasData(e)&&(g=D.access(e),m=D.set(f,g),n=g.events))for(j in delete m.handle,m.events={},n){g=0;for(m=n[j].length;g<m;g++)p.event.add(f,j,n[j][g])}aa.hasData(e)&&(l=aa.access(e),r=p.extend({},l),aa.set(f,r))}}function oa(e,
f,m,j){f=Rb.apply([],f);var l,r,n,t,q=0,u=e.length,v=u-1,s=f[0],A=p.isFunction(s);if(A||1<u&&"string"==typeof s&&!R.checkClone&&Jc.test(s))return e.each(function(g){var l=e.eq(g);A&&(f[0]=s.call(this,g,l.html()));oa(l,f,m,j)});if(u&&(l=N(f,e[0].ownerDocument,!1,e,j),r=l.firstChild,1===l.childNodes.length&&(l=r),r||j)){r=p.map(C(l,"script"),Ra);for(n=r.length;q<u;q++)t=l,q!==v&&(t=p.clone(t,!0,!0),n&&p.merge(r,C(t,"script"))),m.call(e[q],t,q);if(n){l=r[r.length-1].ownerDocument;p.map(r,bb);for(q=0;q<
n;q++)t=r[q],Qb.test(t.type||"")&&!D.access(t,"globalEval")&&p.contains(l,t)&&(t.src?p._evalUrl&&p._evalUrl(t.src):g(t.textContent.replace(Lc,""),l))}}return e}function Ta(e,f,g){for(var m=f?p.filter(f,e):e,j=0;null!=(f=m[j]);j++)g||1!==f.nodeType||p.cleanData(C(f)),f.parentNode&&(g&&p.contains(f.ownerDocument,f)&&G(C(f,"script")),f.parentNode.removeChild(f));return e}function sa(e,f,g){var m,j,l,r,n=e.style;return g=g||cb(e),g&&(r=g.getPropertyValue(f)||g[f],""!==r||p.contains(e.ownerDocument,e)||
(r=p.style(e,f)),!R.pixelMarginRight()&&wb.test(r)&&Sb.test(f)&&(m=n.width,j=n.minWidth,l=n.maxWidth,n.minWidth=n.maxWidth=n.width=r,r=g.width,n.width=m,n.minWidth=j,n.maxWidth=l)),void 0!==r?r+"":r}function Ha(e,f){return{get:function(){return e()?void delete this.get:(this.get=f).apply(this,arguments)}}}function y(e){var f=p.cssProps[e];if(!f){var f=p.cssProps,g;a:if(g=e,!(g in Tb)){for(var m=g[0].toUpperCase()+g.slice(1),j=Ub.length;j--;)if(g=Ub[j]+m,g in Tb)break a;g=void 0}f=f[e]=g||e}return f}
function Ua(e,f,g){return(e=Qa.exec(f))?Math.max(0,e[2]-(g||0))+(e[3]||"px"):f}function xa(e,f,g,m,j){var l=0;for(f=g===(m?"border":"content")?4:"width"===f?1:0;4>f;f+=2)"margin"===g&&(l+=p.css(e,g+ya[f],!0,j)),m?("content"===g&&(l-=p.css(e,"padding"+ya[f],!0,j)),"margin"!==g&&(l-=p.css(e,"border"+ya[f]+"Width",!0,j))):(l+=p.css(e,"padding"+ya[f],!0,j),"padding"!==g&&(l+=p.css(e,"border"+ya[f]+"Width",!0,j)));return l}function db(e,f,g){var m,j=cb(e),l=sa(e,f,j),r="border-box"===p.css(e,"boxSizing",
!1,j);return wb.test(l)?l:(m=r&&(R.boxSizingReliable()||l===e.style[f]),"auto"===l&&(l=e["offset"+f[0].toUpperCase()+f.slice(1)]),l=parseFloat(l)||0,l+xa(e,f,g||(r?"border":"content"),m,j)+"px")}function U(e,f,g,m,j){return new U.prototype.init(e,f,g,m,j)}function za(){eb&&(!1===B.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(za):e.setTimeout(za,p.fx.interval),p.fx.tick())}function Ia(){return e.setTimeout(function(){Ja=void 0}),Ja=p.now()}function Aa(e,f){var g,m=0,j={height:e};for(f=f?
1:0;4>m;m+=2-f)g=ya[m],j["margin"+g]=j["padding"+g]=e;return f&&(j.opacity=j.width=e),j}function A(e,f,g){for(var m,j=(K.tweeners[f]||[]).concat(K.tweeners["*"]),l=0,p=j.length;l<p;l++)if(m=j[l].call(g,f,e))return m}function K(e,f,g){var m,j,l=0,r=K.prefilters.length,n=p.Deferred().always(function(){delete t.elem}),t=function(){if(j)return!1;for(var f=Ja||Ia(),f=Math.max(0,q.startTime+q.duration-f),g=1-(f/q.duration||0),F=0,m=q.tweens.length;F<m;F++)q.tweens[F].run(g);return n.notifyWith(e,[q,g,f]),
1>g&&m?f:(m||n.notifyWith(e,[q,1,0]),n.resolveWith(e,[q]),!1)},q=n.promise({elem:e,props:p.extend({},f),opts:p.extend(!0,{specialEasing:{},easing:p.easing._default},g),originalProperties:f,originalOptions:g,startTime:Ja||Ia(),duration:g.duration,tweens:[],createTween:function(f,g){var F=p.Tween(e,q.opts,f,g,q.opts.specialEasing[f]||q.opts.easing);return q.tweens.push(F),F},stop:function(f){var g=0,F=f?q.tweens.length:0;if(j)return this;for(j=!0;g<F;g++)q.tweens[g].run(1);return f?(n.notifyWith(e,
[q,1,0]),n.resolveWith(e,[q,f])):n.rejectWith(e,[q,f]),this}});f=q.props;g=q.opts.specialEasing;var u,v,s,x;for(m in f)if(u=p.camelCase(m),v=g[u],s=f[m],Array.isArray(s)&&(v=s[1],s=f[m]=s[0]),m!==u&&(f[u]=s,delete f[m]),x=p.cssHooks[u],x&&"expand"in x)for(m in s=x.expand(s),delete f[u],s)m in f||(f[m]=s[m],g[m]=v);else g[u]=v;for(;l<r;l++)if(m=K.prefilters[l].call(q,e,f,q.opts))return p.isFunction(m.stop)&&(p._queueHooks(q.elem,q.opts.queue).stop=p.proxy(m.stop,m)),m;return p.map(f,A,q),p.isFunction(q.opts.start)&&
q.opts.start.call(e,q),q.progress(q.opts.progress).done(q.opts.done,q.opts.complete).fail(q.opts.fail).always(q.opts.always),p.fx.timer(p.extend(t,{elem:e,anim:q,queue:q.opts.queue})),q}function O(e){return(e.match(ea)||[]).join(" ")}function Q(e){return e.getAttribute&&e.getAttribute("class")||""}function W(e,f,g,m){var j;if(Array.isArray(f))p.each(f,function(f,F){g||Mc.test(e)?m(e,F):W(e+"["+("object"==typeof F&&null!=F?f:"")+"]",F,g,m)});else if(g||"object"!==p.type(f))m(e,f);else for(j in f)W(e+
"["+j+"]",f[j],g,m)}function V(e){return function(f,g){"string"!=typeof f&&(g=f,f="*");var m,j=0,l=f.toLowerCase().match(ea)||[];if(p.isFunction(g))for(;m=l[j++];)"+"===m[0]?(m=m.slice(1)||"*",(e[m]=e[m]||[]).unshift(g)):(e[m]=e[m]||[]).push(g)}}function Z(e,f,g,m){function j(n){var t;return l[n]=!0,p.each(e[n]||[],function(e,z){var p=z(f,g,m);return"string"!=typeof p||r||l[p]?r?!(t=p):void 0:(f.dataTypes.unshift(p),j(p),!1)}),t}var l={},r=e===xb;return j(f.dataTypes[0])||!l["*"]&&j("*")}function X(e,
f){var g,m,j=p.ajaxSettings.flatOptions||{};for(g in f)void 0!==f[g]&&((j[g]?e:m||(m={}))[g]=f[g]);return m&&p.extend(!0,e,m),e}var I=[],B=e.document,yb=Object.getPrototypeOf,Ba=I.slice,Rb=I.concat,zb=I.push,Oa=I.indexOf,fb={},Vb=fb.toString,gb=fb.hasOwnProperty,Wb=gb.toString,Nc=Wb.call(Object),R={},p=function(e,f){return new p.fn.init(e,f)},Oc=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Pc=/^-ms-/,Qc=/-([a-z])/g,Rc=function(e,f){return f.toUpperCase()};p.fn=p.prototype={jquery:"3.2.1",constructor:p,length:0,
toArray:function(){return Ba.call(this)},get:function(e){return null==e?Ba.call(this):0>e?this[e+this.length]:this[e]},pushStack:function(e){e=p.merge(this.constructor(),e);return e.prevObject=this,e},each:function(e){return p.each(this,e)},map:function(e){return this.pushStack(p.map(this,function(f,g){return e.call(f,g,f)}))},slice:function(){return this.pushStack(Ba.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var f=this.length;e=
+e+(0>e?f:0);return this.pushStack(0<=e&&e<f?[this[e]]:[])},end:function(){return this.prevObject||this.constructor()},push:zb,sort:I.sort,splice:I.splice};p.extend=p.fn.extend=function(){var e,f,g,m,j,l,r=arguments[0]||{},n=1,t=arguments.length,q=!1;"boolean"==typeof r&&(q=r,r=arguments[n]||{},n++);"object"==typeof r||p.isFunction(r)||(r={});for(n===t&&(r=this,n--);n<t;n++)if(null!=(e=arguments[n]))for(f in e)g=r[f],m=e[f],r!==m&&(q&&m&&(p.isPlainObject(m)||(j=Array.isArray(m)))?(j?(j=!1,l=g&&Array.isArray(g)?
g:[]):l=g&&p.isPlainObject(g)?g:{},r[f]=p.extend(q,l,m)):void 0!==m&&(r[f]=m));return r};p.extend({expando:"jQuery"+("3.2.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw Error(e);},noop:function(){},isFunction:function(e){return"function"===p.type(e)},isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var f=p.type(e);return("number"===f||"string"===f)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var f,g;return!(!e||"[object Object]"!==Vb.call(e))&&
(!(f=yb(e))||(g=gb.call(f,"constructor")&&f.constructor,"function"==typeof g&&Wb.call(g)===Nc))},isEmptyObject:function(e){for(var f in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?fb[Vb.call(e)]||"object":typeof e},globalEval:function(e){g(e)},camelCase:function(e){return e.replace(Pc,"ms-").replace(Qc,Rc)},each:function(e,f){var g,m=0;if(j(e))for(g=e.length;m<g&&!1!==f.call(e[m],m,e[m]);m++);else for(m in e)if(!1===f.call(e[m],m,e[m]))break;
return e},trim:function(e){return null==e?"":(e+"").replace(Oc,"")},makeArray:function(e,f){var g=f||[];return null!=e&&(j(Object(e))?p.merge(g,"string"==typeof e?[e]:e):zb.call(g,e)),g},inArray:function(e,f,g){return null==f?-1:Oa.call(f,e,g)},merge:function(e,f){for(var g=+f.length,m=0,j=e.length;m<g;m++)e[j++]=f[m];return e.length=j,e},grep:function(e,f,g){for(var m=[],j=0,l=e.length,p=!g;j<l;j++)g=!f(e[j],j),g!==p&&m.push(e[j]);return m},map:function(e,f,g){var m,l,p=0,r=[];if(j(e))for(m=e.length;p<
m;p++)l=f(e[p],p,g),null!=l&&r.push(l);else for(p in e)l=f(e[p],p,g),null!=l&&r.push(l);return Rb.apply([],r)},guid:1,proxy:function(e,f){var g,m,j;if("string"==typeof f&&(g=e[f],f=e,e=g),p.isFunction(e))return m=Ba.call(arguments,2),j=function(){return e.apply(f||this,m.concat(Ba.call(arguments)))},j.guid=e.guid=e.guid||p.guid++,j},now:Date.now,support:R});"function"==typeof Symbol&&(p.fn[Symbol.iterator]=I[Symbol.iterator]);p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),
function(e,f){fb["[object "+f+"]"]=f.toLowerCase()});var ta,Ab=e,P=function(e,f,g,m){var j,l,p,r,n,t=f&&f.ownerDocument,q=f?f.nodeType:9;if(g=g||[],"string"!=typeof e||!e||1!==q&&9!==q&&11!==q)return g;if(!m&&((f?f.ownerDocument||f:fa)!==M&&ua(f),f=f||M,ga)){if(11!==q&&(r=Sc.exec(e)))if(j=r[1])if(9===q){if(!(l=f.getElementById(j)))return g;if(l.id===j)return g.push(l),g}else{if(t&&(l=t.getElementById(j))&&Va(f,l)&&l.id===j)return g.push(l),g}else{if(r[2])return va.apply(g,f.getElementsByTagName(e)),
g;if((j=r[3])&&T.getElementsByClassName&&f.getElementsByClassName)return va.apply(g,f.getElementsByClassName(j)),g}if(T.qsa&&!hb[e+" "]&&(!Y||!Y.test(e))){if(1!==q)t=f,n=e;else if("object"!==f.nodeName.toLowerCase()){(p=f.getAttribute("id"))?p=p.replace(Xb,Yb):f.setAttribute("id",p=S);l=Wa(e);for(j=l.length;j--;)l[j]="#"+p+" "+ib(l[j]);n=l.join(",");t=Bb.test(e)&&Cb(f.parentNode)||f}if(n)try{return va.apply(g,t.querySelectorAll(n)),g}catch(u){}finally{p===S&&f.removeAttribute("id")}}}return Zb(e.replace(jb,
"$1"),f,g,m)},Db=function(){function e(g,m){return f.push(g+" ")>J.cacheLength&&delete e[f.shift()],e[g+" "]=m}var f=[];return e},ia=function(e){return e[S]=!0,e},ka=function(e){var f=M.createElement("fieldset");try{return!!e(f)}catch(g){return!1}finally{f.parentNode&&f.parentNode.removeChild(f)}},Eb=function(e,f){for(var g=e.split("|"),m=g.length;m--;)J.attrHandle[g[m]]=f},$b=function(e,f){var g=f&&e,m=g&&1===e.nodeType&&1===f.nodeType&&e.sourceIndex-f.sourceIndex;if(m)return m;if(g)for(;g=g.nextSibling;)if(g===
f)return-1;return e?1:-1},Tc=function(e){return function(f){return"input"===f.nodeName.toLowerCase()&&f.type===e}},Uc=function(e){return function(f){var g=f.nodeName.toLowerCase();return("input"===g||"button"===g)&&f.type===e}},ac=function(e){return function(f){return"form"in f?f.parentNode&&!1===f.disabled?"label"in f?"label"in f.parentNode?f.parentNode.disabled===e:f.disabled===e:f.isDisabled===e||f.isDisabled!==!e&&Vc(f)===e:f.disabled===e:"label"in f&&f.disabled===e}},Ca=function(e){return ia(function(f){return f=
+f,ia(function(g,m){for(var j,l=e([],g.length,f),p=l.length;p--;)g[j=l[p]]&&(g[j]=!(m[j]=g[j]))})})},Cb=function(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e},bc=function(){},ib=function(e){for(var f=0,g=e.length,m="";f<g;f++)m+=e[f].value;return m},kb=function(e,f,g){var m=f.dir,j=f.next,l=j||m,p=g&&"parentNode"===l,r=Wc++;return f.first?function(f,g,j){for(;f=f[m];)if(1===f.nodeType||p)return e(f,g,j);return!1}:function(f,g,F){var L,n,t,q=[la,r];if(F)for(;f=f[m];){if((1===f.nodeType||
p)&&e(f,g,F))return!0}else for(;f=f[m];)if(1===f.nodeType||p)if(t=f[S]||(f[S]={}),n=t[f.uniqueID]||(t[f.uniqueID]={}),j&&j===f.nodeName.toLowerCase())f=f[m]||f;else{if((L=n[l])&&L[0]===la&&L[1]===r)return q[2]=L[2];if(n[l]=q,q[2]=e(f,g,F))return!0}return!1}},Fb=function(e){return 1<e.length?function(f,g,m){for(var j=e.length;j--;)if(!e[j](f,g,m))return!1;return!0}:e[0]},lb=function(e,f,g,m,j){for(var l,p=[],r=0,n=e.length,t=null!=f;r<n;r++)(l=e[r])&&(g&&!g(l,m,j)||(p.push(l),t&&f.push(r)));return p},
Gb=function(e,f,g,m,j,l){return m&&!m[S]&&(m=Gb(m)),j&&!j[S]&&(j=Gb(j,l)),ia(function(l,p,r,n){var t,q,Pa=[],u=[],s=p.length,v;if(!(v=l)){v=f||"*";for(var A=r.nodeType?[r]:r,x=[],K=0,O=A.length;K<O;K++)P(v,A[K],x);v=x}v=!e||!l&&f?v:lb(v,Pa,e,r,n);A=g?j||(l?e:s||m)?[]:p:v;if(g&&g(v,A,r,n),m){t=lb(A,u);m(t,[],r,n);for(r=t.length;r--;)(q=t[r])&&(A[u[r]]=!(v[u[r]]=q))}if(l){if(j||e){if(j){t=[];for(r=A.length;r--;)(q=A[r])&&t.push(v[r]=q);j(null,A=[],t,n)}for(r=A.length;r--;)(q=A[r])&&-1<(t=j?Da(l,q):
Pa[r])&&(l[t]=!(p[t]=q))}}else A=lb(A===p?A.splice(s,A.length):A),j?j(null,p,A,n):va.apply(p,A)})},Hb=function(e){var f,g,m,j=e.length,l=J.relative[e[0].type];g=l||J.relative[" "];for(var p=l?1:0,r=kb(function(e){return e===f},g,!0),n=kb(function(e){return-1<Da(f,e)},g,!0),t=[function(e,z,g){e=!l&&(g||z!==mb)||((f=z).nodeType?r(e,z,g):n(e,z,g));return f=null,e}];p<j;p++)if(g=J.relative[e[p].type])t=[kb(Fb(t),g)];else{if(g=J.filter[e[p].type].apply(null,e[p].matches),g[S]){for(m=++p;m<j&&!J.relative[e[m].type];m++);
return Gb(1<p&&Fb(t),1<p&&ib(e.slice(0,p-1).concat({value:" "===e[p-2].type?"*":""})).replace(jb,"$1"),g,p<m&&Hb(e.slice(p,m)),m<j&&Hb(e=e.slice(m)),m<j&&ib(e))}t.push(g)}return Fb(t)},Ka,T,J,nb,cc,Wa,Ib,Zb,mb,wa,La,ua,M,ha,ga,Y,Ea,ob,Va,S="sizzle"+1*new Date,fa=Ab.document,la=0,Wc=0,dc=Db(),ec=Db(),hb=Db(),Jb=function(e,f){return e===f&&(La=!0),0},Xc={}.hasOwnProperty,Fa=[],Yc=Fa.pop,Zc=Fa.push,va=Fa.push,fc=Fa.slice,Da=function(e,f){for(var g=0,m=e.length;g<m;g++)if(e[g]===f)return g;return-1},
$c=/[\x20\t\r\n\f]+/g,jb=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,ad=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,bd=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,cd=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,dd=RegExp(":((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
ed=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,pb={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:RegExp("^\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\]"),PSEUDO:RegExp("^:((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)",
"i")},fd=/^(?:input|select|textarea|button)$/i,gd=/^h\d$/i,Xa=/^[^{]+\{\s*\[native \w/,Sc=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Bb=/[+~]/,pa=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,qa=function(e,f,g){e="0x"+f-65536;return e!==e||g?f:0>e?String.fromCharCode(e+65536):String.fromCharCode(e>>10|55296,1023&e|56320)},Xb=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Yb=function(e,f){return f?"\x00"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},gc=function(){ua()},
Vc=kb(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{va.apply(Fa=fc.call(fa.childNodes),fa.childNodes),Fa[fa.childNodes.length].nodeType}catch(Jd){va={apply:Fa.length?function(e,f){Zc.apply(e,fc.call(f))}:function(e,f){for(var g=e.length,m=0;e[g++]=f[m++];);e.length=g-1}}}T=P.support={};cc=P.isXML=function(e){e=e&&(e.ownerDocument||e).documentElement;return!!e&&"HTML"!==e.nodeName};ua=P.setDocument=function(e){var f,g;e=e?e.ownerDocument||e:fa;
return e!==M&&9===e.nodeType&&e.documentElement?(M=e,ha=M.documentElement,ga=!cc(M),fa!==M&&(g=M.defaultView)&&g.top!==g&&(g.addEventListener?g.addEventListener("unload",gc,!1):g.attachEvent&&g.attachEvent("onunload",gc)),T.attributes=ka(function(e){return e.className="i",!e.getAttribute("className")}),T.getElementsByTagName=ka(function(e){return e.appendChild(M.createComment("")),!e.getElementsByTagName("*").length}),T.getElementsByClassName=Xa.test(M.getElementsByClassName),T.getById=ka(function(e){return ha.appendChild(e).id=
S,!M.getElementsByName||!M.getElementsByName(S).length}),T.getById?(J.filter.ID=function(e){var f=e.replace(pa,qa);return function(e){return e.getAttribute("id")===f}},J.find.ID=function(e,f){if("undefined"!=typeof f.getElementById&&ga){var g=f.getElementById(e);return g?[g]:[]}}):(J.filter.ID=function(e){var f=e.replace(pa,qa);return function(e){return(e="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id"))&&e.value===f}},J.find.ID=function(e,f){if("undefined"!=typeof f.getElementById&&
ga){var g,z,m,j=f.getElementById(e);if(j){if(g=j.getAttributeNode("id"),g&&g.value===e)return[j];m=f.getElementsByName(e);for(z=0;j=m[z++];)if(g=j.getAttributeNode("id"),g&&g.value===e)return[j]}return[]}}),J.find.TAG=T.getElementsByTagName?function(e,f){return"undefined"!=typeof f.getElementsByTagName?f.getElementsByTagName(e):T.qsa?f.querySelectorAll(e):void 0}:function(e,f){var g,z=[],m=0,j=f.getElementsByTagName(e);if("*"===e){for(;g=j[m++];)1===g.nodeType&&z.push(g);return z}return j},J.find.CLASS=
T.getElementsByClassName&&function(e,f){if("undefined"!=typeof f.getElementsByClassName&&ga)return f.getElementsByClassName(e)},Ea=[],Y=[],(T.qsa=Xa.test(M.querySelectorAll))&&(ka(function(e){ha.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>";e.querySelectorAll("[msallowcapture^='']").length&&Y.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");e.querySelectorAll("[selected]").length||Y.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
e.querySelectorAll("[id~="+S+"-]").length||Y.push("~=");e.querySelectorAll(":checked").length||Y.push(":checked");e.querySelectorAll("a#"+S+"+*").length||Y.push(".#.+[+~]")}),ka(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var f=M.createElement("input");f.setAttribute("type","hidden");e.appendChild(f).setAttribute("name","D");e.querySelectorAll("[name=d]").length&&Y.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");2!==e.querySelectorAll(":enabled").length&&
Y.push(":enabled",":disabled");ha.appendChild(e).disabled=!0;2!==e.querySelectorAll(":disabled").length&&Y.push(":enabled",":disabled");e.querySelectorAll("*,:x");Y.push(",.*:")})),(T.matchesSelector=Xa.test(ob=ha.matches||ha.webkitMatchesSelector||ha.mozMatchesSelector||ha.oMatchesSelector||ha.msMatchesSelector))&&ka(function(e){T.disconnectedMatch=ob.call(e,"*");ob.call(e,"[s!='']:x");Ea.push("!=",":((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")}),
Y=Y.length&&RegExp(Y.join("|")),Ea=Ea.length&&RegExp(Ea.join("|")),f=Xa.test(ha.compareDocumentPosition),Va=f||Xa.test(ha.contains)?function(e,f){var g=9===e.nodeType?e.documentElement:e,z=f&&f.parentNode;return e===z||!(!z||1!==z.nodeType||!(g.contains?g.contains(z):e.compareDocumentPosition&&16&e.compareDocumentPosition(z)))}:function(e,f){if(f)for(;f=f.parentNode;)if(f===e)return!0;return!1},Jb=f?function(e,f){if(e===f)return La=!0,0;var g=!e.compareDocumentPosition-!f.compareDocumentPosition;
return g?g:(g=(e.ownerDocument||e)===(f.ownerDocument||f)?e.compareDocumentPosition(f):1,1&g||!T.sortDetached&&f.compareDocumentPosition(e)===g?e===M||e.ownerDocument===fa&&Va(fa,e)?-1:f===M||f.ownerDocument===fa&&Va(fa,f)?1:wa?Da(wa,e)-Da(wa,f):0:4&g?-1:1)}:function(e,f){if(e===f)return La=!0,0;var g,z=0;g=e.parentNode;var m=f.parentNode,j=[e],F=[f];if(!g||!m)return e===M?-1:f===M?1:g?-1:m?1:wa?Da(wa,e)-Da(wa,f):0;if(g===m)return $b(e,f);for(g=e;g=g.parentNode;)j.unshift(g);for(g=f;g=g.parentNode;)F.unshift(g);
for(;j[z]===F[z];)z++;return z?$b(j[z],F[z]):j[z]===fa?-1:F[z]===fa?1:0},M):M};P.matches=function(e,f){return P(e,null,null,f)};P.matchesSelector=function(e,f){if((e.ownerDocument||e)!==M&&ua(e),f=f.replace(cd,"='$1']"),T.matchesSelector&&ga&&!hb[f+" "]&&(!Ea||!Ea.test(f))&&(!Y||!Y.test(f)))try{var g=ob.call(e,f);if(g||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return g}catch(m){}return 0<P(f,M,null,[e]).length};P.contains=function(e,f){return(e.ownerDocument||e)!==M&&ua(e),Va(e,f)};
P.attr=function(e,f){(e.ownerDocument||e)!==M&&ua(e);var g=J.attrHandle[f.toLowerCase()],g=g&&Xc.call(J.attrHandle,f.toLowerCase())?g(e,f,!ga):void 0;return void 0!==g?g:T.attributes||!ga?e.getAttribute(f):(g=e.getAttributeNode(f))&&g.specified?g.value:null};P.escape=function(e){return(e+"").replace(Xb,Yb)};P.error=function(e){throw Error("Syntax error, unrecognized expression: "+e);};P.uniqueSort=function(e){var f,g=[],m=0,j=0;if(La=!T.detectDuplicates,wa=!T.sortStable&&e.slice(0),e.sort(Jb),La){for(;f=
e[j++];)f===e[j]&&(m=g.push(j));for(;m--;)e.splice(g[m],1)}return wa=null,e};nb=P.getText=function(e){var f,g="",m=0;if(f=e.nodeType)if(1===f||9===f||11===f){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)g+=nb(e)}else{if(3===f||4===f)return e.nodeValue}else for(;f=e[m++];)g+=nb(f);return g};J=P.selectors={cacheLength:50,createPseudo:ia,match:pb,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",
first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(pa,qa),e[3]=(e[3]||e[4]||e[5]||"").replace(pa,qa),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||P.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&P.error(e[0]),e},PSEUDO:function(e){var f,g=!e[6]&&e[2];return pb.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":g&&dd.test(g)&&
(f=Wa(g,!0))&&(f=g.indexOf(")",g.length-f)-g.length)&&(e[0]=e[0].slice(0,f),e[2]=g.slice(0,f)),e.slice(0,3))}},filter:{TAG:function(e){var f=e.replace(pa,qa).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===f}},CLASS:function(e){var f=dc[e+" "];return f||(f=RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"([\\x20\\t\\r\\n\\f]|$)"))&&dc(e,function(e){return f.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||
"")})},ATTR:function(e,f,g){return function(m){m=P.attr(m,e);return null==m?"!="===f:!f||(m+="","="===f?m===g:"!="===f?m!==g:"^="===f?g&&0===m.indexOf(g):"*="===f?g&&-1<m.indexOf(g):"$="===f?g&&m.slice(-g.length)===g:"~="===f?-1<(" "+m.replace($c," ")+" ").indexOf(g):"|="===f&&(m===g||m.slice(0,g.length+1)===g+"-"))}},CHILD:function(e,f,g,m,j){var l="nth"!==e.slice(0,3),p="last"!==e.slice(-4),r="of-type"===f;return 1===m&&0===j?function(e){return!!e.parentNode}:function(f,g,F){var L,n,t,q,u,v;g=l!==
p?"nextSibling":"previousSibling";var s=f.parentNode,A=r&&f.nodeName.toLowerCase();F=!F&&!r;var x=!1;if(s){if(l){for(;g;){for(q=f;q=q[g];)if(r?q.nodeName.toLowerCase()===A:1===q.nodeType)return!1;v=g="only"===e&&!v&&"nextSibling"}return!0}if(v=[p?s.firstChild:s.lastChild],p&&F){q=s;t=q[S]||(q[S]={});n=t[q.uniqueID]||(t[q.uniqueID]={});L=n[e]||[];x=(u=L[0]===la&&L[1])&&L[2];for(q=u&&s.childNodes[u];q=++u&&q&&q[g]||(x=u=0)||v.pop();)if(1===q.nodeType&&++x&&q===f){n[e]=[la,u,x];break}}else if(F&&(q=
f,t=q[S]||(q[S]={}),n=t[q.uniqueID]||(t[q.uniqueID]={}),L=n[e]||[],u=L[0]===la&&L[1],x=u),!1===x)for(;(q=++u&&q&&q[g]||(x=u=0)||v.pop())&&(!(r?q.nodeName.toLowerCase()===A:1===q.nodeType)||!++x||!(F&&(t=q[S]||(q[S]={}),n=t[q.uniqueID]||(t[q.uniqueID]={}),n[e]=[la,x]),q===f)););return x-=j,x===m||0===x%m&&0<=x/m}}},PSEUDO:function(e,f){var g,m=J.pseudos[e]||J.setFilters[e.toLowerCase()]||P.error("unsupported pseudo: "+e);return m[S]?m(f):1<m.length?(g=[e,e,"",f],J.setFilters.hasOwnProperty(e.toLowerCase())?
ia(function(e,g){for(var z,j=m(e,f),l=j.length;l--;)z=Da(e,j[l]),e[z]=!(g[z]=j[l])}):function(e){return m(e,0,g)}):m}},pseudos:{not:ia(function(e){var f=[],g=[],m=Ib(e.replace(jb,"$1"));return m[S]?ia(function(e,f,g,z){var j;g=m(e,null,z,[]);for(z=e.length;z--;)(j=g[z])&&(e[z]=!(f[z]=j))}):function(e,z,j){return f[0]=e,m(f,null,j,g),f[0]=null,!g.pop()}}),has:ia(function(e){return function(f){return 0<P(e,f).length}}),contains:ia(function(e){return e=e.replace(pa,qa),function(f){return-1<(f.textContent||
f.innerText||nb(f)).indexOf(e)}}),lang:ia(function(e){return ed.test(e||"")||P.error("unsupported lang: "+e),e=e.replace(pa,qa).toLowerCase(),function(f){var g;do if(g=ga?f.lang:f.getAttribute("xml:lang")||f.getAttribute("lang"))return g=g.toLowerCase(),g===e||0===g.indexOf(e+"-");while((f=f.parentNode)&&1===f.nodeType);return!1}}),target:function(e){var f=Ab.location&&Ab.location.hash;return f&&f.slice(1)===e.id},root:function(e){return e===ha},focus:function(e){return e===M.activeElement&&(!M.hasFocus||
M.hasFocus())&&!(!e.type&&!e.href&&!~e.tabIndex)},enabled:ac(!1),disabled:ac(!0),checked:function(e){var f=e.nodeName.toLowerCase();return"input"===f&&!!e.checked||"option"===f&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(6>e.nodeType)return!1;return!0},parent:function(e){return!J.pseudos.empty(e)},header:function(e){return gd.test(e.nodeName)},input:function(e){return fd.test(e.nodeName)},
button:function(e){var f=e.nodeName.toLowerCase();return"input"===f&&"button"===e.type||"button"===f},text:function(e){var f;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(f=e.getAttribute("type"))||"text"===f.toLowerCase())},first:Ca(function(){return[0]}),last:Ca(function(e,f){return[f-1]}),eq:Ca(function(e,f,g){return[0>g?g+f:g]}),even:Ca(function(e,f){for(var g=0;g<f;g+=2)e.push(g);return e}),odd:Ca(function(e,f){for(var g=1;g<f;g+=2)e.push(g);return e}),lt:Ca(function(e,f,
g){for(f=0>g?g+f:g;0<=--f;)e.push(f);return e}),gt:Ca(function(e,f,g){for(g=0>g?g+f:g;++g<f;)e.push(g);return e})}};J.pseudos.nth=J.pseudos.eq;for(Ka in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})J.pseudos[Ka]=Tc(Ka);for(Ka in{submit:!0,reset:!0})J.pseudos[Ka]=Uc(Ka);bc.prototype=J.filters=J.pseudos;J.setFilters=new bc;Wa=P.tokenize=function(e,f){var g,m,j,l,p,r,n;if(p=ec[e+" "])return f?0:p.slice(0);p=e;r=[];for(n=J.preFilter;p;){g&&!(m=ad.exec(p))||(m&&(p=p.slice(m[0].length)||p),r.push(j=
[]));g=!1;(m=bd.exec(p))&&(g=m.shift(),j.push({value:g,type:m[0].replace(jb," ")}),p=p.slice(g.length));for(l in J.filter)!(m=pb[l].exec(p))||n[l]&&!(m=n[l](m))||(g=m.shift(),j.push({value:g,type:l,matches:m}),p=p.slice(g.length));if(!g)break}return f?p.length:p?P.error(e):ec(e,r).slice(0)};ta=(Ib=P.compile=function(e,f){var g,m=[],j=[],l=hb[e+" "];if(!l){f||(f=Wa(e));for(g=f.length;g--;)l=Hb(f[g]),l[S]?m.push(l):j.push(l);g=hb;var p=0<m.length,r=0<j.length,l=function(e,f,g,z,l){var F,n,L,t=0,q="0",
u=e&&[],v=[],s=mb,Pa=e||r&&J.find.TAG("*",l),A=la+=null==s?1:Math.random()||0.1,x=Pa.length;for(l&&(mb=f===M||f||l);q!==x&&null!=(F=Pa[q]);q++){if(r&&F){n=0;for(f||F.ownerDocument===M||(ua(F),g=!ga);L=j[n++];)if(L(F,f||M,g)){z.push(F);break}l&&(la=A)}p&&((F=!L&&F)&&t--,e&&u.push(F))}if(t+=q,p&&q!==t){for(n=0;L=m[n++];)L(u,v,f,g);if(e){if(0<t)for(;q--;)u[q]||v[q]||(v[q]=Yc.call(z));v=lb(v)}va.apply(z,v);l&&!e&&0<v.length&&1<t+m.length&&P.uniqueSort(z)}return l&&(la=A,mb=s),u},l=p?ia(l):l,l=g(e,l);
l.selector=e}return l},Zb=P.select=function(e,f,g,m){var j,l,p,r,n,t="function"==typeof e&&e,q=!m&&Wa(e=t.selector||e);if(g=g||[],1===q.length){if(l=q[0]=q[0].slice(0),2<l.length&&"ID"===(p=l[0]).type&&9===f.nodeType&&ga&&J.relative[l[1].type]){if(f=(J.find.ID(p.matches[0].replace(pa,qa),f)||[])[0],!f)return g;t&&(f=f.parentNode);e=e.slice(l.shift().value.length)}for(j=pb.needsContext.test(e)?0:l.length;j--&&!(p=l[j],J.relative[r=p.type]);)if((n=J.find[r])&&(m=n(p.matches[0].replace(pa,qa),Bb.test(l[0].type)&&
Cb(f.parentNode)||f))){if(l.splice(j,1),e=m.length&&ib(l),!e)return va.apply(g,m),g;break}}return(t||Ib(e,q))(m,f,!ga,g,!f||Bb.test(e)&&Cb(f.parentNode)||f),g},T.sortStable=S.split("").sort(Jb).join("")===S,T.detectDuplicates=!!La,ua(),T.sortDetached=ka(function(e){return 1&e.compareDocumentPosition(M.createElement("fieldset"))}),ka(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||Eb("type|href|height|width",function(e,f,g){if(!g)return e.getAttribute(f,
"type"===f.toLowerCase()?1:2)}),T.attributes&&ka(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||Eb("value",function(e,f,g){if(!g&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ka(function(e){return null==e.getAttribute("disabled")})||Eb("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(e,f,g){var m;if(!g)return!0===e[f]?f.toLowerCase():
(m=e.getAttributeNode(f))&&m.specified?m.value:null}),P);p.find=ta;p.expr=ta.selectors;p.expr[":"]=p.expr.pseudos;p.uniqueSort=p.unique=ta.uniqueSort;p.text=ta.getText;p.isXMLDoc=ta.isXML;p.contains=ta.contains;p.escapeSelector=ta.escape;var Ma=function(e,f,g){for(var m=[],j=void 0!==g;(e=e[f])&&9!==e.nodeType;)if(1===e.nodeType){if(j&&p(e).is(g))break;m.push(e)}return m},hc=function(e,f){for(var g=[];e;e=e.nextSibling)1===e.nodeType&&e!==f&&g.push(e);return g},ic=p.expr.match.needsContext,jc=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,
Ec=/^.[^:#\[\.,]*$/;p.filter=function(e,f,g){var m=f[0];return g&&(e=":not("+e+")"),1===f.length&&1===m.nodeType?p.find.matchesSelector(m,e)?[m]:[]:p.find.matches(e,p.grep(f,function(e){return 1===e.nodeType}))};p.fn.extend({find:function(e){var f,g,m=this.length,j=this;if("string"!=typeof e)return this.pushStack(p(e).filter(function(){for(f=0;f<m;f++)if(p.contains(j[f],this))return!0}));g=this.pushStack([]);for(f=0;f<m;f++)p.find(e,j[f],g);return 1<m?p.uniqueSort(g):g},filter:function(e){return this.pushStack(n(this,
e||[],!1))},not:function(e){return this.pushStack(n(this,e||[],!0))},is:function(e){return!!n(this,"string"==typeof e&&ic.test(e)?p(e):e||[],!1).length}});var kc,hd=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(p.fn.init=function(e,f,g){var m,j;if(!e)return this;if(g=g||kc,"string"==typeof e){if(m="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:hd.exec(e),!m||!m[1]&&f)return!f||f.jquery?(f||g).find(e):this.constructor(f).find(e);if(m[1]){if(f=f instanceof p?f[0]:f,p.merge(this,p.parseHTML(m[1],
f&&f.nodeType?f.ownerDocument||f:B,!0)),jc.test(m[1])&&p.isPlainObject(f))for(m in f)p.isFunction(this[m])?this[m](f[m]):this.attr(m,f[m]);return this}return j=B.getElementById(m[2]),j&&(this[0]=j,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):p.isFunction(e)?void 0!==g.ready?g.ready(e):e(p):p.makeArray(e,this)}).prototype=p.fn;kc=p(B);var id=/^(?:parents|prev(?:Until|All))/,jd={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({has:function(e){var f=p(e,this),g=f.length;
return this.filter(function(){for(var e=0;e<g;e++)if(p.contains(this,f[e]))return!0})},closest:function(e,f){var g,m=0,j=this.length,l=[],r="string"!=typeof e&&p(e);if(!ic.test(e))for(;m<j;m++)for(g=this[m];g&&g!==f;g=g.parentNode)if(11>g.nodeType&&(r?-1<r.index(g):1===g.nodeType&&p.find.matchesSelector(g,e))){l.push(g);break}return this.pushStack(1<l.length?p.uniqueSort(l):l)},index:function(e){return e?"string"==typeof e?Oa.call(p(e),this[0]):Oa.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?
this.first().prevAll().length:-1},add:function(e,f){return this.pushStack(p.uniqueSort(p.merge(this.get(),p(e,f))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}});p.each({parent:function(e){return(e=e.parentNode)&&11!==e.nodeType?e:null},parents:function(e){return Ma(e,"parentNode")},parentsUntil:function(e,f,g){return Ma(e,"parentNode",g)},next:function(e){return s(e,"nextSibling")},prev:function(e){return s(e,"previousSibling")},nextAll:function(e){return Ma(e,
"nextSibling")},prevAll:function(e){return Ma(e,"previousSibling")},nextUntil:function(e,f,g){return Ma(e,"nextSibling",g)},prevUntil:function(e,f,g){return Ma(e,"previousSibling",g)},siblings:function(e){return hc((e.parentNode||{}).firstChild,e)},children:function(e){return hc(e.firstChild)},contents:function(e){return l(e,"iframe")?e.contentDocument:(l(e,"template")&&(e=e.content||e),p.merge([],e.childNodes))}},function(e,f){p.fn[e]=function(g,m){var j=p.map(this,f,g);return"Until"!==e.slice(-5)&&
(m=g),m&&"string"==typeof m&&(j=p.filter(m,j)),1<this.length&&(jd[e]||p.uniqueSort(j),id.test(e)&&j.reverse()),this.pushStack(j)}});var ea=/[^\x20\t\r\n\f]+/g;p.Callbacks=function(e){var f;if("string"==typeof e){var g={};f=(p.each(e.match(ea)||[],function(e,f){g[f]=!0}),g)}else f=p.extend({},e);e=f;var m,j,l,r,n=[],t=[],q=-1,u=function(){r=r||e.once;for(l=m=!0;t.length;q=-1)for(j=t.shift();++q<n.length;)!1===n[q].apply(j[0],j[1])&&e.stopOnFalse&&(q=n.length,j=!1);e.memory||(j=!1);m=!1;r&&(n=j?[]:
"")},v={add:function(){return n&&(j&&!m&&(q=n.length-1,t.push(j)),function Kc(f){p.each(f,function(f,g){p.isFunction(g)?e.unique&&v.has(g)||n.push(g):g&&g.length&&"string"!==p.type(g)&&Kc(g)})}(arguments),j&&!m&&u()),this},remove:function(){return p.each(arguments,function(e,f){for(var g;-1<(g=p.inArray(f,n,g));)n.splice(g,1),g<=q&&q--}),this},has:function(e){return e?-1<p.inArray(e,n):0<n.length},empty:function(){return n&&(n=[]),this},disable:function(){return r=t=[],n=j="",this},disabled:function(){return!n},
lock:function(){return r=t=[],j||m||(n=j=""),this},locked:function(){return!!r},fireWith:function(e,f){return r||(f=f||[],f=[e,f.slice?f.slice():f],t.push(f),m||u()),this},fire:function(){return v.fireWith(this,arguments),this},fired:function(){return!!l}};return v};p.extend({Deferred:function(f){var g=[["notify","progress",p.Callbacks("memory"),p.Callbacks("memory"),2],["resolve","done",p.Callbacks("once memory"),p.Callbacks("once memory"),0,"resolved"],["reject","fail",p.Callbacks("once memory"),
p.Callbacks("once memory"),1,"rejected"]],j="pending",l={state:function(){return j},always:function(){return r.done(arguments).fail(arguments),this},"catch":function(e){return l.then(null,e)},pipe:function(){var e=arguments;return p.Deferred(function(f){p.each(g,function(g,m){var j=p.isFunction(e[m[4]])&&e[m[4]];r[m[1]](function(){var e=j&&j.apply(this,arguments);e&&p.isFunction(e.promise)?e.promise().progress(f.notify).done(f.resolve).fail(f.reject):f[m[0]+"With"](this,j?[e]:arguments)})});e=null}).promise()},
then:function(f,j,z){function l(f,g,j,z){return function(){var F=this,n=arguments,t=function(){var e,t;if(!(f<r)){if(e=j.apply(F,n),e===g.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then;p.isFunction(t)?z?t.call(e,l(r,g,q,z),l(r,g,m,z)):(r++,t.call(e,l(r,g,q,z),l(r,g,m,z),l(r,g,q,g.notifyWith))):(j!==q&&(F=void 0,n=[e]),(z||g.resolveWith)(F,n))}},L=z?t:function(){try{t()}catch(e){p.Deferred.exceptionHook&&p.Deferred.exceptionHook(e,
L.stackTrace),f+1>=r&&(j!==m&&(F=void 0,n=[e]),g.rejectWith(F,n))}};f?L():(p.Deferred.getStackHook&&(L.stackTrace=p.Deferred.getStackHook()),e.setTimeout(L))}}var r=0;return p.Deferred(function(e){g[0][3].add(l(0,e,p.isFunction(z)?z:q,e.notifyWith));g[1][3].add(l(0,e,p.isFunction(f)?f:q));g[2][3].add(l(0,e,p.isFunction(j)?j:m))}).promise()},promise:function(e){return null!=e?p.extend(e,l):l}},r={};return p.each(g,function(e,f){var m=f[2],z=f[5];l[f[1]]=m.add;z&&m.add(function(){j=z},g[3-e][2].disable,
g[0][2].lock);m.add(f[3].fire);r[f[0]]=function(){return r[f[0]+"With"](this===r?void 0:this,arguments),this};r[f[0]+"With"]=m.fireWith}),l.promise(r),f&&f.call(r,r),r},when:function(e){var f=arguments.length,g=f,m=Array(g),j=Ba.call(arguments),l=p.Deferred(),n=function(e){return function(g){m[e]=this;j[e]=1<arguments.length?Ba.call(arguments):g;--f||l.resolveWith(m,j)}};if(1>=f&&(r(e,l.done(n(g)).resolve,l.reject,!f),"pending"===l.state()||p.isFunction(j[g]&&j[g].then)))return l.then();for(;g--;)r(j[g],
n(g),l.reject);return l.promise()}});var kd=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;p.Deferred.exceptionHook=function(f,g){e.console&&e.console.warn&&f&&kd.test(f.name)&&e.console.warn("jQuery.Deferred exception: "+f.message,f.stack,g)};p.readyException=function(f){e.setTimeout(function(){throw f;})};var Kb=p.Deferred();p.fn.ready=function(e){return Kb.then(e)["catch"](function(e){p.readyException(e)}),this};p.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--p.readyWait:
p.isReady)||(p.isReady=!0,!0!==e&&0<--p.readyWait||Kb.resolveWith(B,[p]))}});p.ready.then=Kb.then;"complete"===B.readyState||"loading"!==B.readyState&&!B.documentElement.doScroll?e.setTimeout(p.ready):(B.addEventListener("DOMContentLoaded",t),e.addEventListener("load",t));var ra=function(e,f,g,m,j,l,r){var n=0,t=e.length,q=null==g;if("object"===p.type(g))for(n in j=!0,g)ra(e,f,n,g[n],!0,l,r);else if(void 0!==m&&(j=!0,p.isFunction(m)||(r=!0),q&&(r?(f.call(e,m),f=null):(q=f,f=function(e,f,g){return q.call(p(e),
g)})),f))for(;n<t;n++)f(e[n],g,r?m:m.call(e[n],n,f(e[n],g)));return j?e:q?f.call(e):t?f(e[0],g):l},qb=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};u.uid=1;u.prototype={cache:function(e){var f=e[this.expando];return f||(f={},qb(e)&&(e.nodeType?e[this.expando]=f:Object.defineProperty(e,this.expando,{value:f,configurable:!0}))),f},set:function(e,f,g){var m;e=this.cache(e);if("string"==typeof f)e[p.camelCase(f)]=g;else for(m in f)e[p.camelCase(m)]=f[m];return e},get:function(e,f){return void 0===
f?this.cache(e):e[this.expando]&&e[this.expando][p.camelCase(f)]},access:function(e,f,g){return void 0===f||f&&"string"==typeof f&&void 0===g?this.get(e,f):(this.set(e,f,g),void 0!==g?g:f)},remove:function(e,f){var g,m=e[this.expando];if(void 0!==m){if(void 0!==f){Array.isArray(f)?f=f.map(p.camelCase):(f=p.camelCase(f),f=f in m?[f]:f.match(ea)||[]);for(g=f.length;g--;)delete m[f[g]]}(void 0===f||p.isEmptyObject(m))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){e=
e[this.expando];return void 0!==e&&!p.isEmptyObject(e)}};var D=new u,aa=new u,Gc=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Fc=/[A-Z]/g;p.extend({hasData:function(e){return aa.hasData(e)||D.hasData(e)},data:function(e,f,g){return aa.access(e,f,g)},removeData:function(e,f){aa.remove(e,f)},_data:function(e,f,g){return D.access(e,f,g)},_removeData:function(e,f){D.remove(e,f)}});p.fn.extend({data:function(e,f){var g,m,j,l=this[0],r=l&&l.attributes;if(void 0===e){if(this.length&&(j=aa.get(l),1===l.nodeType&&!D.get(l,
"hasDataAttrs"))){for(g=r.length;g--;)r[g]&&(m=r[g].name,0===m.indexOf("data-")&&(m=p.camelCase(m.slice(5)),v(l,m,j[m])));D.set(l,"hasDataAttrs",!0)}return j}return"object"==typeof e?this.each(function(){aa.set(this,e)}):ra(this,function(f){var g;if(l&&void 0===f){if((g=aa.get(l,e),void 0!==g)||(g=v(l,e),void 0!==g))return g}else this.each(function(){aa.set(this,e,f)})},null,f,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){aa.remove(this,e)})}});p.extend({queue:function(e,
f,g){var m;if(e)return f=(f||"fx")+"queue",m=D.get(e,f),g&&(!m||Array.isArray(g)?m=D.access(e,f,p.makeArray(g)):m.push(g)),m||[]},dequeue:function(e,f){f=f||"fx";var g=p.queue(e,f),m=g.length,j=g.shift(),l=p._queueHooks(e,f),r=function(){p.dequeue(e,f)};"inprogress"===j&&(j=g.shift(),m--);j&&("fx"===f&&g.unshift("inprogress"),delete l.stop,j.call(e,r,l));!m&&l&&l.empty.fire()},_queueHooks:function(e,f){var g=f+"queueHooks";return D.get(e,g)||D.access(e,g,{empty:p.Callbacks("once memory").add(function(){D.remove(e,
[f+"queue",g])})})}});p.fn.extend({queue:function(e,f){var g=2;return"string"!=typeof e&&(f=e,e="fx",g--),arguments.length<g?p.queue(this[0],e):void 0===f?this:this.each(function(){var g=p.queue(this,e,f);p._queueHooks(this,e);"fx"===e&&"inprogress"!==g[0]&&p.dequeue(this,e)})},dequeue:function(e){return this.each(function(){p.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,f){var g,m=1,j=p.Deferred(),l=this,r=this.length,n=function(){--m||j.resolveWith(l,
[l])};"string"!=typeof e&&(f=e,e=void 0);for(e=e||"fx";r--;)(g=D.get(l[r],e+"queueHooks"))&&g.empty&&(m++,g.empty.add(n));return n(),j.promise(f)}});var lc=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Qa=RegExp("^(?:([+-])=|)("+lc+")([a-z%]*)$","i"),ya=["Top","Right","Bottom","Left"],ab=function(e,f){return e=f||e,"none"===e.style.display||""===e.style.display&&p.contains(e.ownerDocument,e)&&"none"===p.css(e,"display")},mc=function(e,f,g,m){var j,l={};for(j in f)l[j]=e.style[j],e.style[j]=f[j];g=
g.apply(e,m||[]);for(j in f)e.style[j]=l[j];return g},Ob={};p.fn.extend({show:function(){return E(this,!0)},hide:function(){return E(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ab(this)?p(this).show():p(this).hide()})}});var nc=/^(?:checkbox|radio)$/i,Pb=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Qb=/^$|\/(?:java|ecma)script/i,ca={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],
tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ca.optgroup=ca.option;ca.tbody=ca.tfoot=ca.colgroup=ca.caption=ca.thead;ca.th=ca.td;var Hc=/<|&#?\w+;/,rb=B.createDocumentFragment().appendChild(B.createElement("div")),sb=B.createElement("input");sb.setAttribute("type","radio");sb.setAttribute("checked","checked");sb.setAttribute("name","t");rb.appendChild(sb);R.checkClone=rb.cloneNode(!0).cloneNode(!0).lastChild.checked;rb.innerHTML=
"<textarea>x</textarea>";R.noCloneChecked=!!rb.cloneNode(!0).lastChild.defaultValue;!0;var tb=B.documentElement,ld=/^key/,md=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,oc=/^([^.]*)(?:\.(.+)|)/;p.event={global:{},add:function(e,f,g,m,j){var l,r,n,t,q,u,v,s,A,x;if(q=D.get(e)){g.handler&&(l=g,g=l.handler,j=l.selector);j&&p.find.matchesSelector(tb,j);g.guid||(g.guid=p.guid++);(t=q.events)||(t=q.events={});(r=q.handle)||(r=q.handle=function(f){return"undefined"!=typeof p&&p.event.triggered!==f.type?
p.event.dispatch.apply(e,arguments):void 0});f=(f||"").match(ea)||[""];for(q=f.length;q--;)n=oc.exec(f[q])||[],A=x=n[1],n=(n[2]||"").split(".").sort(),A&&(v=p.event.special[A]||{},A=(j?v.delegateType:v.bindType)||A,v=p.event.special[A]||{},u=p.extend({type:A,origType:x,data:m,handler:g,guid:g.guid,selector:j,needsContext:j&&p.expr.match.needsContext.test(j),namespace:n.join(".")},l),(s=t[A])||(s=t[A]=[],s.delegateCount=0,v.setup&&!1!==v.setup.call(e,m,n,r)||e.addEventListener&&e.addEventListener(A,
r)),v.add&&(v.add.call(e,u),u.handler.guid||(u.handler.guid=g.guid)),j?s.splice(s.delegateCount++,0,u):s.push(u),p.event.global[A]=!0)}},remove:function(e,f,g,m,j){var l,r,n,t,q,u,v,s,A,x,K,O=D.hasData(e)&&D.get(e);if(O&&(t=O.events)){f=(f||"").match(ea)||[""];for(q=f.length;q--;)if(n=oc.exec(f[q])||[],A=K=n[1],x=(n[2]||"").split(".").sort(),A){v=p.event.special[A]||{};A=(m?v.delegateType:v.bindType)||A;s=t[A]||[];n=n[2]&&RegExp("(^|\\.)"+x.join("\\.(?:.*\\.|)")+"(\\.|$)");for(r=l=s.length;l--;)u=
s[l],!j&&K!==u.origType||g&&g.guid!==u.guid||n&&!n.test(u.namespace)||m&&m!==u.selector&&("**"!==m||!u.selector)||(s.splice(l,1),u.selector&&s.delegateCount--,v.remove&&v.remove.call(e,u));r&&!s.length&&(v.teardown&&!1!==v.teardown.call(e,x,O.handle)||p.removeEvent(e,A,O.handle),delete t[A])}else for(A in t)p.event.remove(e,A+f[q],g,m,!0);p.isEmptyObject(t)&&D.remove(e,"handle events")}},dispatch:function(e){var f=p.event.fix(e),g,m,j,l,r,n,t=Array(arguments.length);m=(D.get(this,"events")||{})[f.type]||
[];var q=p.event.special[f.type]||{};t[0]=f;for(g=1;g<arguments.length;g++)t[g]=arguments[g];if(f.delegateTarget=this,!q.preDispatch||!1!==q.preDispatch.call(this,f)){n=p.event.handlers.call(this,f,m);for(g=0;(l=n[g++])&&!f.isPropagationStopped();){f.currentTarget=l.elem;for(m=0;(r=l.handlers[m++])&&!f.isImmediatePropagationStopped();)f.rnamespace&&!f.rnamespace.test(r.namespace)||(f.handleObj=r,f.data=r.data,j=((p.event.special[r.origType]||{}).handle||r.handler).apply(l.elem,t),void 0!==j&&!1===
(f.result=j)&&(f.preventDefault(),f.stopPropagation()))}return q.postDispatch&&q.postDispatch.call(this,f),f.result}},handlers:function(e,f){var g,m,j,l,r,n=[],t=f.delegateCount,q=e.target;if(t&&q.nodeType&&!("click"===e.type&&1<=e.button))for(;q!==this;q=q.parentNode||this)if(1===q.nodeType&&("click"!==e.type||!0!==q.disabled)){l=[];r={};for(g=0;g<t;g++)m=f[g],j=m.selector+" ",void 0===r[j]&&(r[j]=m.needsContext?-1<p(j,this).index(q):p.find(j,this,null,[q]).length),r[j]&&l.push(m);l.length&&n.push({elem:q,
handlers:l})}return q=this,t<f.length&&n.push({elem:q,handlers:f.slice(t)}),n},addProp:function(e,f){Object.defineProperty(p.Event.prototype,e,{enumerable:!0,configurable:!0,get:p.isFunction(f)?function(){if(this.originalEvent)return f(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(f){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:f})}})},fix:function(e){return e[p.expando]?e:new p.Event(e)},special:{load:{noBubble:!0},
focus:{trigger:function(){if(this!==na()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===na()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&l(this,"input"))return this.click(),!1},_default:function(e){return l(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}};p.removeEvent=function(e,f,g){e.removeEventListener&&
e.removeEventListener(f,g)};p.Event=function(e,f){return this instanceof p.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?da:H,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,f&&p.extend(this,f),this.timeStamp=e&&e.timeStamp||p.now(),void(this[p.expando]=!0)):new p.Event(e,f)};p.Event.prototype=
{constructor:p.Event,isDefaultPrevented:H,isPropagationStopped:H,isImmediatePropagationStopped:H,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=da;e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=da;e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=da;e&&!this.isSimulated&&e.stopImmediatePropagation();
this.stopPropagation()}};p.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var f=e.button;return null==e.which&&ld.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==f&&md.test(e.type)?
1&f?1:2&f?3:4&f?2:0:e.which}},p.event.addProp);p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,f){p.event.special[e]={delegateType:f,bindType:f,handle:function(e){var g,m=e.relatedTarget,j=e.handleObj;return m&&(m===this||p.contains(this,m))||(e.type=j.origType,g=j.handler.apply(this,arguments),e.type=f),g}}});p.fn.extend({on:function(e,f,g,m){return ba(this,e,f,g,m)},one:function(e,f,g,m){return ba(this,e,f,g,m,1)},off:function(e,
f,g){var m,j;if(e&&e.preventDefault&&e.handleObj)return m=e.handleObj,p(e.delegateTarget).off(m.namespace?m.origType+"."+m.namespace:m.origType,m.selector,m.handler),this;if("object"==typeof e){for(j in e)this.off(j,f,e[j]);return this}return!1!==f&&"function"!=typeof f||(g=f,f=void 0),!1===g&&(g=H),this.each(function(){p.event.remove(this,e,g,f)})}});var nd=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,od=/<script|<style|<link/i,Jc=/checked\s*(?:[^=]|=\s*.checked.)/i,
Ic=/^true\/(.*)/,Lc=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;p.extend({htmlPrefilter:function(e){return e.replace(nd,"<$1></$2>")},clone:function(e,f,g){var m,j,l,r,n=e.cloneNode(!0),t=p.contains(e.ownerDocument,e);if(!R.noCloneChecked&&!(1!==e.nodeType&&11!==e.nodeType||p.isXMLDoc(e))){r=C(n);l=C(e);m=0;for(j=l.length;m<j;m++){var q=l[m],u=r[m],v=u.nodeName.toLowerCase();"input"===v&&nc.test(q.type)?u.checked=q.checked:"input"!==v&&"textarea"!==v||(u.defaultValue=q.defaultValue)}}if(f)if(g){l=
l||C(e);r=r||C(n);m=0;for(j=l.length;m<j;m++)Sa(l[m],r[m])}else Sa(e,n);return r=C(n,"script"),0<r.length&&G(r,!t&&C(e,"script")),n},cleanData:function(e){for(var f,g,m,j=p.event.special,l=0;void 0!==(g=e[l]);l++)if(qb(g)){if(f=g[D.expando]){if(f.events)for(m in f.events)j[m]?p.event.remove(g,m):p.removeEvent(g,m,f.handle);g[D.expando]=void 0}g[aa.expando]&&(g[aa.expando]=void 0)}}});p.fn.extend({detach:function(e){return Ta(this,e,!0)},remove:function(e){return Ta(this,e)},text:function(e){return ra(this,
function(e){return void 0===e?p.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return oa(this,arguments,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&Ga(this,e).appendChild(e)})},prepend:function(){return oa(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var f=Ga(this,e);f.insertBefore(e,f.firstChild)}})},before:function(){return oa(this,
arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return oa(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,f=0;null!=(e=this[f]);f++)1===e.nodeType&&(p.cleanData(C(e,!1)),e.textContent="");return this},clone:function(e,f){return e=null!=e&&e,f=null==f?e:f,this.map(function(){return p.clone(this,e,f)})},html:function(e){return ra(this,function(e){var f=this[0]||{},g=0,m=this.length;
if(void 0===e&&1===f.nodeType)return f.innerHTML;if("string"==typeof e&&!od.test(e)&&!ca[(Pb.exec(e)||["",""])[1].toLowerCase()]){e=p.htmlPrefilter(e);try{for(;g<m;g++)f=this[g]||{},1===f.nodeType&&(p.cleanData(C(f,!1)),f.innerHTML=e);f=0}catch(j){}}f&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return oa(this,arguments,function(f){var g=this.parentNode;0>p.inArray(this,e)&&(p.cleanData(C(this)),g&&g.replaceChild(f,this))},e)}});p.each({appendTo:"append",prependTo:"prepend",
insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,f){p.fn[e]=function(e){for(var g=[],m=p(e),j=m.length-1,l=0;l<=j;l++)e=l===j?this:this.clone(!0),p(m[l])[f](e),zb.apply(g,e.get());return this.pushStack(g)}});var Sb=/^margin/,wb=RegExp("^("+lc+")(?!px)[a-z%]+$","i"),cb=function(f){var g=f.ownerDocument.defaultView;return g&&g.opener||(g=e),g.getComputedStyle(f)},vb=function(){if(ja){ja.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";
ja.innerHTML="";tb.appendChild(ub);var f=e.getComputedStyle(ja);pc="1%"!==f.top;qc="2px"===f.marginLeft;rc="4px"===f.width;ja.style.marginRight="50%";sc="4px"===f.marginRight;tb.removeChild(ub);ja=null}},pc,rc,sc,qc,ub=B.createElement("div"),ja=B.createElement("div");ja.style&&(ja.style.backgroundClip="content-box",ja.cloneNode(!0).style.backgroundClip="",R.clearCloneStyle="content-box"===ja.style.backgroundClip,ub.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",
ub.appendChild(ja),p.extend(R,{pixelPosition:function(){return vb(),pc},boxSizingReliable:function(){return vb(),rc},pixelMarginRight:function(){return vb(),sc},reliableMarginLeft:function(){return vb(),qc}}));!0;var pd=/^(none|table(?!-c[ea]).+)/,tc=/^--/,qd={position:"absolute",visibility:"hidden",display:"block"},uc={letterSpacing:"0",fontWeight:"400"},Ub=["Webkit","Moz","ms"],Tb=B.createElement("div").style;p.extend({cssHooks:{opacity:{get:function(e,f){if(f){var g=sa(e,"opacity");return""===
g?"1":g}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,f,g,m){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var j,l,r,n=p.camelCase(f),t=tc.test(f),q=e.style;return t||(f=y(n)),r=p.cssHooks[f]||p.cssHooks[n],void 0===g?r&&"get"in r&&void 0!==(j=r.get(e,!1,m))?j:q[f]:(l=typeof g,"string"===l&&(j=Qa.exec(g))&&j[1]&&
(g=x(e,f,j),l="number"),null!=g&&g===g&&("number"===l&&(g+=j&&j[3]||(p.cssNumber[n]?"":"px")),R.clearCloneStyle||""!==g||0!==f.indexOf("background")||(q[f]="inherit"),r&&"set"in r&&void 0===(g=r.set(e,g,m))||(t?q.setProperty(f,g):q[f]=g)),void 0)}},css:function(e,f,g,m){var j,l,r,n=p.camelCase(f);return tc.test(f)||(f=y(n)),r=p.cssHooks[f]||p.cssHooks[n],r&&"get"in r&&(j=r.get(e,!0,g)),void 0===j&&(j=sa(e,f,m)),"normal"===j&&f in uc&&(j=uc[f]),""===g||g?(l=parseFloat(j),!0===g||isFinite(l)?l||0:j):
j}});p.each(["height","width"],function(e,f){p.cssHooks[f]={get:function(e,g,m){if(g)return!pd.test(p.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?db(e,f,m):mc(e,qd,function(){return db(e,f,m)})},set:function(e,g,m){var j,l=m&&cb(e);m=m&&xa(e,f,m,"border-box"===p.css(e,"boxSizing",!1,l),l);return m&&(j=Qa.exec(g))&&"px"!==(j[3]||"px")&&(e.style[f]=g,g=p.css(e,f)),Ua(e,g,m)}}});p.cssHooks.marginLeft=Ha(R.reliableMarginLeft,function(e,f){if(f)return(parseFloat(sa(e,
"marginLeft"))||e.getBoundingClientRect().left-mc(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"});p.each({margin:"",padding:"",border:"Width"},function(e,f){p.cssHooks[e+f]={expand:function(g){var m=0,j={};for(g="string"==typeof g?g.split(" "):[g];4>m;m++)j[e+ya[m]+f]=g[m]||g[m-2]||g[0];return j}};Sb.test(e)||(p.cssHooks[e+f].set=Ua)});p.fn.extend({css:function(e,f){return ra(this,function(e,f,g){var m,j={},l=0;if(Array.isArray(f)){g=cb(e);for(m=f.length;l<m;l++)j[f[l]]=
p.css(e,f[l],!1,g);return j}return void 0!==g?p.style(e,f,g):p.css(e,f)},e,f,1<arguments.length)}});p.Tween=U;U.prototype={constructor:U,init:function(e,f,g,m,j,l){this.elem=e;this.prop=g;this.easing=j||p.easing._default;this.options=f;this.start=this.now=this.cur();this.end=m;this.unit=l||(p.cssNumber[g]?"":"px")},cur:function(){var e=U.propHooks[this.prop];return e&&e.get?e.get(this):U.propHooks._default.get(this)},run:function(e){var f,g=U.propHooks[this.prop];return this.options.duration?this.pos=
f=p.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=f=e,this.now=(this.end-this.start)*f+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),g&&g.set?g.set(this):U.propHooks._default.set(this),this}};U.prototype.init.prototype=U.prototype;U.propHooks={_default:{get:function(e){var f;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(f=p.css(e.elem,e.prop,""),f&&"auto"!==f?f:0)},set:function(e){p.fx.step[e.prop]?
p.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[p.cssProps[e.prop]]&&!p.cssHooks[e.prop]?e.elem[e.prop]=e.now:p.style(e.elem,e.prop,e.now+e.unit)}}};U.propHooks.scrollTop=U.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}};p.easing={linear:function(e){return e},swing:function(e){return 0.5-Math.cos(e*Math.PI)/2},_default:"swing"};p.fx=U.prototype.init;p.fx.step={};var Ja,eb,rd=/^(?:toggle|show|hide)$/,sd=/queueHooks$/;p.Animation=p.extend(K,
{tweeners:{"*":[function(e,f){var g=this.createTween(e,f);return x(g.elem,e,Qa.exec(f),g),g}]},tweener:function(e,f){p.isFunction(e)?(f=e,e=["*"]):e=e.match(ea);for(var g,m=0,j=e.length;m<j;m++)g=e[m],K.tweeners[g]=K.tweeners[g]||[],K.tweeners[g].unshift(f)},prefilters:[function(e,f,g){var m,j,l,r,n,t,q,u,v="width"in f||"height"in f,s=this,x={},K=e.style,O=e.nodeType&&ab(e),Q=D.get(e,"fxshow");g.queue||(r=p._queueHooks(e,"fx"),null==r.unqueued&&(r.unqueued=0,n=r.empty.fire,r.empty.fire=function(){r.unqueued||
n()}),r.unqueued++,s.always(function(){s.always(function(){r.unqueued--;p.queue(e,"fx").length||r.empty.fire()})}));for(m in f)if(j=f[m],rd.test(j)){if(delete f[m],l=l||"toggle"===j,j===(O?"hide":"show")){if("show"!==j||!Q||void 0===Q[m])continue;O=!0}x[m]=Q&&Q[m]||p.style(e,m)}if(t=!p.isEmptyObject(f),t||!p.isEmptyObject(x))for(m in v&&1===e.nodeType&&(g.overflow=[K.overflow,K.overflowX,K.overflowY],q=Q&&Q.display,null==q&&(q=D.get(e,"display")),u=p.css(e,"display"),"none"===u&&(q?u=q:(E([e],!0),
q=e.style.display||q,u=p.css(e,"display"),E([e]))),("inline"===u||"inline-block"===u&&null!=q)&&"none"===p.css(e,"float")&&(t||(s.done(function(){K.display=q}),null==q&&(u=K.display,q="none"===u?"":u)),K.display="inline-block")),g.overflow&&(K.overflow="hidden",s.always(function(){K.overflow=g.overflow[0];K.overflowX=g.overflow[1];K.overflowY=g.overflow[2]})),t=!1,x)t||(Q?"hidden"in Q&&(O=Q.hidden):Q=D.access(e,"fxshow",{display:q}),l&&(Q.hidden=!O),O&&E([e],!0),s.done(function(){O||E([e]);D.remove(e,
"fxshow");for(m in x)p.style(e,m,x[m])})),t=A(O?Q[m]:0,m,s),m in Q||(Q[m]=t.start,O&&(t.end=t.start,t.start=0))}],prefilter:function(e,f){f?K.prefilters.unshift(e):K.prefilters.push(e)}});p.speed=function(e,f,g){var m=e&&"object"==typeof e?p.extend({},e):{complete:g||!g&&f||p.isFunction(e)&&e,duration:e,easing:g&&f||f&&!p.isFunction(f)&&f};return p.fx.off?m.duration=0:"number"!=typeof m.duration&&(m.duration in p.fx.speeds?m.duration=p.fx.speeds[m.duration]:m.duration=p.fx.speeds._default),null!=
m.queue&&!0!==m.queue||(m.queue="fx"),m.old=m.complete,m.complete=function(){p.isFunction(m.old)&&m.old.call(this);m.queue&&p.dequeue(this,m.queue)},m};p.fn.extend({fadeTo:function(e,f,g,m){return this.filter(ab).css("opacity",0).show().end().animate({opacity:f},e,g,m)},animate:function(e,f,g,m){var j=p.isEmptyObject(e),l=p.speed(f,g,m);f=function(){var f=K(this,p.extend({},e),l);(j||D.get(this,"finish"))&&f.stop(!0)};return f.finish=f,j||!1===l.queue?this.each(f):this.queue(l.queue,f)},stop:function(e,
f,g){var m=function(e){var f=e.stop;delete e.stop;f(g)};return"string"!=typeof e&&(g=f,f=e,e=void 0),f&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var f=!0,j=null!=e&&e+"queueHooks",l=p.timers,r=D.get(this);if(j)r[j]&&r[j].stop&&m(r[j]);else for(j in r)r[j]&&r[j].stop&&sd.test(j)&&m(r[j]);for(j=l.length;j--;)l[j].elem!==this||null!=e&&l[j].queue!==e||(l[j].anim.stop(g),f=!1,l.splice(j,1));!f&&g||p.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var f,
g=D.get(this),m=g[e+"queue"];f=g[e+"queueHooks"];var j=p.timers,l=m?m.length:0;g.finish=!0;p.queue(this,e,[]);f&&f.stop&&f.stop.call(this,!0);for(f=j.length;f--;)j[f].elem===this&&j[f].queue===e&&(j[f].anim.stop(!0),j.splice(f,1));for(f=0;f<l;f++)m[f]&&m[f].finish&&m[f].finish.call(this);delete g.finish})}});p.each(["toggle","show","hide"],function(e,f){var g=p.fn[f];p.fn[f]=function(e,m,j){return null==e||"boolean"==typeof e?g.apply(this,arguments):this.animate(Aa(f,!0),e,m,j)}});p.each({slideDown:Aa("show"),
slideUp:Aa("hide"),slideToggle:Aa("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,f){p.fn[e]=function(e,g,m){return this.animate(f,e,g,m)}});p.timers=[];p.fx.tick=function(){var e,f=0,g=p.timers;for(Ja=p.now();f<g.length;f++)e=g[f],e()||g[f]!==e||g.splice(f--,1);g.length||p.fx.stop();Ja=void 0};p.fx.timer=function(e){p.timers.push(e);p.fx.start()};p.fx.interval=13;p.fx.start=function(){eb||(eb=!0,za())};p.fx.stop=function(){eb=null};p.fx.speeds=
{slow:600,fast:200,_default:400};p.fn.delay=function(f,g){return f=p.fx?p.fx.speeds[f]||f:f,g=g||"fx",this.queue(g,function(g,m){var j=e.setTimeout(g,f);m.stop=function(){e.clearTimeout(j)}})};var Na=B.createElement("input"),td=B.createElement("select").appendChild(B.createElement("option"));Na.type="checkbox";R.checkOn=""!==Na.value;R.optSelected=td.selected;Na=B.createElement("input");Na.value="t";Na.type="radio";R.radioValue="t"===Na.value;var vc,Ya=p.expr.attrHandle;p.fn.extend({attr:function(e,
f){return ra(this,p.attr,e,f,1<arguments.length)},removeAttr:function(e){return this.each(function(){p.removeAttr(this,e)})}});p.extend({attr:function(e,f,g){var m,j,l=e.nodeType;if(3!==l&&8!==l&&2!==l)return"undefined"==typeof e.getAttribute?p.prop(e,f,g):(1===l&&p.isXMLDoc(e)||(j=p.attrHooks[f.toLowerCase()]||(p.expr.match.bool.test(f)?vc:void 0)),void 0!==g?null===g?void p.removeAttr(e,f):j&&"set"in j&&void 0!==(m=j.set(e,g,f))?m:(e.setAttribute(f,g+""),g):j&&"get"in j&&null!==(m=j.get(e,f))?m:
(m=p.find.attr(e,f),null==m?void 0:m))},attrHooks:{type:{set:function(e,f){if(!R.radioValue&&"radio"===f&&l(e,"input")){var g=e.value;return e.setAttribute("type",f),g&&(e.value=g),f}}}},removeAttr:function(e,f){var g,m=0,j=f&&f.match(ea);if(j&&1===e.nodeType)for(;g=j[m++];)e.removeAttribute(g)}});vc={set:function(e,f,g){return!1===f?p.removeAttr(e,g):e.setAttribute(g,g),g}};p.each(p.expr.match.bool.source.match(/\w+/g),function(e,f){var g=Ya[f]||p.find.attr;Ya[f]=function(e,f,m){var j,l,r=f.toLowerCase();
return m||(l=Ya[r],Ya[r]=j,j=null!=g(e,f,m)?r:null,Ya[r]=l),j}});var ud=/^(?:input|select|textarea|button)$/i,vd=/^(?:a|area)$/i;p.fn.extend({prop:function(e,f){return ra(this,p.prop,e,f,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[p.propFix[e]||e]})}});p.extend({prop:function(e,f,g){var m,j,l=e.nodeType;if(3!==l&&8!==l&&2!==l)return 1===l&&p.isXMLDoc(e)||(f=p.propFix[f]||f,j=p.propHooks[f]),void 0!==g?j&&"set"in j&&void 0!==(m=j.set(e,g,f))?m:e[f]=g:j&&"get"in
j&&null!==(m=j.get(e,f))?m:e[f]},propHooks:{tabIndex:{get:function(e){var f=p.find.attr(e,"tabindex");return f?parseInt(f,10):ud.test(e.nodeName)||vd.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});R.optSelected||(p.propHooks.selected={get:function(e){e=e.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(e){e=e.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}});p.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),
function(){p.propFix[this.toLowerCase()]=this});p.fn.extend({addClass:function(e){var f,g,m,j,l,r,n=0;if(p.isFunction(e))return this.each(function(f){p(this).addClass(e.call(this,f,Q(this)))});if("string"==typeof e&&e)for(f=e.match(ea)||[];g=this[n++];)if(j=Q(g),m=1===g.nodeType&&" "+O(j)+" "){for(r=0;l=f[r++];)0>m.indexOf(" "+l+" ")&&(m+=l+" ");m=O(m);j!==m&&g.setAttribute("class",m)}return this},removeClass:function(e){var f,g,m,j,l,r,n=0;if(p.isFunction(e))return this.each(function(f){p(this).removeClass(e.call(this,
f,Q(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(f=e.match(ea)||[];g=this[n++];)if(j=Q(g),m=1===g.nodeType&&" "+O(j)+" "){for(r=0;l=f[r++];)for(;-1<m.indexOf(" "+l+" ");)m=m.replace(" "+l+" "," ");m=O(m);j!==m&&g.setAttribute("class",m)}return this},toggleClass:function(e,f){var g=typeof e;return"boolean"==typeof f&&"string"===g?f?this.addClass(e):this.removeClass(e):p.isFunction(e)?this.each(function(g){p(this).toggleClass(e.call(this,g,Q(this),f),f)}):
this.each(function(){var f,m,j,l;if("string"===g){m=0;j=p(this);for(l=e.match(ea)||[];f=l[m++];)j.hasClass(f)?j.removeClass(f):j.addClass(f)}else void 0!==e&&"boolean"!==g||(f=Q(this),f&&D.set(this,"__className__",f),this.setAttribute&&this.setAttribute("class",f||!1===e?"":D.get(this,"__className__")||""))})},hasClass:function(e){var f,g=0;for(e=" "+e+" ";f=this[g++];)if(1===f.nodeType&&-1<(" "+O(Q(f))+" ").indexOf(e))return!0;return!1}});var wd=/\r/g;p.fn.extend({val:function(e){var f,g,m,j=this[0];
if(arguments.length)return m=p.isFunction(e),this.each(function(g){var j;1===this.nodeType&&(j=m?e.call(this,g,p(this).val()):e,null==j?j="":"number"==typeof j?j+="":Array.isArray(j)&&(j=p.map(j,function(e){return null==e?"":e+""})),f=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],f&&"set"in f&&void 0!==f.set(this,j,"value")||(this.value=j))});if(j)return f=p.valHooks[j.type]||p.valHooks[j.nodeName.toLowerCase()],f&&"get"in f&&void 0!==(g=f.get(j,"value"))?g:(g=j.value,"string"==typeof g?
g.replace(wd,""):null==g?"":g)}});p.extend({valHooks:{option:{get:function(e){var f=p.find.attr(e,"value");return null!=f?f:O(p.text(e))}},select:{get:function(e){var f,g,m=e.options,j=e.selectedIndex,r="select-one"===e.type,n=r?null:[],t=r?j+1:m.length;for(g=0>j?t:r?j:0;g<t;g++)if(f=m[g],(f.selected||g===j)&&!f.disabled&&(!f.parentNode.disabled||!l(f.parentNode,"optgroup"))){if(e=p(f).val(),r)return e;n.push(e)}return n},set:function(e,f){for(var g,m,j=e.options,l=p.makeArray(f),r=j.length;r--;)m=
j[r],(m.selected=-1<p.inArray(p.valHooks.option.get(m),l))&&(g=!0);return g||(e.selectedIndex=-1),l}}}});p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(e,f){if(Array.isArray(f))return e.checked=-1<p.inArray(p(e).val(),f)}};R.checkOn||(p.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var wc=/^(?:focusinfocus|focusoutblur)$/;p.extend(p.event,{trigger:function(f,g,m,j){var l,r,n,t,q,u,v,s=[m||B],A=gb.call(f,"type")?f.type:f;l=gb.call(f,"namespace")?
f.namespace.split("."):[];if(r=n=m=m||B,3!==m.nodeType&&8!==m.nodeType&&!wc.test(A+p.event.triggered)&&(-1<A.indexOf(".")&&(l=A.split("."),A=l.shift(),l.sort()),q=0>A.indexOf(":")&&"on"+A,f=f[p.expando]?f:new p.Event(A,"object"==typeof f&&f),f.isTrigger=j?2:3,f.namespace=l.join("."),f.rnamespace=f.namespace?RegExp("(^|\\.)"+l.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,f.result=void 0,f.target||(f.target=m),g=null==g?[f]:p.makeArray(g,[f]),v=p.event.special[A]||{},j||!v.trigger||!1!==v.trigger.apply(m,
g))){if(!j&&!v.noBubble&&!p.isWindow(m)){t=v.delegateType||A;for(wc.test(t+A)||(r=r.parentNode);r;r=r.parentNode)s.push(r),n=r;n===(m.ownerDocument||B)&&s.push(n.defaultView||n.parentWindow||e)}for(l=0;(r=s[l++])&&!f.isPropagationStopped();)f.type=1<l?t:v.bindType||A,(u=(D.get(r,"events")||{})[f.type]&&D.get(r,"handle"))&&u.apply(r,g),(u=q&&r[q])&&u.apply&&qb(r)&&(f.result=u.apply(r,g),!1===f.result&&f.preventDefault());return f.type=A,j||f.isDefaultPrevented()||v._default&&!1!==v._default.apply(s.pop(),
g)||!qb(m)||q&&p.isFunction(m[A])&&!p.isWindow(m)&&(n=m[q],n&&(m[q]=null),p.event.triggered=A,m[A](),p.event.triggered=void 0,n&&(m[q]=n)),f.result}},simulate:function(e,f,g){e=p.extend(new p.Event,g,{type:e,isSimulated:!0});p.event.trigger(e,null,f)}});p.fn.extend({trigger:function(e,f){return this.each(function(){p.event.trigger(e,f,this)})},triggerHandler:function(e,f){var g=this[0];if(g)return p.event.trigger(e,f,g,!0)}});p.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),
function(e,f){p.fn[f]=function(e,g){return 0<arguments.length?this.on(f,null,e,g):this.trigger(f)}});p.fn.extend({hover:function(e,f){return this.mouseenter(e).mouseleave(f||e)}});R.focusin="onfocusin"in e;R.focusin||p.each({focus:"focusin",blur:"focusout"},function(e,f){var g=function(e){p.event.simulate(f,e.target,p.event.fix(e))};p.event.special[f]={setup:function(){var m=this.ownerDocument||this,j=D.access(m,f);j||m.addEventListener(e,g,!0);D.access(m,f,(j||0)+1)},teardown:function(){var m=this.ownerDocument||
this,j=D.access(m,f)-1;j?D.access(m,f,j):(m.removeEventListener(e,g,!0),D.remove(m,f))}}});var Za=e.location,xc=p.now(),Lb=/\?/;p.parseXML=function(f){var g;if(!f||"string"!=typeof f)return null;try{g=(new e.DOMParser).parseFromString(f,"text/xml")}catch(m){g=void 0}return g&&!g.getElementsByTagName("parsererror").length||p.error("Invalid XML: "+f),g};var Mc=/\[\]$/,yc=/\r?\n/g,xd=/^(?:submit|button|image|reset|file)$/i,yd=/^(?:input|select|textarea|keygen)/i;p.param=function(e,f){var g,m=[],j=function(e,
f){var g=p.isFunction(f)?f():f;m[m.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==g?"":g)};if(Array.isArray(e)||e.jquery&&!p.isPlainObject(e))p.each(e,function(){j(this.name,this.value)});else for(g in e)W(g,e[g],f,j);return m.join("&")};p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=p.prop(this,"elements");return e?p.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!p(this).is(":disabled")&&
yd.test(this.nodeName)&&!xd.test(e)&&(this.checked||!nc.test(e))}).map(function(e,f){var g=p(this).val();return null==g?null:Array.isArray(g)?p.map(g,function(e){return{name:f.name,value:e.replace(yc,"\r\n")}}):{name:f.name,value:g.replace(yc,"\r\n")}}).get()}});var zd=/%20/g,Ad=/#.*$/,Bd=/([?&])_=[^&]*/,Cd=/^(.*?):[ \t]*([^\r\n]*)$/gm,Dd=/^(?:GET|HEAD)$/,Ed=/^\/\//,zc={},xb={},Ac="*/".concat("*"),Mb=B.createElement("a");Mb.href=Za.href;p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Za.href,
type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Za.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ac,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,
"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,f){return f?X(X(e,p.ajaxSettings),f):X(p.ajaxSettings,e)},ajaxPrefilter:V(zc),ajaxTransport:V(xb),ajax:function(f,g){function m(f,g,n,q){var s,A,z,F,V=g;if(!u){u=!0;t&&e.clearTimeout(t);j=void 0;r=q||"";I.readyState=0<f?4:0;q=200<=f&&300>f||304===f;if(n){z=x;for(var W=I,Z,L,X,B,C=z.contents,ma=z.dataTypes;"*"===ma[0];)ma.shift(),void 0===Z&&(Z=z.mimeType||W.getResponseHeader("Content-Type"));if(Z)for(L in C)if(C[L]&&C[L].test(Z)){ma.unshift(L);
break}if(ma[0]in n)X=ma[0];else{for(L in n){if(!ma[0]||z.converters[L+" "+ma[0]]){X=L;break}B||(B=L)}X=X||B}z=n=X?(X!==ma[0]&&ma.unshift(X),n[X]):void 0}var D;a:{n=x;Z=z;L=I;X=q;var G,J,H;z={};W=n.dataTypes.slice();if(W[1])for(G in n.converters)z[G.toLowerCase()]=n.converters[G];for(B=W.shift();B;)if(n.responseFields[B]&&(L[n.responseFields[B]]=Z),!H&&X&&n.dataFilter&&(Z=n.dataFilter(Z,n.dataType)),H=B,B=W.shift())if("*"===B)B=H;else if("*"!==H&&H!==B){if(G=z[H+" "+B]||z["* "+B],!G)for(D in z)if(J=
D.split(" "),J[1]===B&&(G=z[H+" "+J[0]]||z["* "+J[0]])){!0===G?G=z[D]:!0!==z[D]&&(B=J[0],W.unshift(J[1]));break}if(!0!==G)if(G&&n["throws"])Z=G(Z);else try{Z=G(Z)}catch(yb){D={state:"parsererror",error:G?yb:"No conversion from "+H+" to "+B};break a}}D={state:"success",data:Z}}z=D;q?(x.ifModified&&(F=I.getResponseHeader("Last-Modified"),F&&(p.lastModified[l]=F),F=I.getResponseHeader("etag"),F&&(p.etag[l]=F)),204===f||"HEAD"===x.type?V="nocontent":304===f?V="notmodified":(V=z.state,s=z.data,A=z.error,
q=!A)):(A=V,!f&&V||(V="error",0>f&&(f=0)));I.status=f;I.statusText=(g||V)+"";q?Q.resolveWith(K,[s,V,I]):Q.rejectWith(K,[I,V,A]);I.statusCode(y);y=void 0;v&&O.trigger(q?"ajaxSuccess":"ajaxError",[I,x,q?s:A]);E.fireWith(K,[I,V]);v&&(O.trigger("ajaxComplete",[I,x]),--p.active||p.event.trigger("ajaxStop"))}}"object"==typeof f&&(g=f,f=void 0);g=g||{};var j,l,r,n,t,q,u,v,s,A,x=p.ajaxSetup({},g),K=x.context||x,O=x.context&&(K.nodeType||K.jquery)?p(K):p.event,Q=p.Deferred(),E=p.Callbacks("once memory"),y=
x.statusCode||{},V={},W={},X="canceled",I={readyState:0,getResponseHeader:function(e){var f;if(u){if(!n)for(n={};f=Cd.exec(r);)n[f[1].toLowerCase()]=f[2];f=n[e.toLowerCase()]}return null==f?null:f},getAllResponseHeaders:function(){return u?r:null},setRequestHeader:function(e,f){return null==u&&(e=W[e.toLowerCase()]=W[e.toLowerCase()]||e,V[e]=f),this},overrideMimeType:function(e){return null==u&&(x.mimeType=e),this},statusCode:function(e){var f;if(e)if(u)I.always(e[I.status]);else for(f in e)y[f]=
[y[f],e[f]];return this},abort:function(e){e=e||X;return j&&j.abort(e),m(0,e),this}};if(Q.promise(I),x.url=((f||x.url||Za.href)+"").replace(Ed,Za.protocol+"//"),x.type=g.method||g.type||x.method||x.type,x.dataTypes=(x.dataType||"*").toLowerCase().match(ea)||[""],null==x.crossDomain){q=B.createElement("a");try{q.href=x.url,q.href=q.href,x.crossDomain=Mb.protocol+"//"+Mb.host!=q.protocol+"//"+q.host}catch(C){x.crossDomain=!0}}if(x.data&&x.processData&&"string"!=typeof x.data&&(x.data=p.param(x.data,
x.traditional)),Z(zc,x,g,I),u)return I;(v=p.event&&x.global)&&0===p.active++&&p.event.trigger("ajaxStart");x.type=x.type.toUpperCase();x.hasContent=!Dd.test(x.type);l=x.url.replace(Ad,"");x.hasContent?x.data&&x.processData&&0===(x.contentType||"").indexOf("application/x-www-form-urlencoded")&&(x.data=x.data.replace(zd,"+")):(A=x.url.slice(l.length),x.data&&(l+=(Lb.test(l)?"&":"?")+x.data,delete x.data),!1===x.cache&&(l=l.replace(Bd,"$1"),A=(Lb.test(l)?"&":"?")+"_="+xc++ +A),x.url=l+A);x.ifModified&&
(p.lastModified[l]&&I.setRequestHeader("If-Modified-Since",p.lastModified[l]),p.etag[l]&&I.setRequestHeader("If-None-Match",p.etag[l]));(x.data&&x.hasContent&&!1!==x.contentType||g.contentType)&&I.setRequestHeader("Content-Type",x.contentType);I.setRequestHeader("Accept",x.dataTypes[0]&&x.accepts[x.dataTypes[0]]?x.accepts[x.dataTypes[0]]+("*"!==x.dataTypes[0]?", "+Ac+"; q=0.01":""):x.accepts["*"]);for(s in x.headers)I.setRequestHeader(s,x.headers[s]);if(x.beforeSend&&(!1===x.beforeSend.call(K,I,x)||
u))return I.abort();if(X="abort",E.add(x.complete),I.done(x.success),I.fail(x.error),j=Z(xb,x,g,I)){if(I.readyState=1,v&&O.trigger("ajaxSend",[I,x]),u)return I;x.async&&0<x.timeout&&(t=e.setTimeout(function(){I.abort("timeout")},x.timeout));try{u=!1,j.send(V,m)}catch(D){if(u)throw D;m(-1,D)}}else m(-1,"No Transport");return I},getJSON:function(e,f,g){return p.get(e,f,g,"json")},getScript:function(e,f){return p.get(e,void 0,f,"script")}});p.each(["get","post"],function(e,f){p[f]=function(e,g,m,j){return p.isFunction(g)&&
(j=j||m,m=g,g=void 0),p.ajax(p.extend({url:e,type:f,dataType:j,data:g,success:m},p.isPlainObject(e)&&e))}});p._evalUrl=function(e){return p.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})};p.fn.extend({wrapAll:function(e){var f;return this[0]&&(p.isFunction(e)&&(e=e.call(this[0])),f=p(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&f.insertBefore(this[0]),f.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),
this},wrapInner:function(e){return p.isFunction(e)?this.each(function(f){p(this).wrapInner(e.call(this,f))}):this.each(function(){var f=p(this),g=f.contents();g.length?g.wrapAll(e):f.append(e)})},wrap:function(e){var f=p.isFunction(e);return this.each(function(g){p(this).wrapAll(f?e.call(this,g):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){p(this).replaceWith(this.childNodes)}),this}});p.expr.pseudos.hidden=function(e){return!p.expr.pseudos.visible(e)};p.expr.pseudos.visible=
function(e){return!(!e.offsetWidth&&!e.offsetHeight&&!e.getClientRects().length)};p.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(f){}};var Fd={"0":200,1223:204},$a=p.ajaxSettings.xhr();R.cors=!!$a&&"withCredentials"in $a;R.ajax=$a=!!$a;p.ajaxTransport(function(f){var g,m;if(R.cors||$a&&!f.crossDomain)return{send:function(j,l){var r,p=f.xhr();if(p.open(f.type,f.url,f.async,f.username,f.password),f.xhrFields)for(r in f.xhrFields)p[r]=f.xhrFields[r];f.mimeType&&p.overrideMimeType&&
p.overrideMimeType(f.mimeType);f.crossDomain||j["X-Requested-With"]||(j["X-Requested-With"]="XMLHttpRequest");for(r in j)p.setRequestHeader(r,j[r]);g=function(e){return function(){g&&(g=m=p.onload=p.onerror=p.onabort=p.onreadystatechange=null,"abort"===e?p.abort():"error"===e?"number"!=typeof p.status?l(0,"error"):l(p.status,p.statusText):l(Fd[p.status]||p.status,p.statusText,"text"!==(p.responseType||"text")||"string"!=typeof p.responseText?{binary:p.response}:{text:p.responseText},p.getAllResponseHeaders()))}};
p.onload=g();m=p.onerror=g("error");void 0!==p.onabort?p.onabort=m:p.onreadystatechange=function(){4===p.readyState&&e.setTimeout(function(){g&&m()})};g=g("abort");try{p.send(f.hasContent&&f.data||null)}catch(n){if(g)throw n;}},abort:function(){g&&g()}}});p.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)});p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return p.globalEval(e),
e}}});p.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1);e.crossDomain&&(e.type="GET")});p.ajaxTransport("script",function(e){if(e.crossDomain){var f,g;return{send:function(m,j){f=p("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",g=function(e){f.remove();g=null;e&&j("error"===e.type?404:200,e.type)});B.head.appendChild(f[0])},abort:function(){g&&g()}}}});var Bc=[],Nb=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Bc.pop()||p.expando+
"_"+xc++;return this[e]=!0,e}});p.ajaxPrefilter("json jsonp",function(f,g,m){var j,l,r,n=!1!==f.jsonp&&(Nb.test(f.url)?"url":"string"==typeof f.data&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&Nb.test(f.data)&&"data");if(n||"jsonp"===f.dataTypes[0])return j=f.jsonpCallback=p.isFunction(f.jsonpCallback)?f.jsonpCallback():f.jsonpCallback,n?f[n]=f[n].replace(Nb,"$1"+j):!1!==f.jsonp&&(f.url+=(Lb.test(f.url)?"&":"?")+f.jsonp+"="+j),f.converters["script json"]=function(){return r||
p.error(j+" was not called"),r[0]},f.dataTypes[0]="json",l=e[j],e[j]=function(){r=arguments},m.always(function(){void 0===l?p(e).removeProp(j):e[j]=l;f[j]&&(f.jsonpCallback=g.jsonpCallback,Bc.push(j));r&&p.isFunction(l)&&l(r[0]);r=l=void 0}),"script"});var Gd=R,Cc,Dc=B.implementation.createHTMLDocument("").body;Cc=(Dc.innerHTML="<form></form><form></form>",2===Dc.childNodes.length);Gd.createHTMLDocument=Cc;p.parseHTML=function(e,f,g){if("string"!=typeof e)return[];"boolean"==typeof f&&(g=f,f=!1);
var m,j,l;return f||(R.createHTMLDocument?(f=B.implementation.createHTMLDocument(""),m=f.createElement("base"),m.href=B.location.href,f.head.appendChild(m)):f=B),j=jc.exec(e),l=!g&&[],j?[f.createElement(j[1])]:(j=N([e],f,l),l&&l.length&&p(l).remove(),p.merge([],j.childNodes))};p.fn.load=function(e,f,g){var m,j,l,r=this,n=e.indexOf(" ");return-1<n&&(m=O(e.slice(n)),e=e.slice(0,n)),p.isFunction(f)?(g=f,f=void 0):f&&"object"==typeof f&&(j="POST"),0<r.length&&p.ajax({url:e,type:j||"GET",dataType:"html",
data:f}).done(function(e){l=arguments;r.html(m?p("<div>").append(p.parseHTML(e)).find(m):e)}).always(g&&function(e,f){r.each(function(){g.apply(this,l||[e.responseText,f,e])})}),this};p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,f){p.fn[f]=function(e){return this.on(f,e)}});p.expr.pseudos.animated=function(e){return p.grep(p.timers,function(f){return e===f.elem}).length};p.offset={setOffset:function(e,f,g){var m,j,l,r,n,q,t=p.css(e,"position"),u=p(e),
v={};"static"===t&&(e.style.position="relative");n=u.offset();l=p.css(e,"top");q=p.css(e,"left");("absolute"===t||"fixed"===t)&&-1<(l+q).indexOf("auto")?(m=u.position(),r=m.top,j=m.left):(r=parseFloat(l)||0,j=parseFloat(q)||0);p.isFunction(f)&&(f=f.call(e,g,p.extend({},n)));null!=f.top&&(v.top=f.top-n.top+r);null!=f.left&&(v.left=f.left-n.left+j);"using"in f?f.using.call(e,v):u.css(v)}};p.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(f){p.offset.setOffset(this,
e,f)});var f,g,m,j,l=this[0];if(l)return l.getClientRects().length?(m=l.getBoundingClientRect(),f=l.ownerDocument,g=f.documentElement,j=f.defaultView,{top:m.top+j.pageYOffset-g.clientTop,left:m.left+j.pageXOffset-g.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var e,f,g=this[0],m={top:0,left:0};return"fixed"===p.css(g,"position")?f=g.getBoundingClientRect():(e=this.offsetParent(),f=this.offset(),l(e[0],"html")||(m=e.offset()),m={top:m.top+p.css(e[0],"borderTopWidth",!0),left:m.left+
p.css(e[0],"borderLeftWidth",!0)}),{top:f.top-m.top-p.css(g,"marginTop",!0),left:f.left-m.left-p.css(g,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===p.css(e,"position");)e=e.offsetParent;return e||tb})}});p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,f){var g="pageYOffset"===f;p.fn[e]=function(m){return ra(this,function(e,m,j){var l;return p.isWindow(e)?l=e:9===e.nodeType&&(l=e.defaultView),void 0===j?l?l[f]:
e[m]:void(l?l.scrollTo(g?l.pageXOffset:j,g?j:l.pageYOffset):e[m]=j)},e,m,arguments.length)}});p.each(["top","left"],function(e,f){p.cssHooks[f]=Ha(R.pixelPosition,function(e,g){if(g)return g=sa(e,f),wb.test(g)?p(e).position()[f]+"px":g})});p.each({Height:"height",Width:"width"},function(e,f){p.each({padding:"inner"+e,content:f,"":"outer"+e},function(g,m){p.fn[m]=function(j,l){var r=arguments.length&&(g||"boolean"!=typeof j),n=g||(!0===j||!0===l?"margin":"border");return ra(this,function(f,g,j){var l;
return p.isWindow(f)?0===m.indexOf("outer")?f["inner"+e]:f.document.documentElement["client"+e]:9===f.nodeType?(l=f.documentElement,Math.max(f.body["scroll"+e],l["scroll"+e],f.body["offset"+e],l["offset"+e],l["client"+e])):void 0===j?p.css(f,g,n):p.style(f,g,j,n)},f,r?j:void 0,r)}})});p.fn.extend({bind:function(e,f,g){return this.on(e,null,f,g)},unbind:function(e,f){return this.off(e,null,f)},delegate:function(e,f,g,m){return this.on(f,e,g,m)},undelegate:function(e,f,g){return 1===arguments.length?
this.off(e,"**"):this.off(f,e||"**",g)}});p.holdReady=function(e){e?p.readyWait++:p.ready(!0)};p.isArray=Array.isArray;p.parseJSON=JSON.parse;p.nodeName=l;"function"==typeof define&&define.amd&&define("jquery",[],function(){return p});var Hd=e.jQuery,Id=e.$;return p.noConflict=function(f){return e.$===p&&(e.$=Id),f&&e.jQuery===p&&(e.jQuery=Hd),p},f||(e.jQuery=e.$=p),p});
function getInternetExplorerVersion(){var e=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(e=parseFloat(RegExp.$1));return e}var ie=getInternetExplorerVersion();function getQueryVariable(e){for(var f=window.location.search.substring(1).split("&"),g=0;g<f.length;g++){var j=f[g].split("=");if(decodeURIComponent(j[0])==e)return decodeURIComponent(j[1])}}this.jukebox={};
jukebox.Player=function(e,f){this.id=++jukebox.__jukeboxId;this.origin=f||null;this.settings={};for(var g in this.defaults)this.settings[g]=this.defaults[g];if("[object Object]"===Object.prototype.toString.call(e))for(var j in e)this.settings[j]=e[j];"[object Function]"===Object.prototype.toString.call(jukebox.Manager)&&(jukebox.Manager=new jukebox.Manager);this.resource=this.isPlaying=null;this.resource="[object Object]"===Object.prototype.toString.call(jukebox.Manager)?jukebox.Manager.getPlayableResource(this.settings.resources):
this.settings.resources[0]||null;if(null===this.resource)throw"Your browser can't playback the given resources - or you have missed to include jukebox.Manager";this.__init();return this};jukebox.__jukeboxId=0;
jukebox.Player.prototype={defaults:{resources:[],autoplay:!1,spritemap:{},flashMediaElement:"./swf/FlashMediaElement.swf",timeout:1E3},__addToManager:function(){!0!==this.__wasAddedToManager&&(jukebox.Manager.add(this),this.__wasAddedToManager=!0)},__init:function(){var e=this,f=this.settings,g={},j;jukebox.Manager&&void 0!==jukebox.Manager.features&&(g=jukebox.Manager.features);if(!0===g.html5audio){this.context=new Audio;this.context.src=this.resource;if(null===this.origin){var l=function(f){e.__addToManager(f)};
this.context.addEventListener("canplaythrough",l,!0);window.setTimeout(function(){e.context.removeEventListener("canplaythrough",l,!0);l("timeout")},f.timeout)}this.context.autobuffer=!0;this.context.preload=!0;for(j in this.HTML5API)this[j]=this.HTML5API[j];1<g.channels?!0===f.autoplay?this.context.autoplay=!0:void 0!==f.spritemap[f.autoplay]&&this.play(f.autoplay):1===g.channels&&void 0!==f.spritemap[f.autoplay]&&(this.backgroundMusic=f.spritemap[f.autoplay],this.backgroundMusic.started=Date.now?
Date.now():+new Date,this.play(f.autoplay));1==g.channels&&!0!==f.canPlayBackground&&(window.addEventListener("pagehide",function(){null!==e.isPlaying&&(e.pause(),e.__wasAutoPaused=!0)}),window.addEventListener("pageshow",function(){e.__wasAutoPaused&&(e.resume(),delete e._wasAutoPaused)}))}else if(!0===g.flashaudio){for(j in this.FLASHAPI)this[j]=this.FLASHAPI[j];g=["id=jukebox-flashstream-"+this.id,"autoplay="+f.autoplay,"file="+window.encodeURIComponent(this.resource)];this.__initFlashContext(g);
!0===f.autoplay?this.play(0):f.spritemap[f.autoplay]&&this.play(f.autoplay)}else throw"Your Browser does not support Flash Audio or HTML5 Audio.";},__initFlashContext:function(e){var f,g=this.settings.flashMediaElement,j,l={flashvars:e.join("&"),quality:"high",bgcolor:"#000000",wmode:"transparent",allowscriptaccess:"always",allowfullscreen:"true"};if(navigator.userAgent.match(/MSIE/)){f=document.createElement("div");document.getElementsByTagName("body")[0].appendChild(f);var n=document.createElement("object");
n.id="jukebox-flashstream-"+this.id;n.setAttribute("type","application/x-shockwave-flash");n.setAttribute("classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000");n.setAttribute("width","0");n.setAttribute("height","0");l.movie=g+"?x="+(Date.now?Date.now():+new Date);l.flashvars=e.join("&amp;");for(j in l)e=document.createElement("param"),e.setAttribute("name",j),e.setAttribute("value",l[j]),n.appendChild(e);f.outerHTML=n.outerHTML;this.context=document.getElementById("jukebox-flashstream-"+this.id)}else{f=
document.createElement("embed");f.id="jukebox-flashstream-"+this.id;f.setAttribute("type","application/x-shockwave-flash");f.setAttribute("width","100");f.setAttribute("height","100");l.play=!1;l.loop=!1;l.src=g+"?x="+(Date.now?Date.now():+new Date);for(j in l)f.setAttribute(j,l[j]);document.getElementsByTagName("body")[0].appendChild(f);this.context=f}},backgroundHackForiOS:function(){if(void 0!==this.backgroundMusic){var e=Date.now?Date.now():+new Date;void 0===this.backgroundMusic.started?(this.backgroundMusic.started=
e,this.setCurrentTime(this.backgroundMusic.start)):(this.backgroundMusic.lastPointer=(e-this.backgroundMusic.started)/1E3%(this.backgroundMusic.end-this.backgroundMusic.start)+this.backgroundMusic.start,this.play(this.backgroundMusic.lastPointer))}},play:function(e,f){if(null!==this.isPlaying&&!0!==f)void 0!==jukebox.Manager&&jukebox.Manager.addToQueue(e,this.id);else{var g=this.settings.spritemap,j;if(void 0!==g[e])j=g[e].start;else if("number"===typeof e){j=e;for(var l in g)if(j>=g[l].start&&j<=
g[l].end){e=l;break}}void 0!==j&&"[object Object]"===Object.prototype.toString.call(g[e])&&(this.isPlaying=this.settings.spritemap[e],this.context.play&&this.context.play(),this.wasReady=this.setCurrentTime(j))}},stop:function(){this.__lastPosition=0;this.isPlaying=null;this.backgroundMusic?this.backgroundHackForiOS():this.context.pause();return!0},pause:function(){this.isPlaying=null;this.__lastPosition=this.getCurrentTime();this.context.pause();return this.__lastPosition},resume:function(e){e="number"===
typeof e?e:this.__lastPosition;if(null!==e)return this.play(e),this.__lastPosition=null,!0;this.context.play();return!1},HTML5API:{getVolume:function(){return this.context.volume||1},setVolume:function(e){this.context.volume=e;return 1E-4>Math.abs(this.context.volume-e)?!0:!1},getCurrentTime:function(){return this.context.currentTime||0},setCurrentTime:function(e){try{return this.context.currentTime=e,!0}catch(f){return!1}}},FLASHAPI:{getVolume:function(){return this.context&&"function"===typeof this.context.getVolume?
this.context.getVolume():1},setVolume:function(e){return this.context&&"function"===typeof this.context.setVolume?(this.context.setVolume(e),!0):!1},getCurrentTime:function(){return this.context&&"function"===typeof this.context.getCurrentTime?this.context.getCurrentTime():0},setCurrentTime:function(e){return this.context&&"function"===typeof this.context.setCurrentTime?this.context.setCurrentTime(e):!1}}};
if(void 0===this.jukebox)throw"jukebox.Manager requires jukebox.Player (Player.js) to run properly.";
jukebox.Manager=function(e){this.features={};this.codecs={};this.__players={};this.__playersLength=0;this.__clones={};this.__queue=[];this.settings={};for(var f in this.defaults)this.settings[f]=this.defaults[f];if("[object Object]"===Object.prototype.toString.call(e))for(var g in e)this.settings[g]=e[g];this.__detectFeatures();jukebox.Manager.__initialized=!1===this.settings.useGameLoop?window.setInterval(function(){jukebox.Manager.loop()},20):!0};
jukebox.Manager.prototype={defaults:{useFlash:!1,useGameLoop:!1},__detectFeatures:function(){var e=window.Audio&&new Audio;if(e&&e.canPlayType&&!1===this.settings.useFlash){for(var f=[{e:"3gp",m:["audio/3gpp","audio/amr"]},{e:"aac",m:["audio/aac","audio/aacp"]},{e:"amr",m:["audio/amr","audio/3gpp"]},{e:"caf",m:["audio/IMA-ADPCM","audio/x-adpcm",'audio/x-aiff; codecs="IMA-ADPCM, ADPCM"']},{e:"m4a",m:'audio/mp4{audio/mp4; codecs="mp4a.40.2,avc1.42E01E"{audio/mpeg4{audio/mpeg4-generic{audio/mp4a-latm{audio/MP4A-LATM{audio/x-m4a'.split("{")},
{e:"mp3",m:["audio/mp3","audio/mpeg",'audio/mpeg; codecs="mp3"',"audio/MPA","audio/mpa-robust"]},{e:"mpga",m:["audio/MPA","audio/mpa-robust","audio/mpeg","video/mpeg"]},{e:"mp4",m:["audio/mp4","video/mp4"]},{e:"ogg",m:["application/ogg","audio/ogg",'audio/ogg; codecs="theora, vorbis"',"video/ogg",'video/ogg; codecs="theora, vorbis"']},{e:"wav",m:["audio/wave","audio/wav",'audio/wav; codecs="1"',"audio/x-wav","audio/x-pn-wav"]},{e:"webm",m:["audio/webm",'audio/webm; codecs="vorbis"',"video/webm"]}],
g,j,l=0,n=f.length;l<n;l++)if(j=f[l].e,f[l].m.length&&"object"===typeof f[l].m)for(var s=0,q=f[l].m.length;s<q;s++)if(g=f[l].m[s],""!==e.canPlayType(g)){this.codecs[j]=g;break}else this.codecs[j]||(this.codecs[j]=!1);this.features.html5audio=!(!this.codecs.mp3&&!this.codecs.ogg&&!this.codecs.webm&&!this.codecs.wav);this.features.channels=8;e.volume=0.1337;this.features.volume=!!(1E-4>Math.abs(e.volume-0.1337));navigator.userAgent.match(/iPhone|iPod|iPad/i)&&(this.features.channels=1)}this.features.flashaudio=
!!navigator.mimeTypes["application/x-shockwave-flash"]||!!navigator.plugins["Shockwave Flash"]||!1;if(window.ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash.10"),this.features.flashaudio=!0}catch(m){}!0===this.settings.useFlash&&(this.features.flashaudio=!0);!0===this.features.flashaudio&&!this.features.html5audio&&(this.codecs.mp3="audio/mp3",this.codecs.mpga="audio/mpeg",this.codecs.mp4="audio/mp4",this.codecs.m4a="audio/mp4",this.codecs["3gp"]="audio/3gpp",this.codecs.amr="audio/amr",
this.features.volume=!0,this.features.channels=1)},__getPlayerById:function(e){return this.__players&&void 0!==this.__players[e]?this.__players[e]:null},__getClone:function(e,f){for(var g in this.__clones){var j=this.__clones[g];if(null===j.isPlaying&&j.origin===e)return j}if("[object Object]"===Object.prototype.toString.call(f)){g={};for(var l in f)g[l]=f[l];g.autoplay=!1;l=new jukebox.Player(g,e);l.isClone=!0;l.wasReady=!1;return this.__clones[l.id]=l}return null},loop:function(){if(0!==this.__playersLength)if(this.__queue.length&&
this.__playersLength<this.features.channels){var e=this.__queue[0],f=this.__getPlayerById(e.origin);if(null!==f){var g=this.__getClone(e.origin,f.settings);null!==g&&(!0===this.features.volume&&(f=this.__players[e.origin])&&g.setVolume(f.getVolume()),this.add(g),g.play(e.pointer,!0))}this.__queue.splice(0,1)}else for(g in this.__queue.length&&1===this.features.channels&&(e=this.__queue[0],f=this.__getPlayerById(e.origin),null!==f&&f.play(e.pointer,!0),this.__queue.splice(0,1)),this.__players)e=this.__players[g],
f=e.getCurrentTime()||0,e.isPlaying&&!1===e.wasReady?e.wasReady=e.setCurrentTime(e.isPlaying.start):e.isPlaying&&!0===e.wasReady?f>e.isPlaying.end&&(!0===e.isPlaying.loop?e.play(e.isPlaying.start,!0):e.stop()):e.isClone&&null===e.isPlaying?this.remove(e):void 0!==e.backgroundMusic&&null===e.isPlaying&&f>e.backgroundMusic.end&&e.backgroundHackForiOS()},getPlayableResource:function(e){"[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]);for(var f=0,g=e.length;f<g;f++){var j=e[f],l=j.match(/\.([^\.]*)$/)[1];
if(l&&this.codecs[l])return j}return null},add:function(e){return e instanceof jukebox.Player&&void 0===this.__players[e.id]?(this.__playersLength++,this.__players[e.id]=e,!0):!1},remove:function(e){return e instanceof jukebox.Player&&void 0!==this.__players[e.id]?(this.__playersLength--,delete this.__players[e.id],!0):!1},addToQueue:function(e,f){return("string"===typeof e||"number"===typeof e)&&void 0!==this.__players[f]?(this.__queue.push({pointer:e,origin:f}),!0):!1}};
(function(){var e=function(){this.init()};e.prototype={init:function(){var e=this||f;e._counter=1E3;e._codecs={};e._howls=[];e._muted=!1;e._volume=1;e._canPlayEvent="canplaythrough";e._navigator="undefined"!==typeof window&&window.navigator?window.navigator:null;e.masterGain=null;e.noAudio=!1;e.usingWebAudio=!0;e.autoSuspend=!0;e.ctx=null;e.mobileAutoEnable=!0;e._setup();return e},volume:function(e){var g=this||f;e=parseFloat(e);g.ctx||q();if("undefined"!==typeof e&&0<=e&&1>=e){g._volume=e;if(g._muted)return g;
g.usingWebAudio&&g.masterGain.gain.setValueAtTime(e,f.ctx.currentTime);for(var j=0;j<g._howls.length;j++)if(!g._howls[j]._webAudio)for(var l=g._howls[j]._getSoundIds(),n=0;n<l.length;n++){var s=g._howls[j]._soundById(l[n]);s&&s._node&&(s._node.volume=s._volume*e)}return g}return g._volume},mute:function(e){var g=this||f;g.ctx||q();g._muted=e;g.usingWebAudio&&g.masterGain.gain.setValueAtTime(e?0:g._volume,f.ctx.currentTime);for(var j=0;j<g._howls.length;j++)if(!g._howls[j]._webAudio)for(var l=g._howls[j]._getSoundIds(),
n=0;n<l.length;n++){var s=g._howls[j]._soundById(l[n]);s&&s._node&&(s._node.muted=e?!0:s._muted)}return g},unload:function(){for(var e=this||f,g=e._howls.length-1;0<=g;g--)e._howls[g].unload();e.usingWebAudio&&e.ctx&&"undefined"!==typeof e.ctx.close&&(e.ctx.close(),e.ctx=null,q());return e},codecs:function(e){return(this||f)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||f;e.state=e.ctx?e.ctx.state||"running":"running";e._autoSuspend();if(!e.usingWebAudio)if("undefined"!==typeof Audio)try{var g=
new Audio;"undefined"===typeof g.oncanplaythrough&&(e._canPlayEvent="canplay")}catch(j){e.noAudio=!0}else e.noAudio=!0;try{g=new Audio,g.muted&&(e.noAudio=!0)}catch(l){}e.noAudio||e._setupCodecs();return e},_setupCodecs:function(){var e=this||f,g=null;try{g="undefined"!==typeof Audio?new Audio:null}catch(j){return e}if(!g||"function"!==typeof g.canPlayType)return e;var l=g.canPlayType("audio/mpeg;").replace(/^no$/,""),n=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),n=n&&33>parseInt(n[0].split("/")[1],
10);e._codecs={mp3:!(n||!l&&!g.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!l,opus:!!g.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!g.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!g.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!g.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!g.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!g.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(g.canPlayType("audio/x-m4a;")||
g.canPlayType("audio/m4a;")||g.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(g.canPlayType("audio/x-mp4;")||g.canPlayType("audio/mp4;")||g.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!g.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!g.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!g.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(g.canPlayType("audio/x-flac;")||g.canPlayType("audio/flac;")).replace(/^no$/,"")};return e},
_enableMobileAudio:function(){var e=this||f,g=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(e._navigator&&e._navigator.userAgent),j=!!("ontouchend"in window||e._navigator&&0<e._navigator.maxTouchPoints||e._navigator&&0<e._navigator.msMaxTouchPoints);if(!e._mobileEnabled&&e.ctx&&(g||j)){e._mobileEnabled=!1;!e._mobileUnloaded&&44100!==e.ctx.sampleRate&&(e._mobileUnloaded=!0,e.unload());e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var l=function(){f._autoResume();var g=e.ctx.createBufferSource();
g.buffer=e._scratchBuffer;g.connect(e.ctx.destination);"undefined"===typeof g.start?g.noteOn(0):g.start(0);"function"===typeof e.ctx.resume&&e.ctx.resume();g.onended=function(){g.disconnect(0);e._mobileEnabled=!0;e.mobileAutoEnable=!1;document.removeEventListener("touchstart",l,!0);document.removeEventListener("touchend",l,!0)}};document.addEventListener("touchstart",l,!0);document.addEventListener("touchend",l,!0);return e}},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&"undefined"!==
typeof e.ctx.suspend&&f.usingWebAudio){for(var g=0;g<e._howls.length;g++)if(e._howls[g]._webAudio)for(var j=0;j<e._howls[g]._sounds.length;j++)if(!e._howls[g]._sounds[j]._paused)return e;e._suspendTimer&&clearTimeout(e._suspendTimer);e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then(function(){e.state="suspended";e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3E4);return e}},_autoResume:function(){var e=
this;if(e.ctx&&"undefined"!==typeof e.ctx.resume&&f.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.ctx.resume().then(function(){e.state="running";for(var f=0;f<e._howls.length;f++)e._howls[f]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var f=new e,g=function(e){!e.src||0===e.src.length?console.error("An array of source files must be passed with any new Howl."):
this.init(e)};g.prototype={init:function(e){var g=this;f.ctx||q();g._autoplay=e.autoplay||!1;g._format="string"!==typeof e.format?e.format:[e.format];g._html5=e.html5||!1;g._muted=e.mute||!1;g._loop=e.loop||!1;g._pool=e.pool||5;g._preload="boolean"===typeof e.preload?e.preload:!0;g._rate=e.rate||1;g._sprite=e.sprite||{};g._src="string"!==typeof e.src?e.src:[e.src];g._volume=void 0!==e.volume?e.volume:1;g._xhrWithCredentials=e.xhrWithCredentials||!1;g._duration=0;g._state="unloaded";g._sounds=[];g._endTimers=
{};g._queue=[];g._playLock=!1;g._onend=e.onend?[{fn:e.onend}]:[];g._onfade=e.onfade?[{fn:e.onfade}]:[];g._onload=e.onload?[{fn:e.onload}]:[];g._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[];g._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[];g._onpause=e.onpause?[{fn:e.onpause}]:[];g._onplay=e.onplay?[{fn:e.onplay}]:[];g._onstop=e.onstop?[{fn:e.onstop}]:[];g._onmute=e.onmute?[{fn:e.onmute}]:[];g._onvolume=e.onvolume?[{fn:e.onvolume}]:[];g._onrate=e.onrate?[{fn:e.onrate}]:[];g._onseek=e.onseek?
[{fn:e.onseek}]:[];g._onresume=[];g._webAudio=f.usingWebAudio&&!g._html5;"undefined"!==typeof f.ctx&&f.ctx&&f.mobileAutoEnable&&f._enableMobileAudio();f._howls.push(g);g._autoplay&&g._queue.push({event:"play",action:function(){g.play()}});g._preload&&g.load();return g},load:function(){var e=null;if(f.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"===typeof this._src&&(this._src=[this._src]);for(var g=0;g<this._src.length;g++){var q,u;if(this._format&&this._format[g])q=this._format[g];
else{u=this._src[g];if("string"!==typeof u){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(q=/^data:audio\/([^;,]+);/i.exec(u))||(q=/\.([^.]+)$/.exec(u.split("?",1)[0]));q&&(q=q[1].toLowerCase())}q||console.warn('No file extension was found. Consider using the "format" property or specify an extension.');if(q&&f.codecs(q)){e=this._src[g];break}}if(e){this._src=e;this._state="loading";"https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(this._html5=
!0,this._webAudio=!1);new j(this);if(this._webAudio){var v=this,x=v._src;if(l[x])v._duration=l[x].duration,s(v);else if(/^data:[^;]+;base64,/.test(x)){e=atob(x.split(",")[1]);g=new Uint8Array(e.length);for(q=0;q<e.length;++q)g[q]=e.charCodeAt(q);n(g.buffer,v)}else{var E=new XMLHttpRequest;E.open("GET",x,!0);E.withCredentials=v._xhrWithCredentials;E.responseType="arraybuffer";E.onload=function(){var e=(E.status+"")[0];"0"!==e&&"2"!==e&&"3"!==e?v._emit("loaderror",null,"Failed loading audio file with status: "+
E.status+"."):n(E.response,v)};E.onerror=function(){v._webAudio&&(v._html5=!0,v._webAudio=!1,v._sounds=[],delete l[x],v.load())};try{E.send()}catch(C){E.onerror()}}}return this}this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,g){var j=this,l=null;if("number"===typeof e)l=e,e=null;else{if("string"===typeof e&&"loaded"===j._state&&!j._sprite[e])return null;if("undefined"===typeof e){e="__default";for(var n=0,q=0;q<j._sounds.length;q++)j._sounds[q]._paused&&
!j._sounds[q]._ended&&(n++,l=j._sounds[q]._id);1===n?e=null:l=null}}var s=l?j._soundById(l):j._inactiveSound();if(!s)return null;l&&!e&&(e=s._sprite||"__default");if("loaded"!==j._state){s._sprite=e;s._ended=!1;var C=s._id;j._queue.push({event:"play",action:function(){j.play(C)}});return C}if(l&&!s._paused)return g||j._loadQueue("play"),s._id;j._webAudio&&f._autoResume();var G=Math.max(0,0<s._seek?s._seek:j._sprite[e][0]/1E3),N=Math.max(0,(j._sprite[e][0]+j._sprite[e][1])/1E3-G),da=1E3*N/Math.abs(s._rate);
s._paused=!1;s._ended=!1;s._sprite=e;s._seek=G;s._start=j._sprite[e][0]/1E3;s._stop=(j._sprite[e][0]+j._sprite[e][1])/1E3;s._loop=!(!s._loop&&!j._sprite[e][2]);var H=s._node;if(j._webAudio)l=function(){j._refreshBuffer(s);H.gain.setValueAtTime(s._muted||j._muted?0:s._volume,f.ctx.currentTime);s._playStart=f.ctx.currentTime;"undefined"===typeof H.bufferSource.start?s._loop?H.bufferSource.noteGrainOn(0,G,86400):H.bufferSource.noteGrainOn(0,G,N):s._loop?H.bufferSource.start(0,G,86400):H.bufferSource.start(0,
G,N);Infinity!==da&&(j._endTimers[s._id]=setTimeout(j._ended.bind(j,s),da));g||setTimeout(function(){j._emit("play",s._id)},0)},"running"===f.state?l():(j.once("resume",l),j._clearTimer(s._id));else{var na=function(){H.currentTime=G;H.muted=s._muted||j._muted||f._muted||H.muted;H.volume=s._volume*f.volume();H.playbackRate=s._rate;try{var l=H.play();if("undefined"!==typeof Promise&&l instanceof Promise){j._playLock=!0;var n=function(){j._playLock=!1;g||j._emit("play",s._id)};l.then(n,n)}else g||j._emit("play",
s._id);H.playbackRate=s._rate;H.paused?j._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices where playback was not within a user interaction."):"__default"!==e||s._loop?j._endTimers[s._id]=setTimeout(j._ended.bind(j,s),da):(j._endTimers[s._id]=function(){j._ended(s);H.removeEventListener("ended",j._endTimers[s._id],!1)},H.addEventListener("ended",j._endTimers[s._id],!1))}catch(q){j._emit("playerror",s._id,q)}},l=window&&window.ejecta||!H.readyState&&
f._navigator.isCocoonJS;if(3<=H.readyState||l)na();else{var ba=function(){na();H.removeEventListener(f._canPlayEvent,ba,!1)};H.addEventListener(f._canPlayEvent,ba,!1);j._clearTimer(s._id)}}return s._id},pause:function(e,f){var g=this;if("loaded"!==g._state||g._playLock)return g._queue.push({event:"pause",action:function(){g.pause(e)}}),g;for(var j=g._getSoundIds(e),l=0;l<j.length;l++){g._clearTimer(j[l]);var n=g._soundById(j[l]);if(n&&!n._paused&&(n._seek=g.seek(j[l]),n._rateSeek=0,n._paused=!0,g._stopFade(j[l]),
n._node))if(g._webAudio){if(!n._node.bufferSource)continue;"undefined"===typeof n._node.bufferSource.stop?n._node.bufferSource.noteOff(0):n._node.bufferSource.stop(0);g._cleanBuffer(n._node)}else(!isNaN(n._node.duration)||Infinity===n._node.duration)&&n._node.pause();f||g._emit("pause",n?n._id:null)}return g},stop:function(e,f){var g=this;if("loaded"!==g._state)return g._queue.push({event:"stop",action:function(){g.stop(e)}}),g;for(var j=g._getSoundIds(e),l=0;l<j.length;l++){g._clearTimer(j[l]);var n=
g._soundById(j[l]);if(n){n._seek=n._start||0;n._rateSeek=0;n._paused=!0;n._ended=!0;g._stopFade(j[l]);if(n._node)if(g._webAudio)n._node.bufferSource&&("undefined"===typeof n._node.bufferSource.stop?n._node.bufferSource.noteOff(0):n._node.bufferSource.stop(0),g._cleanBuffer(n._node));else if(!isNaN(n._node.duration)||Infinity===n._node.duration)n._node.currentTime=n._start||0,n._node.pause();f||g._emit("stop",n._id)}}return g},mute:function(e,g){var j=this;if("loaded"!==j._state)return j._queue.push({event:"mute",
action:function(){j.mute(e,g)}}),j;if("undefined"===typeof g)if("boolean"===typeof e)j._muted=e;else return j._muted;for(var l=j._getSoundIds(g),n=0;n<l.length;n++){var q=j._soundById(l[n]);q&&(q._muted=e,q._interval&&j._stopFade(q._id),j._webAudio&&q._node?q._node.gain.setValueAtTime(e?0:q._volume,f.ctx.currentTime):q._node&&(q._node.muted=f._muted?!0:e),j._emit("mute",q._id))}return j},volume:function(){var e=this,g=arguments,j,l;if(0===g.length)return e._volume;1===g.length||2===g.length&&"undefined"===
typeof g[1]?0<=e._getSoundIds().indexOf(g[0])?l=parseInt(g[0],10):j=parseFloat(g[0]):2<=g.length&&(j=parseFloat(g[0]),l=parseInt(g[1],10));var n;if("undefined"!==typeof j&&0<=j&&1>=j){if("loaded"!==e._state)return e._queue.push({event:"volume",action:function(){e.volume.apply(e,g)}}),e;"undefined"===typeof l&&(e._volume=j);l=e._getSoundIds(l);for(var q=0;q<l.length;q++)if(n=e._soundById(l[q]))n._volume=j,g[2]||e._stopFade(l[q]),e._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(j,f.ctx.currentTime):
n._node&&!n._muted&&(n._node.volume=j*f.volume()),e._emit("volume",n._id)}else return(n=l?e._soundById(l):e._sounds[0])?n._volume:0;return e},fade:function(e,g,j,l){var n=this;if("loaded"!==n._state)return n._queue.push({event:"fade",action:function(){n.fade(e,g,j,l)}}),n;n.volume(e,l);for(var q=n._getSoundIds(l),s=0;s<q.length;s++){var C=n._soundById(q[s]);if(C){l||n._stopFade(q[s]);if(n._webAudio&&!C._muted){var G=f.ctx.currentTime,N=G+j/1E3;C._volume=e;C._node.gain.setValueAtTime(e,G);C._node.gain.linearRampToValueAtTime(g,
N)}n._startFadeInterval(C,e,g,j,q[s],"undefined"===typeof l)}}return n},_startFadeInterval:function(e,f,g,j,l,n){var q=this,s=f,G=g-f;l=Math.abs(G/0.01);l=Math.max(4,0<l?j/l:j);var N=Date.now();e._fadeTo=g;e._interval=setInterval(function(){var l=(Date.now()-N)/j;N=Date.now();s+=G*l;s=Math.max(0,s);s=Math.min(1,s);s=Math.round(100*s)/100;q._webAudio?e._volume=s:q.volume(s,e._id,!0);n&&(q._volume=s);if(g<f&&s<=g||g>f&&s>=g)clearInterval(e._interval),e._interval=null,e._fadeTo=null,q.volume(g,e._id),
q._emit("fade",e._id)},l)},_stopFade:function(e){var g=this._soundById(e);g&&g._interval&&(this._webAudio&&g._node.gain.cancelScheduledValues(f.ctx.currentTime),clearInterval(g._interval),g._interval=null,this.volume(g._fadeTo,e),g._fadeTo=null,this._emit("fade",e));return this},loop:function(){var e=arguments,f,g;if(0===e.length)return this._loop;if(1===e.length)if("boolean"===typeof e[0])this._loop=f=e[0];else return(e=this._soundById(parseInt(e[0],10)))?e._loop:!1;else 2===e.length&&(f=e[0],g=
parseInt(e[1],10));g=this._getSoundIds(g);for(var j=0;j<g.length;j++)if(e=this._soundById(g[j]))if(e._loop=f,this._webAudio&&e._node&&e._node.bufferSource&&(e._node.bufferSource.loop=f))e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop;return this},rate:function(){var e=this,g=arguments,j,l;0===g.length?l=e._sounds[0]._id:1===g.length?0<=e._getSoundIds().indexOf(g[0])?l=parseInt(g[0],10):j=parseFloat(g[0]):2===g.length&&(j=parseFloat(g[0]),l=parseInt(g[1],10));var n;
if("number"===typeof j){if("loaded"!==e._state)return e._queue.push({event:"rate",action:function(){e.rate.apply(e,g)}}),e;"undefined"===typeof l&&(e._rate=j);l=e._getSoundIds(l);for(var q=0;q<l.length;q++)if(n=e._soundById(l[q])){n._rateSeek=e.seek(l[q]);n._playStart=e._webAudio?f.ctx.currentTime:n._playStart;n._rate=j;e._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(j,f.ctx.currentTime):n._node&&(n._node.playbackRate=j);var s=e.seek(l[q]),s=1E3*((e._sprite[n._sprite][0]+
e._sprite[n._sprite][1])/1E3-s)/Math.abs(n._rate);if(e._endTimers[l[q]]||!n._paused)e._clearTimer(l[q]),e._endTimers[l[q]]=setTimeout(e._ended.bind(e,n),s);e._emit("rate",n._id)}}else return(n=e._soundById(l))?n._rate:e._rate;return e},seek:function(){var e=this,g=arguments,j,l;0===g.length?l=e._sounds[0]._id:1===g.length?0<=e._getSoundIds().indexOf(g[0])?l=parseInt(g[0],10):e._sounds.length&&(l=e._sounds[0]._id,j=parseFloat(g[0])):2===g.length&&(j=parseFloat(g[0]),l=parseInt(g[1],10));if("undefined"===
typeof l)return e;if("loaded"!==e._state)return e._queue.push({event:"seek",action:function(){e.seek.apply(e,g)}}),e;var n=e._soundById(l);if(n)if("number"===typeof j&&0<=j){var q=e.playing(l);q&&e.pause(l,!0);n._seek=j;n._ended=!1;e._clearTimer(l);q&&e.play(l,!0);!e._webAudio&&n._node&&(n._node.currentTime=j);if(q&&!e._webAudio){var s=function(){e._playLock?setTimeout(s,0):e._emit("seek",l)};setTimeout(s,0)}else e._emit("seek",l)}else return e._webAudio?(j=e.playing(l)?f.ctx.currentTime-n._playStart:
0,n._seek+((n._rateSeek?n._rateSeek-n._seek:0)+j*Math.abs(n._rate))):n._node.currentTime;return e},playing:function(e){if("number"===typeof e)return(e=this._soundById(e))?!e._paused:!1;for(e=0;e<this._sounds.length;e++)if(!this._sounds[e]._paused)return!0;return!1},duration:function(e){var f=this._duration;(e=this._soundById(e))&&(f=this._sprite[e._sprite][1]/1E3);return f},state:function(){return this._state},unload:function(){for(var e=this._sounds,g=0;g<e.length;g++)e[g]._paused||this.stop(e[g]._id),
this._webAudio||(/MSIE |Trident\//.test(f._navigator&&f._navigator.userAgent)||(e[g]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),e[g]._node.removeEventListener("error",e[g]._errorFn,!1),e[g]._node.removeEventListener(f._canPlayEvent,e[g]._loadFn,!1)),delete e[g]._node,this._clearTimer(e[g]._id);g=f._howls.indexOf(this);0<=g&&f._howls.splice(g,1);e=!0;for(g=0;g<f._howls.length;g++)if(f._howls[g]._src===this._src){e=!1;break}l&&e&&delete l[this._src];
f.noAudio=!1;this._state="unloaded";this._sounds=[];return null},on:function(e,f,g,j){e=this["_on"+e];"function"===typeof f&&e.push(j?{id:g,fn:f,once:j}:{id:g,fn:f});return this},off:function(e,f,g){var j=this["_on"+e],l=0;"number"===typeof f&&(g=f,f=null);if(f||g)for(l=0;l<j.length;l++){if(e=g===j[l].id,f===j[l].fn&&e||!f&&e){j.splice(l,1);break}}else if(e)this["_on"+e]=[];else{f=Object.keys(this);for(l=0;l<f.length;l++)0===f[l].indexOf("_on")&&Array.isArray(this[f[l]])&&(this[f[l]]=[])}return this},
once:function(e,f,g){this.on(e,f,g,1);return this},_emit:function(e,f,g){for(var j=this["_on"+e],l=j.length-1;0<=l;l--)if(!j[l].id||j[l].id===f||"load"===e)setTimeout(function(e){e.call(this,f,g)}.bind(this,j[l].fn),0),j[l].once&&this.off(e,j[l].fn,j[l].id);this._loadQueue(e);return this},_loadQueue:function(e){if(0<this._queue.length){var f=this._queue[0];f.event===e&&(this._queue.shift(),this._loadQueue());e||f.action()}return this},_ended:function(e){var g=e._sprite;if(!this._webAudio&&e._node&&
!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(this._ended.bind(this,e),100),this;g=!(!e._loop&&!this._sprite[g][2]);this._emit("end",e._id);!this._webAudio&&g&&this.stop(e._id,!0).play(e._id);if(this._webAudio&&g){this._emit("play",e._id);e._seek=e._start||0;e._rateSeek=0;e._playStart=f.ctx.currentTime;var j=1E3*(e._stop-e._start)/Math.abs(e._rate);this._endTimers[e._id]=setTimeout(this._ended.bind(this,e),j)}this._webAudio&&!g&&(e._paused=!0,e._ended=!0,e._seek=e._start||
0,e._rateSeek=0,this._clearTimer(e._id),this._cleanBuffer(e._node),f._autoSuspend());!this._webAudio&&!g&&this.stop(e._id,!0);return this},_clearTimer:function(e){if(this._endTimers[e]){if("function"!==typeof this._endTimers[e])clearTimeout(this._endTimers[e]);else{var f=this._soundById(e);f&&f._node&&f._node.removeEventListener("ended",this._endTimers[e],!1)}delete this._endTimers[e]}return this},_soundById:function(e){for(var f=0;f<this._sounds.length;f++)if(e===this._sounds[f]._id)return this._sounds[f];
return null},_inactiveSound:function(){this._drain();for(var e=0;e<this._sounds.length;e++)if(this._sounds[e]._ended)return this._sounds[e].reset();return new j(this)},_drain:function(){var e=this._pool,f=0,g=0;if(!(this._sounds.length<e)){for(g=0;g<this._sounds.length;g++)this._sounds[g]._ended&&f++;for(g=this._sounds.length-1;0<=g&&!(f<=e);g--)this._sounds[g]._ended&&(this._webAudio&&this._sounds[g]._node&&this._sounds[g]._node.disconnect(0),this._sounds.splice(g,1),f--)}},_getSoundIds:function(e){if("undefined"===
typeof e){e=[];for(var f=0;f<this._sounds.length;f++)e.push(this._sounds[f]._id);return e}return[e]},_refreshBuffer:function(e){e._node.bufferSource=f.ctx.createBufferSource();e._node.bufferSource.buffer=l[this._src];e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node);if(e._node.bufferSource.loop=e._loop)e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop;e._node.bufferSource.playbackRate.setValueAtTime(e._rate,f.ctx.currentTime);return this},
_cleanBuffer:function(e){if(f._scratchBuffer&&e.bufferSource){e.bufferSource.onended=null;e.bufferSource.disconnect(0);try{e.bufferSource.buffer=f._scratchBuffer}catch(g){}}e.bufferSource=null;return this}};var j=function(e){this._parent=e;this.init()};j.prototype={init:function(){var e=this._parent;this._muted=e._muted;this._loop=e._loop;this._volume=e._volume;this._rate=e._rate;this._seek=0;this._ended=this._paused=!0;this._sprite="__default";this._id=++f._counter;e._sounds.push(this);this.create();
return this},create:function(){var e=this._parent,g=f._muted||this._muted||this._parent._muted?0:this._volume;e._webAudio?(this._node="undefined"===typeof f.ctx.createGain?f.ctx.createGainNode():f.ctx.createGain(),this._node.gain.setValueAtTime(g,f.ctx.currentTime),this._node.paused=!0,this._node.connect(f.masterGain)):(this._node=new Audio,this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(f._canPlayEvent,
this._loadFn,!1),this._node.src=e._src,this._node.preload="auto",this._node.volume=g*f.volume(),this._node.load());return this},reset:function(){var e=this._parent;this._muted=e._muted;this._loop=e._loop;this._volume=e._volume;this._rate=e._rate;this._rateSeek=this._seek=0;this._ended=this._paused=!0;this._sprite="__default";this._id=++f._counter;return this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0);this._node.removeEventListener("error",
this._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10;0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1E3*e._duration]});"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue());this._node.removeEventListener(f._canPlayEvent,this._loadFn,!1)}};var l={},n=function(e,g){f.ctx.decodeAudioData(e,function(e){e&&0<g._sounds.length&&(l[g._src]=e,s(g,e))},function(){g._emit("loaderror",null,"Decoding audio data failed.")})},
s=function(e,f){f&&!e._duration&&(e._duration=f.duration);0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1E3*e._duration]});"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},q=function(){try{"undefined"!==typeof AudioContext?f.ctx=new AudioContext:"undefined"!==typeof webkitAudioContext?f.ctx=new webkitAudioContext:f.usingWebAudio=!1}catch(e){f.usingWebAudio=!1}var g=/iP(hone|od|ad)/.test(f._navigator&&f._navigator.platform),j=f._navigator&&f._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),
j=j?parseInt(j[1],10):null;if(g&&j&&9>j&&(g=/safari/.test(f._navigator&&f._navigator.userAgent.toLowerCase()),f._navigator&&f._navigator.standalone&&!g||f._navigator&&!f._navigator.standalone&&!g))f.usingWebAudio=!1;f.usingWebAudio&&(f.masterGain="undefined"===typeof f.ctx.createGain?f.ctx.createGainNode():f.ctx.createGain(),f.masterGain.gain.setValueAtTime(f._muted?0:1,f.ctx.currentTime),f.masterGain.connect(f.ctx.destination));f._setup()};"function"===typeof define&&define.amd&&define([],function(){return{Howler:f,
Howl:g}});"undefined"!==typeof exports&&(exports.Howler=f,exports.Howl=g);"undefined"!==typeof window?(window.HowlerGlobal=e,window.Howler=f,window.Howl=g,window.Sound=j):"undefined"!==typeof global&&(global.HowlerGlobal=e,global.Howler=f,global.Howl=g,global.Sound=j)})();
(function(){HowlerGlobal.prototype._pos=[0,0,0];HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0];HowlerGlobal.prototype.stereo=function(e){if(!this.ctx||!this.ctx.listener)return this;for(var f=this._howls.length-1;0<=f;f--)this._howls[f].stereo(e);return this};HowlerGlobal.prototype.pos=function(e,f,g){if(!this.ctx||!this.ctx.listener)return this;f="number"!==typeof f?this._pos[1]:f;g="number"!==typeof g?this._pos[2]:g;if("number"===typeof e)this._pos=[e,f,g],"undefined"!==typeof this.ctx.listener.positionX?
(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,0.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,0.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,0.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]);else return this._pos;return this};HowlerGlobal.prototype.orientation=function(e,f,g,j,m,r){if(!this.ctx||!this.ctx.listener)return this;var t=this._orientation;f="number"!==
typeof f?t[1]:f;g="number"!==typeof g?t[2]:g;j="number"!==typeof j?t[3]:j;m="number"!==typeof m?t[4]:m;r="number"!==typeof r?t[5]:r;if("number"===typeof e)this._orientation=[e,f,g,j,m,r],"undefined"!==typeof this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,0.1),this.ctx.listener.forwardY.setTargetAtTime(f,Howler.ctx.currentTime,0.1),this.ctx.listener.forwardZ.setTargetAtTime(g,Howler.ctx.currentTime,0.1),this.ctx.listener.upX.setTargetAtTime(e,Howler.ctx.currentTime,
0.1),this.ctx.listener.upY.setTargetAtTime(f,Howler.ctx.currentTime,0.1),this.ctx.listener.upZ.setTargetAtTime(g,Howler.ctx.currentTime,0.1)):this.ctx.listener.setOrientation(e,f,g,j,m,r);else return t;return this};var e=Howl.prototype.init;Howl.prototype.init=function(f){this._orientation=f.orientation||[1,0,0];this._stereo=f.stereo||null;this._pos=f.pos||null;this._pannerAttr={coneInnerAngle:"undefined"!==typeof f.coneInnerAngle?f.coneInnerAngle:360,coneOuterAngle:"undefined"!==typeof f.coneOuterAngle?
f.coneOuterAngle:360,coneOuterGain:"undefined"!==typeof f.coneOuterGain?f.coneOuterGain:0,distanceModel:"undefined"!==typeof f.distanceModel?f.distanceModel:"inverse",maxDistance:"undefined"!==typeof f.maxDistance?f.maxDistance:1E4,panningModel:"undefined"!==typeof f.panningModel?f.panningModel:"HRTF",refDistance:"undefined"!==typeof f.refDistance?f.refDistance:1,rolloffFactor:"undefined"!==typeof f.rolloffFactor?f.rolloffFactor:1};this._onstereo=f.onstereo?[{fn:f.onstereo}]:[];this._onpos=f.onpos?
[{fn:f.onpos}]:[];this._onorientation=f.onorientation?[{fn:f.onorientation}]:[];return e.call(this,f)};Howl.prototype.stereo=function(e,f){var g=this;if(!g._webAudio)return g;if("loaded"!==g._state)return g._queue.push({event:"stereo",action:function(){g.stereo(e,f)}}),g;var q="undefined"===typeof Howler.ctx.createStereoPanner?"spatial":"stereo";if("undefined"===typeof f)if("number"===typeof e)g._stereo=e,g._pos=[e,0,0];else return g._stereo;for(var m=g._getSoundIds(f),r=0;r<m.length;r++){var t=g._soundById(m[r]);
if(t)if("number"===typeof e)t._stereo=e,t._pos=[e,0,0],t._node&&(t._pannerAttr.panningModel="equalpower",(!t._panner||!t._panner.pan)&&j(t,q),"spatial"===q?"undefined"!==typeof t._panner.positionX?(t._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):t._panner.setPosition(e,0,0):t._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),g._emit("stereo",t._id);else return t._stereo}return g};
Howl.prototype.pos=function(e,f,g,q){var m=this;if(!m._webAudio)return m;if("loaded"!==m._state)return m._queue.push({event:"pos",action:function(){m.pos(e,f,g,q)}}),m;f="number"!==typeof f?0:f;g="number"!==typeof g?-0.5:g;if("undefined"===typeof q)if("number"===typeof e)m._pos=[e,f,g];else return m._pos;for(var r=m._getSoundIds(q),t=0;t<r.length;t++){var u=m._soundById(r[t]);if(u)if("number"===typeof e)u._pos=[e,f,g],u._node&&((!u._panner||u._panner.pan)&&j(u,"spatial"),"undefined"!==typeof u._panner.positionX?
(u._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(f,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(g,Howler.ctx.currentTime)):u._panner.setOrientation(e,f,g)),m._emit("pos",u._id);else return u._pos}return m};Howl.prototype.orientation=function(e,f,g,q){var m=this;if(!m._webAudio)return m;if("loaded"!==m._state)return m._queue.push({event:"orientation",action:function(){m.orientation(e,f,g,q)}}),m;f="number"!==typeof f?m._orientation[1]:f;
g="number"!==typeof g?m._orientation[2]:g;if("undefined"===typeof q)if("number"===typeof e)m._orientation=[e,f,g];else return m._orientation;for(var r=m._getSoundIds(q),t=0;t<r.length;t++){var u=m._soundById(r[t]);if(u)if("number"===typeof e)u._orientation=[e,f,g],u._node&&(u._panner||(u._pos||(u._pos=m._pos||[0,0,-0.5]),j(u,"spatial")),u._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(f,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(g,
Howler.ctx.currentTime)),m._emit("orientation",u._id);else return u._orientation}return m};Howl.prototype.pannerAttr=function(){var e=arguments,f,g;if(!this._webAudio)return this;if(0===e.length)return this._pannerAttr;if(1===e.length)if("object"===typeof e[0])f=e[0],"undefined"===typeof g&&(f.pannerAttr||(f.pannerAttr={coneInnerAngle:f.coneInnerAngle,coneOuterAngle:f.coneOuterAngle,coneOuterGain:f.coneOuterGain,distanceModel:f.distanceModel,maxDistance:f.maxDistance,refDistance:f.refDistance,rolloffFactor:f.rolloffFactor,
panningModel:f.panningModel}),this._pannerAttr={coneInnerAngle:"undefined"!==typeof f.pannerAttr.coneInnerAngle?f.pannerAttr.coneInnerAngle:this._coneInnerAngle,coneOuterAngle:"undefined"!==typeof f.pannerAttr.coneOuterAngle?f.pannerAttr.coneOuterAngle:this._coneOuterAngle,coneOuterGain:"undefined"!==typeof f.pannerAttr.coneOuterGain?f.pannerAttr.coneOuterGain:this._coneOuterGain,distanceModel:"undefined"!==typeof f.pannerAttr.distanceModel?f.pannerAttr.distanceModel:this._distanceModel,maxDistance:"undefined"!==
typeof f.pannerAttr.maxDistance?f.pannerAttr.maxDistance:this._maxDistance,refDistance:"undefined"!==typeof f.pannerAttr.refDistance?f.pannerAttr.refDistance:this._refDistance,rolloffFactor:"undefined"!==typeof f.pannerAttr.rolloffFactor?f.pannerAttr.rolloffFactor:this._rolloffFactor,panningModel:"undefined"!==typeof f.pannerAttr.panningModel?f.pannerAttr.panningModel:this._panningModel});else return(e=this._soundById(parseInt(e[0],10)))?e._pannerAttr:this._pannerAttr;else 2===e.length&&(f=e[0],g=
parseInt(e[1],10));g=this._getSoundIds(g);for(var q=0;q<g.length;q++)if(e=this._soundById(g[q])){var m=e._pannerAttr,m={coneInnerAngle:"undefined"!==typeof f.coneInnerAngle?f.coneInnerAngle:m.coneInnerAngle,coneOuterAngle:"undefined"!==typeof f.coneOuterAngle?f.coneOuterAngle:m.coneOuterAngle,coneOuterGain:"undefined"!==typeof f.coneOuterGain?f.coneOuterGain:m.coneOuterGain,distanceModel:"undefined"!==typeof f.distanceModel?f.distanceModel:m.distanceModel,maxDistance:"undefined"!==typeof f.maxDistance?
f.maxDistance:m.maxDistance,refDistance:"undefined"!==typeof f.refDistance?f.refDistance:m.refDistance,rolloffFactor:"undefined"!==typeof f.rolloffFactor?f.rolloffFactor:m.rolloffFactor,panningModel:"undefined"!==typeof f.panningModel?f.panningModel:m.panningModel},r=e._panner;r?(r.coneInnerAngle=m.coneInnerAngle,r.coneOuterAngle=m.coneOuterAngle,r.coneOuterGain=m.coneOuterGain,r.distanceModel=m.distanceModel,r.maxDistance=m.maxDistance,r.refDistance=m.refDistance,r.rolloffFactor=m.rolloffFactor,
r.panningModel=m.panningModel):(e._pos||(e._pos=this._pos||[0,0,-0.5]),j(e,"spatial"))}return this};var f=Sound.prototype.init;Sound.prototype.init=function(){var e=this._parent;this._orientation=e._orientation;this._stereo=e._stereo;this._pos=e._pos;this._pannerAttr=e._pannerAttr;f.call(this);this._stereo?e.stereo(this._stereo):this._pos&&e.pos(this._pos[0],this._pos[1],this._pos[2],this._id)};var g=Sound.prototype.reset;Sound.prototype.reset=function(){var e=this._parent;this._orientation=e._orientation;
this._stereo=e._stereo;this._pos=e._pos;this._pannerAttr=e._pannerAttr;this._stereo?e.stereo(this._stereo):this._pos?e.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,e._refreshBuffer(this));return g.call(this)};var j=function(e,f){"spatial"===(f||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,
e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,"undefined"!==typeof e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],
e._pos[1],e._pos[2]),"undefined"!==typeof e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime));e._panner.connect(e._node);
e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}})();
(function(e){Number.prototype.map=function(e,f,g,j){return g+(j-g)*((this-e)/(f-e))};Number.prototype.limit=function(e,f){return Math.min(f,Math.max(e,this))};Number.prototype.round=function(e){e=Math.pow(10,e||0);return Math.round(this*e)/e};Number.prototype.floor=function(){return Math.floor(this)};Number.prototype.ceil=function(){return Math.ceil(this)};Number.prototype.toInt=function(){return this|0};Number.prototype.toRad=function(){return this/180*Math.PI};Number.prototype.toDeg=function(){return 180*
this/Math.PI};Array.prototype.erase=function(e){for(var f=this.length;f--;)this[f]===e&&this.splice(f,1);return this};Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]};Function.prototype.bind=Function.prototype.bind||function(e){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var f=Array.prototype.slice.call(arguments,1),g=this,j=function(){},l=function(){return g.apply(this instanceof j&&e?
this:e,f.concat(Array.prototype.slice.call(arguments)))};j.prototype=this.prototype;l.prototype=new j;return l};e.ig={game:null,debug:null,version:"1.23",global:e,modules:{},resources:[],ready:!1,baked:!1,nocache:"",ua:{},prefix:e.ImpactPrefix||"",lib:"lib/",_current:null,_loadQueue:[],_waitForOnload:0,$:function(e){return"#"==e.charAt(0)?document.getElementById(e.substr(1)):document.getElementsByTagName(e)},$new:function(e){return document.createElement(e)},copy:function(e){if(!e||"object"!=typeof e||
e instanceof HTMLElement||e instanceof ig.Class)return e;if(e instanceof Array)for(var f=[],g=0,j=e.length;g<j;g++)f[g]=ig.copy(e[g]);else for(g in f={},e)f[g]=ig.copy(e[g]);return f},merge:function(e,f){for(var g in f){var j=f[g];if("object"!=typeof j||j instanceof HTMLElement||j instanceof ig.Class||null===j)e[g]=j;else{if(!e[g]||"object"!=typeof e[g])e[g]=j instanceof Array?[]:{};ig.merge(e[g],j)}}return e},ksort:function(e){if(!e||"object"!=typeof e)return[];var f=[],g=[],j;for(j in e)f.push(j);
f.sort();for(j=0;j<f.length;j++)g.push(e[f[j]]);return g},setVendorAttribute:function(e,f,g){var j=f.charAt(0).toUpperCase()+f.substr(1);e[f]="undefined"!==typeof e.imageSmoothingEnabled?e["ms"+j]=e["moz"+j]=e["o"+j]=g:e["ms"+j]=e["moz"+j]=e["webkit"+j]=e["o"+j]=g},getVendorAttribute:function(e,f){var g=f.charAt(0).toUpperCase()+f.substr(1);return"undefined"!==typeof e.imageSmoothingEnabled?e[f]||e["ms"+g]||e["moz"+g]||e["o"+g]:e[f]||e["ms"+g]||e["moz"+g]||e["webkit"+g]||e["o"+g]},normalizeVendorAttribute:function(e,
f){var g=ig.getVendorAttribute(e,f);!e[f]&&g&&(e[f]=g)},getImagePixels:function(e,f,g,j,l){var n=ig.$new("canvas");n.width=e.width;n.height=e.height;var s=n.getContext("2d");ig.System.SCALE.CRISP(n,s);var E=ig.getVendorAttribute(s,"backingStorePixelRatio")||1;ig.normalizeVendorAttribute(s,"getImageDataHD");var C=e.width/E,G=e.height/E;n.width=Math.ceil(C);n.height=Math.ceil(G);s.drawImage(e,0,0,C,G);return 1===E?s.getImageData(f,g,j,l):s.getImageDataHD(f,g,j,l)},module:function(e){if(ig._current)throw"Module '"+
ig._current.name+"' defines nothing";if(ig.modules[e]&&ig.modules[e].body)throw"Module '"+e+"' is already defined";ig._current={name:e,requires:[],loaded:!1,body:null};ig.modules[e]=ig._current;ig._loadQueue.push(ig._current);return ig},requires:function(){ig._current.requires=Array.prototype.slice.call(arguments);return ig},defines:function(e){ig._current.body=e;ig._current=null;ig._initDOMReady()},addResource:function(e){ig.resources.push(e)},setNocache:function(){ig.nocache=""},log:function(){},
assert:function(){},show:function(){},mark:function(){},_loadScript:function(e,f){ig.modules[e]={name:e,requires:[],loaded:!1,body:null};ig._waitForOnload++;var g=ig.prefix+ig.lib+e.replace(/\./g,"/")+".js"+ig.nocache,j=ig.$new("script");j.type="text/javascript";j.src=g;j.onload=function(){ig._waitForOnload--;ig._execModules()};j.onerror=function(){throw"Failed to load module "+e+" at "+g+" required from "+f;};ig.$("head")[0].appendChild(j)},_execModules:function(){for(var e=!1,f=0;f<ig._loadQueue.length;f++){for(var g=
ig._loadQueue[f],j=!0,l=0;l<g.requires.length;l++){var n=g.requires[l];ig.modules[n]?ig.modules[n].loaded||(j=!1):(j=!1,ig._loadScript(n,g.name))}j&&g.body&&(ig._loadQueue.splice(f,1),g.loaded=!0,g.body(),e=!0,f--)}if(e)ig._execModules();else if(!ig.baked&&0==ig._waitForOnload&&0!=ig._loadQueue.length){e=[];for(f=0;f<ig._loadQueue.length;f++){j=[];n=ig._loadQueue[f].requires;for(l=0;l<n.length;l++)g=ig.modules[n[l]],(!g||!g.loaded)&&j.push(n[l]);e.push(ig._loadQueue[f].name+" (requires: "+j.join(", ")+
")")}throw"Unresolved (or circular?) dependencies. Most likely there's a name/path mismatch for one of the listed modules or a previous syntax error prevents a module from loading:\n"+e.join("\n");}},_DOMReady:function(){if(!ig.modules["dom.ready"].loaded){if(!document.body)return setTimeout(ig._DOMReady,13);ig.modules["dom.ready"].loaded=!0;ig._waitForOnload--;ig._execModules()}return 0},_boot:function(){document.location.href.match(/\?nocache/)&&ig.setNocache(!0);ig.ua.pixelRatio=e.devicePixelRatio||
1;ig.ua.viewport={width:e.innerWidth,height:e.innerHeight};ig.ua.screen={width:e.screen.availWidth*ig.ua.pixelRatio,height:e.screen.availHeight*ig.ua.pixelRatio};ig.ua.iPhone=/iPhone/i.test(navigator.userAgent);ig.ua.iPhone4=ig.ua.iPhone&&2==ig.ua.pixelRatio;ig.ua.iPad=/iPad/i.test(navigator.userAgent);ig.ua.android=/android/i.test(navigator.userAgent);ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent);ig.ua.is_uiwebview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);
ig.ua.is_safari_or_uiwebview=/(iPhone|iPod|iPad).*AppleWebKit/i.test(navigator.userAgent);ig.ua.iOS=ig.ua.iPhone||ig.ua.iPad;ig.ua.iOS6_tag=/OS 6_/i.test(navigator.userAgent);ig.ua.iOS6=(ig.ua.iPhone||ig.ua.iPad)&&ig.ua.iOS6_tag;ig.ua.iOSgt5=ig.ua.iOS&&5<parseInt(navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)[1]);ig.ua.HTCONE=/HTC_One/i.test(navigator.userAgent);ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent);ig.ua.Kindle=/Silk/i.test(navigator.userAgent);ig.ua.touchDevice="ontouchstart"in
e||e.navigator.msMaxTouchPoints;ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.iOS6||ig.ua.winPhone||ig.ua.Kindle||/mobile/i.test(navigator.userAgent)},_initDOMReady:function(){ig.modules["dom.ready"]?ig._execModules():(ig._boot(),ig.modules["dom.ready"]={requires:[],loaded:!1,body:null},ig._waitForOnload++,"complete"===document.readyState?ig._DOMReady():(document.addEventListener("DOMContentLoaded",ig._DOMReady,!1),e.addEventListener("load",ig._DOMReady,!1)))}};ig.normalizeVendorAttribute(e,"requestAnimationFrame");
if(e.requestAnimationFrame){var f=1,g={};e.ig.setAnimation=function(j,l){var n=f++;g[n]=!0;var s=function(){g[n]&&(e.requestAnimationFrame(s,l),j())};e.requestAnimationFrame(s,l);return n};e.ig.clearAnimation=function(e){delete g[e]}}else e.ig.setAnimation=function(f){return e.setInterval(f,1E3/60)},e.ig.clearAnimation=function(f){e.clearInterval(f)};var j=!1,l=/xyz/.test(function(){xyz})?/\bparent\b/:/.*/,n=0;e.ig.Class=function(){};var s=function(e){var f=this.prototype,g={},j;for(j in e)"function"==
typeof e[j]&&"function"==typeof f[j]&&l.test(e[j])?(g[j]=f[j],f[j]=function(e,f){return function(){var j=this.parent;this.parent=g[e];var l=f.apply(this,arguments);this.parent=j;return l}}(j,e[j])):f[j]=e[j]};e.ig.Class.extend=function(f){function g(){if(!j){if(this.staticInstantiate){var e=this.staticInstantiate.apply(this,arguments);if(e)return e}for(var f in this)"object"==typeof this[f]&&(this[f]=ig.copy(this[f]));this.init&&this.init.apply(this,arguments)}return this}var r=this.prototype;j=!0;
var t=new this;j=!1;for(var u in f)t[u]="function"==typeof f[u]&&"function"==typeof r[u]&&l.test(f[u])?function(e,f){return function(){var g=this.parent;this.parent=r[e];var j=f.apply(this,arguments);this.parent=g;return j}}(u,f[u]):f[u];g.prototype=t;g.prototype.constructor=g;g.extend=e.ig.Class.extend;g.inject=s;g.classId=t.classId=++n;return g};e.ImpactMixin&&ig.merge(ig,e.ImpactMixin)})(window);ig.baked=!0;
ig.module("impact.image").defines(function(){ig.Image=ig.Class.extend({data:null,width:0,height:0,loaded:!1,failed:!1,loadCallback:null,path:"",staticInstantiate:function(e){return ig.Image.cache[e]||null},init:function(e){this.path=e;this.load()},load:function(e){this.loaded?e&&e(this.path,!0):(!this.loaded&&ig.ready?(this.loadCallback=e||null,this.data=new Image,this.data.onload=this.onload.bind(this),this.data.onerror=this.onerror.bind(this),this.data.src=ig.prefix+this.path+ig.nocache):ig.addResource(this),
ig.Image.cache[this.path]=this)},reload:function(){this.loaded=!1;this.data=new Image;this.data.onload=this.onload.bind(this);this.data.src=this.path+"?"+Date.now()},onload:function(){this.width=this.data.width;this.height=this.data.height;this.loaded=!0;1!=ig.system.scale&&this.resize(ig.system.scale);this.loadCallback&&this.loadCallback(this.path,!0)},onerror:function(){this.failed=!0;this.loadCallback&&this.loadCallback(this.path,!1)},resize:function(e){var f=ig.getImagePixels(this.data,0,0,this.width,
this.height),g=this.width*e,j=this.height*e,l=ig.$new("canvas");l.width=g;l.height=j;for(var n=l.getContext("2d"),s=n.getImageData(0,0,g,j),q=0;q<j;q++)for(var m=0;m<g;m++){var r=4*(Math.floor(q/e)*this.width+Math.floor(m/e)),t=4*(q*g+m);s.data[t]=f.data[r];s.data[t+1]=f.data[r+1];s.data[t+2]=f.data[r+2];s.data[t+3]=f.data[r+3]}n.putImageData(s,0,0);this.data=l},draw:function(e,f,g,j,l,n){if(this.loaded){var s=ig.system.scale;l=(l?l:this.width)*s;n=(n?n:this.height)*s;ig.system.context.drawImage(this.data,
g?g*s:0,j?j*s:0,l,n,ig.system.getDrawPos(e),ig.system.getDrawPos(f),l,n);ig.Image.drawCount++}},drawTile:function(e,f,g,j,l,n,s){l=l?l:j;if(this.loaded&&!(j>this.width||l>this.height)){var q=ig.system.scale,m=Math.floor(j*q),r=Math.floor(l*q),t=n?-1:1,u=s?-1:1;if(n||s)ig.system.context.save(),ig.system.context.scale(t,u);ig.system.context.drawImage(this.data,Math.floor(g*j)%this.width*q,Math.floor(g*j/this.width)*l*q,m,r,ig.system.getDrawPos(e)*t-(n?m:0),ig.system.getDrawPos(f)*u-(s?r:0),m,r);(n||
s)&&ig.system.context.restore();ig.Image.drawCount++}}});ig.Image.drawCount=0;ig.Image.cache={};ig.Image.reloadCache=function(){for(var e in ig.Image.cache)ig.Image.cache[e].reload()}});ig.baked=!0;
ig.module("impact.font").requires("impact.image").defines(function(){ig.Font=ig.Image.extend({widthMap:[],indices:[],firstChar:32,alpha:1,letterSpacing:1,lineSpacing:0,onload:function(e){this._loadMetrics(this.data);this.parent(e)},widthForString:function(e){if(-1!==e.indexOf("\n")){e=e.split("\n");for(var f=0,g=0;g<e.length;g++)f=Math.max(f,this._widthForLine(e[g]));return f}return this._widthForLine(e)},_widthForLine:function(e){for(var f=0,g=0;g<e.length;g++)f+=this.widthMap[e.charCodeAt(g)-this.firstChar]+
this.letterSpacing;return f},heightForString:function(e){return e.split("\n").length*(this.height+this.lineSpacing)},draw:function(e,f,g,j){"string"!=typeof e&&(e=e.toString());if(-1!==e.indexOf("\n")){e=e.split("\n");for(var l=this.height+this.lineSpacing,n=0;n<e.length;n++)this.draw(e[n],f,g+n*l,j)}else{if(j==ig.Font.ALIGN.RIGHT||j==ig.Font.ALIGN.CENTER)n=this._widthForLine(e),f-=j==ig.Font.ALIGN.CENTER?n/2:n;1!==this.alpha&&(ig.system.context.globalAlpha=this.alpha);for(n=0;n<e.length;n++)j=e.charCodeAt(n),
f+=this._drawChar(j-this.firstChar,f,g);1!==this.alpha&&(ig.system.context.globalAlpha=1);ig.Image.drawCount+=e.length}},_drawChar:function(e,f,g){if(!this.loaded||0>e||e>=this.indices.length)return 0;var j=ig.system.scale,l=this.widthMap[e]*j,n=(this.height-2)*j;ig.system.context.drawImage(this.data,this.indices[e]*j,0,l,n,ig.system.getDrawPos(f),ig.system.getDrawPos(g),l,n);return this.widthMap[e]+this.letterSpacing},_loadMetrics:function(e){this.height=e.height-1;this.widthMap=[];this.indices=
[];for(var f=ig.getImagePixels(e,0,e.height-1,e.width,1),g=0,j=0,l=0;l<e.width;l++){var n=4*l+3;127<f.data[n]?j++:128>f.data[n]&&j&&(this.widthMap.push(j),this.indices.push(l-j),g++,j=0)}this.widthMap.push(j);this.indices.push(l-j)}});ig.Font.ALIGN={LEFT:0,RIGHT:1,CENTER:2}});ig.baked=!0;
ig.module("impact.sound").defines(function(){ig.SoundManager=ig.Class.extend({clips:{},volume:1,format:null,init:function(){if(!ig.Sound.enabled||!window.Audio)ig.Sound.enabled=!1;else{for(var e=new Audio,f=0;f<ig.Sound.use.length;f++){var g=ig.Sound.use[f];if(e.canPlayType(g.mime)){this.format=g;break}}this.format||(ig.Sound.enabled=!1)}},load:function(e,f,g){var j=ig.prefix+e.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[e]){if(f&&this.clips[e].length<ig.Sound.channels)for(f=this.clips[e].length;f<
ig.Sound.channels;f++){var l=new Audio(j);l.load();this.clips[e].push(l)}return this.clips[e][0]}var n=new Audio(j);g&&(n.addEventListener("canplaythrough",function q(f){n.removeEventListener("canplaythrough",q,!1);g(e,!0,f)},!1),n.addEventListener("error",function(f){g(e,!1,f)},!1));n.preload="auto";n.load();this.clips[e]=[n];if(f)for(f=1;f<ig.Sound.channels;f++)l=new Audio(j),l.load(),this.clips[e].push(l);return n},get:function(e){e=this.clips[e];for(var f=0,g;g=e[f++];)if(g.paused||g.ended)return g.ended&&
(g.currentTime=0),g;e[0].pause();e[0].currentTime=0;return e[0]}});ig.Music=ig.Class.extend({tracks:[],namedTracks:{},currentTrack:null,currentIndex:0,random:!1,_volume:1,_loop:!1,_fadeInterval:0,_fadeTimer:null,_endedCallbackBound:null,init:function(){this._endedCallbackBound=this._endedCallback.bind(this);Object.defineProperty?(Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)}),Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)})):
this.__defineGetter__&&(this.__defineGetter__("volume",this.getVolume.bind(this)),this.__defineSetter__("volume",this.setVolume.bind(this)),this.__defineGetter__("loop",this.getLooping.bind(this)),this.__defineSetter__("loop",this.setLooping.bind(this)))},add:function(e,f){if(ig.Sound.enabled){var g=ig.soundManager.load(e instanceof ig.Sound?e.path:e,!1);g.loop=this._loop;g.volume=this._volume;g.addEventListener("ended",this._endedCallbackBound,!1);this.tracks.push(g);f&&(this.namedTracks[f]=g);this.currentTrack||
(this.currentTrack=g)}},next:function(){this.tracks.length&&(this.stop(),this.currentIndex=this.random?Math.floor(Math.random()*this.tracks.length):(this.currentIndex+1)%this.tracks.length,this.currentTrack=this.tracks[this.currentIndex],this.play())},pause:function(){this.currentTrack&&this.currentTrack.pause()},stop:function(){this.currentTrack&&(this.currentTrack.pause(),this.currentTrack.currentTime=0)},play:function(e){if(e&&this.namedTracks[e])e=this.namedTracks[e],e!=this.currentTrack&&(this.stop(),
this.currentTrack=e);else if(!this.currentTrack)return;this.currentTrack.play()},getLooping:function(){return this._loop},setLooping:function(e){this._loop=e;for(var f in this.tracks)this.tracks[f].loop=e},getVolume:function(){return this._volume},setVolume:function(e){this._volume=e.limit(0,1);for(var f in this.tracks)this.tracks[f].volume=this._volume},fadeOut:function(e){this.currentTrack&&(clearInterval(this._fadeInterval),this.fadeTimer=new ig.Timer(e),this._fadeInterval=setInterval(this._fadeStep.bind(this),
50))},_fadeStep:function(){var e=this.fadeTimer.delta().map(-this.fadeTimer.target,0,1,0).limit(0,1)*this._volume;0.01>=e?(this.stop(),this.currentTrack.volume=this._volume,clearInterval(this._fadeInterval)):this.currentTrack.volume=e},_endedCallback:function(){this._loop?this.play():this.next()}});ig.Sound=ig.Class.extend({path:"",volume:1,currentClip:null,multiChannel:!0,init:function(e,f){this.path=e;this.multiChannel=!1!==f;this.load()},load:function(e){ig.Sound.enabled?ig.ready?ig.soundManager.load(this.path,
this.multiChannel,e):ig.addResource(this):e&&e(this.path,!0)},play:function(){ig.Sound.enabled&&(this.currentClip=ig.soundManager.get(this.path),this.currentClip.volume=ig.soundManager.volume*this.volume,this.currentClip.play())},stop:function(){this.currentClip&&(this.currentClip.pause(),this.currentClip.currentTime=0)}});ig.Sound.FORMAT={MP3:{ext:"mp3",mime:"audio/mpeg"},M4A:{ext:"m4a",mime:"audio/mp4; codecs=mp4a"},OGG:{ext:"ogg",mime:"audio/ogg; codecs=vorbis"},WEBM:{ext:"webm",mime:"audio/webm; codecs=vorbis"},
CAF:{ext:"caf",mime:"audio/x-caf"}};ig.Sound.use=[ig.Sound.FORMAT.OGG,ig.Sound.FORMAT.MP3];ig.Sound.channels=4;ig.Sound.enabled=!0});ig.baked=!0;
ig.module("impact.loader").requires("impact.image","impact.font","impact.sound").defines(function(){ig.Loader=ig.Class.extend({resources:[],gameClass:null,status:0,done:!1,_unloaded:[],_drawStatus:0,_intervalId:0,_loadCallbackBound:null,init:function(e,f){this.gameClass=e;this.resources=f;this._loadCallbackBound=this._loadCallback.bind(this);for(var g=0;g<this.resources.length;g++)this._unloaded.push(this.resources[g].path)},load:function(){ig.system.clear("#000");if(this.resources.length){for(var e=
0;e<this.resources.length;e++)this.loadResource(this.resources[e]);this._intervalId=setInterval(this.draw.bind(this),16)}else this.end()},loadResource:function(e){e.load(this._loadCallbackBound)},end:function(){this.done||(this.done=!0,clearInterval(this._intervalId))},draw:function(){},_loadCallback:function(e,f){if(f)this._unloaded.erase(e);else throw"Failed to load resource: "+e;this.status=1-this._unloaded.length/this.resources.length;0==this._unloaded.length&&setTimeout(this.end.bind(this),250)}})});
ig.baked=!0;
ig.module("impact.timer").defines(function(){ig.Timer=ig.Class.extend({target:0,base:0,last:0,pausedAt:0,init:function(e){this.last=this.base=ig.Timer.time;this.target=e||0},set:function(e){this.target=e||0;this.base=ig.Timer.time;this.pausedAt=0},reset:function(){this.base=ig.Timer.time;this.pausedAt=0},tick:function(){var e=ig.Timer.time-this.last;this.last=ig.Timer.time;return this.pausedAt?0:e},delta:function(){return(this.pausedAt||ig.Timer.time)-this.base-this.target},pause:function(){this.pausedAt||(this.pausedAt=
ig.Timer.time)},unpause:function(){this.pausedAt&&(this.base+=ig.Timer.time-this.pausedAt,this.pausedAt=0)}});ig.Timer._last=0;ig.Timer.time=Number.MIN_VALUE;ig.Timer.timeScale=1;ig.Timer.maxStep=0.05;ig.Timer.step=function(){var e=Date.now();ig.Timer.time+=Math.min((e-ig.Timer._last)/1E3,ig.Timer.maxStep)*ig.Timer.timeScale;ig.Timer._last=e}});ig.baked=!0;
ig.module("impact.system").requires("impact.timer","impact.image").defines(function(){ig.System=ig.Class.extend({fps:30,width:320,height:240,realWidth:320,realHeight:240,scale:1,tick:0,animationId:0,newGameClass:null,running:!1,delegate:null,clock:null,canvas:null,context:null,init:function(e,f,g,j,l){this.fps=f;this.clock=new ig.Timer;this.canvas=ig.$(e);this.resize(g,j,l);this.context=this.canvas.getContext("2d");this.getDrawPos=ig.System.drawMode;1!=this.scale&&(ig.System.scaleMode=ig.System.SCALE.CRISP);
ig.System.scaleMode(this.canvas,this.context)},resize:function(e,f,g){this.width=e;this.height=f;this.scale=g||this.scale;this.realWidth=this.width*this.scale;this.realHeight=this.height*this.scale;this.canvas.width=this.realWidth;this.canvas.height=this.realHeight},setGame:function(e){this.running?this.newGameClass=e:this.setGameNow(e)},setGameNow:function(e){ig.game=new e;ig.system.setDelegate(ig.game)},setDelegate:function(e){if("function"==typeof e.run)this.delegate=e,this.startRunLoop();else throw"System.setDelegate: No run() function in object";
},stopRunLoop:function(){ig.clearAnimation(this.animationId);this.running=!1},startRunLoop:function(){this.stopRunLoop();this.animationId=ig.setAnimation(this.run.bind(this),this.canvas);this.running=!0},clear:function(e){this.context.fillStyle=e;this.context.fillRect(0,0,this.realWidth,this.realHeight)},run:function(){ig.Timer.step();this.tick=this.clock.tick();this.delegate.run();ig.input.clearPressed();this.newGameClass&&(this.setGameNow(this.newGameClass),this.newGameClass=null)},getDrawPos:null});
ig.System.DRAW={AUTHENTIC:function(e){return Math.round(e)*this.scale},SMOOTH:function(e){return Math.round(e*this.scale)},SUBPIXEL:function(e){return e*this.scale}};ig.System.drawMode=ig.System.DRAW.SMOOTH;ig.System.SCALE={CRISP:function(e,f){ig.setVendorAttribute(f,"imageSmoothingEnabled",!1);e.style.imageRendering="-moz-crisp-edges";e.style.imageRendering="-o-crisp-edges";e.style.imageRendering="-webkit-optimize-contrast";e.style.imageRendering="crisp-edges";e.style.msInterpolationMode="nearest-neighbor"},
SMOOTH:function(e,f){ig.setVendorAttribute(f,"imageSmoothingEnabled",!0);e.style.imageRendering="";e.style.msInterpolationMode=""}};ig.System.scaleMode=ig.System.SCALE.SMOOTH});ig.baked=!0;
ig.module("impact.input").defines(function(){ig.KEY={MOUSE1:-1,MOUSE2:-3,MWHEEL_UP:-4,MWHEEL_DOWN:-5,BACKSPACE:8,TAB:9,ENTER:13,PAUSE:19,CAPS:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,_0:48,_1:49,_2:50,_3:51,_4:52,_5:53,_6:54,_7:55,_8:56,_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,
NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBSTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SHIFT:16,CTRL:17,ALT:18,PLUS:187,COMMA:188,MINUS:189,PERIOD:190};ig.Input=ig.Class.extend({bindings:{},actions:{},presses:{},locks:{},delayedKeyup:{},isUsingMouse:!1,isUsingKeyboard:!1,isUsingAccelerometer:!1,mouse:{x:0,y:0},accel:{x:0,y:0,z:0},initMouse:function(){if(!this.isUsingMouse){this.isUsingMouse=
!0;var e=this.mousewheel.bind(this);ig.system.canvas.addEventListener("mousewheel",e,!1);ig.system.canvas.addEventListener("DOMMouseScroll",e,!1);ig.system.canvas.addEventListener("contextmenu",this.contextmenu.bind(this),!1);ig.system.canvas.addEventListener("mousedown",this.keydown.bind(this),!1);ig.system.canvas.addEventListener("mouseup",this.keyup.bind(this),!1);ig.system.canvas.addEventListener("mousemove",this.mousemove.bind(this),!1);ig.ua.touchDevice&&(ig.system.canvas.addEventListener("touchstart",
this.keydown.bind(this),!1),ig.system.canvas.addEventListener("touchend",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("touchmove",this.mousemove.bind(this),!1),ig.system.canvas.addEventListener("MSPointerDown",this.keydown.bind(this),!1),ig.system.canvas.addEventListener("MSPointerUp",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("MSPointerMove",this.mousemove.bind(this),!1),ig.system.canvas.style.msTouchAction="none")}},initKeyboard:function(){this.isUsingKeyboard||(this.isUsingKeyboard=
!0,window.addEventListener("keydown",this.keydown.bind(this),!1),window.addEventListener("keyup",this.keyup.bind(this),!1))},initAccelerometer:function(){this.isUsingAccelerometer||window.addEventListener("devicemotion",this.devicemotion.bind(this),!1)},mousewheel:function(e){var f=this.bindings[0<(e.wheelDelta?e.wheelDelta:-1*e.detail)?ig.KEY.MWHEEL_UP:ig.KEY.MWHEEL_DOWN];f&&(this.actions[f]=!0,this.presses[f]=!0,this.delayedKeyup[f]=!0,e.stopPropagation(),e.preventDefault())},mousemove:function(e){var f=
parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;ig.ua.mobile&&(f=ig.system.realWidth);var f=ig.system.scale*(f/ig.system.realWidth),g={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(g=ig.system.canvas.getBoundingClientRect());e=e.touches?e.touches[0]:e;this.mouse.x=(e.clientX-g.left)/f;this.mouse.y=(e.clientY-g.top)/f},contextmenu:function(e){this.bindings[ig.KEY.MOUSE2]&&(e.stopPropagation(),e.preventDefault())},keydown:function(e){var f=e.target.tagName;if(!("INPUT"==f||"TEXTAREA"==
f))if(f="keydown"==e.type?e.keyCode:2==e.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1,("touchstart"==e.type||"mousedown"==e.type)&&this.mousemove(e),f=this.bindings[f])this.actions[f]=!0,this.locks[f]||(this.presses[f]=!0,this.locks[f]=!0),e.stopPropagation(),e.preventDefault()},keyup:function(e){var f=e.target.tagName;if(!("INPUT"==f||"TEXTAREA"==f))if(f=this.bindings["keyup"==e.type?e.keyCode:2==e.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1])this.delayedKeyup[f]=!0,e.stopPropagation(),e.preventDefault()},devicemotion:function(e){this.accel=
e.accelerationIncludingGravity},bind:function(e,f){0>e?this.initMouse():0<e&&this.initKeyboard();this.bindings[e]=f},bindTouch:function(e,f){var g=ig.$(e),j=this;g.addEventListener("touchstart",function(e){j.touchStart(e,f)},!1);g.addEventListener("touchend",function(e){j.touchEnd(e,f)},!1);g.addEventListener("MSPointerDown",function(e){j.touchStart(e,f)},!1);g.addEventListener("MSPointerUp",function(e){j.touchEnd(e,f)},!1)},unbind:function(e){this.delayedKeyup[this.bindings[e]]=!0;this.bindings[e]=
null},unbindAll:function(){this.bindings={};this.actions={};this.presses={};this.locks={};this.delayedKeyup={}},state:function(e){return this.actions[e]},pressed:function(e){return this.presses[e]},released:function(e){return!!this.delayedKeyup[e]},clearPressed:function(){for(var e in this.delayedKeyup)this.actions[e]=!1,this.locks[e]=!1;this.delayedKeyup={};this.presses={}},touchStart:function(e,f){this.actions[f]=!0;this.presses[f]=!0;e.stopPropagation();e.preventDefault();return!1},touchEnd:function(e,
f){this.delayedKeyup[f]=!0;e.stopPropagation();e.preventDefault();return!1}})});ig.baked=!0;ig.module("impact.impact").requires("dom.ready","impact.loader","impact.system","impact.input","impact.sound").defines(function(){ig.main=function(e,f,g,j,l,n,s){ig.system=new ig.System(e,g,j,l,n||1);ig.input=new ig.Input;ig.soundManager=new ig.SoundManager;ig.music=new ig.Music;ig.ready=!0;(new (s||ig.Loader)(f,ig.resources)).load()}});ig.baked=!0;
ig.module("impact.animation").requires("impact.timer","impact.image").defines(function(){ig.AnimationSheet=ig.Class.extend({width:8,height:8,image:null,init:function(e,f,g){this.width=f;this.height=g;this.image=new ig.Image(e)}});ig.Animation=ig.Class.extend({sheet:null,timer:null,sequence:[],flip:{x:!1,y:!1},pivot:{x:0,y:0},frame:0,tile:0,loopCount:0,alpha:1,angle:0,init:function(e,f,g,j){this.sheet=e;this.pivot={x:e.width/2,y:e.height/2};this.timer=new ig.Timer;this.frameTime=f;this.sequence=g;
this.stop=!!j;this.tile=this.sequence[0]},rewind:function(){this.timer.set();this.frame=this.loopCount=0;this.tile=this.sequence[0];return this},gotoFrame:function(e){this.timer.set(this.frameTime*-e-1E-4);this.update()},gotoRandomFrame:function(){this.gotoFrame(Math.floor(Math.random()*this.sequence.length))},update:function(){var e=Math.floor(this.timer.delta()/this.frameTime);this.loopCount=Math.floor(e/this.sequence.length);this.frame=this.stop&&0<this.loopCount?this.sequence.length-1:e%this.sequence.length;
this.tile=this.sequence[this.frame]},draw:function(e,f){var g=Math.max(this.sheet.width,this.sheet.height);e>ig.system.width||f>ig.system.height||(0>e+g||0>f+g)||(1!=this.alpha&&(ig.system.context.globalAlpha=this.alpha),0==this.angle?this.sheet.image.drawTile(e,f,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y):(ig.system.context.save(),ig.system.context.translate(ig.system.getDrawPos(e+this.pivot.x),ig.system.getDrawPos(f+this.pivot.y)),ig.system.context.rotate(this.angle),
this.sheet.image.drawTile(-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y),ig.system.context.restore()),1!=this.alpha&&(ig.system.context.globalAlpha=1))}})});ig.baked=!0;
ig.module("impact.entity").requires("impact.animation","impact.impact").defines(function(){ig.Entity=ig.Class.extend({id:0,settings:{},size:{x:16,y:16},offset:{x:0,y:0},pos:{x:0,y:0},last:{x:0,y:0},vel:{x:0,y:0},accel:{x:0,y:0},friction:{x:0,y:0},maxVel:{x:100,y:100},zIndex:0,gravityFactor:1,standing:!1,bounciness:0,minBounceVelocity:40,anims:{},animSheet:null,currentAnim:null,health:10,type:0,checkAgainst:0,collides:0,_killed:!1,slopeStanding:{min:(44).toRad(),max:(136).toRad()},init:function(e,
f,g){this.id=++ig.Entity._lastId;this.pos.x=this.last.x=e;this.pos.y=this.last.y=f;ig.merge(this,g)},reset:function(e,f,g){var j=this.constructor.prototype;this.pos.x=e;this.pos.y=f;this.last.x=e;this.last.y=f;this.vel.x=j.vel.x;this.vel.y=j.vel.y;this.accel.x=j.accel.x;this.accel.y=j.accel.y;this.health=j.health;this._killed=j._killed;this.standing=j.standing;this.type=j.type;this.checkAgainst=j.checkAgainst;this.collides=j.collides;ig.merge(this,g)},addAnim:function(e,f,g,j){if(!this.animSheet)throw"No animSheet to add the animation "+
e+" to.";f=new ig.Animation(this.animSheet,f,g,j);this.anims[e]=f;this.currentAnim||(this.currentAnim=f);return f},update:function(){this.last.x=this.pos.x;this.last.y=this.pos.y;this.vel.y+=ig.game.gravity*ig.system.tick*this.gravityFactor;this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.friction.x,this.maxVel.x);this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var e=ig.game.collisionMap.trace(this.pos.x,this.pos.y,this.vel.x*ig.system.tick,this.vel.y*
ig.system.tick,this.size.x,this.size.y);this.handleMovementTrace(e);this.currentAnim&&this.currentAnim.update()},getNewVelocity:function(e,f,g,j){return f?(e+f*ig.system.tick).limit(-j,j):g?(f=g*ig.system.tick,0<e-f?e-f:0>e+f?e+f:0):e.limit(-j,j)},handleMovementTrace:function(e){this.standing=!1;e.collision.y&&(0<this.bounciness&&Math.abs(this.vel.y)>this.minBounceVelocity?this.vel.y*=-this.bounciness:(0<this.vel.y&&(this.standing=!0),this.vel.y=0));e.collision.x&&(this.vel.x=0<this.bounciness&&Math.abs(this.vel.x)>
this.minBounceVelocity?this.vel.x*-this.bounciness:0);if(e.collision.slope){var f=e.collision.slope;if(0<this.bounciness){var g=this.vel.x*f.nx+this.vel.y*f.ny;this.vel.x=(this.vel.x-2*f.nx*g)*this.bounciness;this.vel.y=(this.vel.y-2*f.ny*g)*this.bounciness}else g=(this.vel.x*f.x+this.vel.y*f.y)/(f.x*f.x+f.y*f.y),this.vel.x=f.x*g,this.vel.y=f.y*g,f=Math.atan2(f.x,f.y),f>this.slopeStanding.min&&f<this.slopeStanding.max&&(this.standing=!0)}this.pos=e.pos},draw:function(){this.currentAnim&&this.currentAnim.draw(this.pos.x-
this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y)},kill:function(){ig.game.removeEntity(this)},receiveDamage:function(e){this.health-=e;0>=this.health&&this.kill()},touches:function(e){return!(this.pos.x>=e.pos.x+e.size.x||this.pos.x+this.size.x<=e.pos.x||this.pos.y>=e.pos.y+e.size.y||this.pos.y+this.size.y<=e.pos.y)},distanceTo:function(e){var f=this.pos.x+this.size.x/2-(e.pos.x+e.size.x/2);e=this.pos.y+this.size.y/2-(e.pos.y+e.size.y/2);return Math.sqrt(f*f+e*e)},angleTo:function(e){return Math.atan2(e.pos.y+
e.size.y/2-(this.pos.y+this.size.y/2),e.pos.x+e.size.x/2-(this.pos.x+this.size.x/2))},check:function(){},collideWith:function(){},ready:function(){},erase:function(){}});ig.Entity._lastId=0;ig.Entity.COLLIDES={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8};ig.Entity.TYPE={NONE:0,A:1,B:2,BOTH:3};ig.Entity.checkPair=function(e,f){e.checkAgainst&f.type&&e.check(f);f.checkAgainst&e.type&&f.check(e);e.collides&&f.collides&&e.collides+f.collides>ig.Entity.COLLIDES.ACTIVE&&ig.Entity.solveCollision(e,f)};ig.Entity.solveCollision=
function(e,f){var g=null;if(e.collides==ig.Entity.COLLIDES.LITE||f.collides==ig.Entity.COLLIDES.FIXED)g=e;else if(f.collides==ig.Entity.COLLIDES.LITE||e.collides==ig.Entity.COLLIDES.FIXED)g=f;e.last.x+e.size.x>f.last.x&&e.last.x<f.last.x+f.size.x?(e.last.y<f.last.y?ig.Entity.seperateOnYAxis(e,f,g):ig.Entity.seperateOnYAxis(f,e,g),e.collideWith(f,"y"),f.collideWith(e,"y")):e.last.y+e.size.y>f.last.y&&e.last.y<f.last.y+f.size.y&&(e.last.x<f.last.x?ig.Entity.seperateOnXAxis(e,f,g):ig.Entity.seperateOnXAxis(f,
e,g),e.collideWith(f,"x"),f.collideWith(e,"x"))};ig.Entity.seperateOnXAxis=function(e,f,g){var j=e.pos.x+e.size.x-f.pos.x;g?(g.vel.x=-g.vel.x*g.bounciness+(e===g?f:e).vel.x,f=ig.game.collisionMap.trace(g.pos.x,g.pos.y,g==e?-j:j,0,g.size.x,g.size.y),g.pos.x=f.pos.x):(g=(e.vel.x-f.vel.x)/2,e.vel.x=-g,f.vel.x=g,g=ig.game.collisionMap.trace(e.pos.x,e.pos.y,-j/2,0,e.size.x,e.size.y),e.pos.x=Math.floor(g.pos.x),e=ig.game.collisionMap.trace(f.pos.x,f.pos.y,j/2,0,f.size.x,f.size.y),f.pos.x=Math.ceil(e.pos.x))};
ig.Entity.seperateOnYAxis=function(e,f,g){var j=e.pos.y+e.size.y-f.pos.y;if(g){f=e===g?f:e;g.vel.y=-g.vel.y*g.bounciness+f.vel.y;var l=0;g==e&&Math.abs(g.vel.y-f.vel.y)<g.minBounceVelocity&&(g.standing=!0,l=f.vel.x*ig.system.tick);e=ig.game.collisionMap.trace(g.pos.x,g.pos.y,l,g==e?-j:j,g.size.x,g.size.y);g.pos.y=e.pos.y;g.pos.x=e.pos.x}else ig.game.gravity&&(f.standing||0<e.vel.y)?(g=ig.game.collisionMap.trace(e.pos.x,e.pos.y,0,-(e.pos.y+e.size.y-f.pos.y),e.size.x,e.size.y),e.pos.y=g.pos.y,0<e.bounciness&&
e.vel.y>e.minBounceVelocity?e.vel.y*=-e.bounciness:(e.standing=!0,e.vel.y=0)):(g=(e.vel.y-f.vel.y)/2,e.vel.y=-g,f.vel.y=g,l=f.vel.x*ig.system.tick,g=ig.game.collisionMap.trace(e.pos.x,e.pos.y,l,-j/2,e.size.x,e.size.y),e.pos.y=g.pos.y,e=ig.game.collisionMap.trace(f.pos.x,f.pos.y,0,j/2,f.size.x,f.size.y),f.pos.y=e.pos.y)}});ig.baked=!0;
ig.module("impact.map").defines(function(){ig.Map=ig.Class.extend({tilesize:8,width:1,height:1,data:[[]],name:null,init:function(e,f){this.tilesize=e;this.data=f;this.height=f.length;this.width=f[0].length;this.pxWidth=this.width*this.tilesize;this.pxHeight=this.height*this.tilesize},getTile:function(e,f){var g=Math.floor(e/this.tilesize),j=Math.floor(f/this.tilesize);return 0<=g&&g<this.width&&0<=j&&j<this.height?this.data[j][g]:0},setTile:function(e,f,g){e=Math.floor(e/this.tilesize);f=Math.floor(f/
this.tilesize);0<=e&&e<this.width&&0<=f&&f<this.height&&(this.data[f][e]=g)}})});ig.baked=!0;
ig.module("impact.collision-map").requires("impact.map").defines(function(){ig.CollisionMap=ig.Map.extend({lastSlope:1,tiledef:null,init:function(e,f,l){this.parent(e,f);this.tiledef=l||ig.CollisionMap.defaultTileDef;for(var n in this.tiledef)n|0>this.lastSlope&&(this.lastSlope=n|0)},trace:function(e,f,l,n,s,q){var m={collision:{x:!1,y:!1,slope:!1},pos:{x:e,y:f},tile:{x:0,y:0}},r=Math.ceil(Math.max(Math.abs(l),Math.abs(n))/this.tilesize);if(1<r)for(var t=l/r,u=n/r,v=0;v<r&&(t||u)&&!(this._traceStep(m,
e,f,t,u,s,q,l,n,v),e=m.pos.x,f=m.pos.y,m.collision.x&&(l=t=0),m.collision.y&&(n=u=0),m.collision.slope);v++);else this._traceStep(m,e,f,l,n,s,q,l,n,0);return m},_traceStep:function(e,f,l,n,s,q,m,r,t,u){e.pos.x+=n;e.pos.y+=s;var v=0;if(n){var x=0<n?q:0,E=0>n?this.tilesize:0,v=Math.max(Math.floor(l/this.tilesize),0),C=Math.min(Math.ceil((l+m)/this.tilesize),this.height);n=Math.floor((e.pos.x+x)/this.tilesize);var G=Math.floor((f+x)/this.tilesize);if(0<u||n==G||0>G||G>=this.width)G=-1;if(0<=n&&n<this.width)for(var N=
v;N<C&&!(-1!=G&&(v=this.data[N][G],1<v&&v<=this.lastSlope&&this._checkTileDef(e,v,f,l,r,t,q,m,G,N)));N++)if(v=this.data[N][n],1==v||v>this.lastSlope||1<v&&this._checkTileDef(e,v,f,l,r,t,q,m,n,N)){if(1<v&&v<=this.lastSlope&&e.collision.slope)break;e.collision.x=!0;e.tile.x=v;f=e.pos.x=n*this.tilesize-x+E;r=0;break}}if(s){x=0<s?m:0;s=0>s?this.tilesize:0;v=Math.max(Math.floor(e.pos.x/this.tilesize),0);E=Math.min(Math.ceil((e.pos.x+q)/this.tilesize),this.width);N=Math.floor((e.pos.y+x)/this.tilesize);
C=Math.floor((l+x)/this.tilesize);if(0<u||N==C||0>C||C>=this.height)C=-1;if(0<=N&&N<this.height)for(n=v;n<E&&!(-1!=C&&(v=this.data[C][n],1<v&&v<=this.lastSlope&&this._checkTileDef(e,v,f,l,r,t,q,m,n,C)));n++)if(v=this.data[N][n],1==v||v>this.lastSlope||1<v&&this._checkTileDef(e,v,f,l,r,t,q,m,n,N)){if(1<v&&v<=this.lastSlope&&e.collision.slope)break;e.collision.y=!0;e.tile.y=v;e.pos.y=N*this.tilesize-x+s;break}}},_checkTileDef:function(e,f,l,n,s,q,m,r,t,u){var v=this.tiledef[f];if(!v)return!1;f=(v[2]-
v[0])*this.tilesize;var x=(v[3]-v[1])*this.tilesize,E=v[4];m=l+s+(0>x?m:0)-(t+v[0])*this.tilesize;r=n+q+(0<f?r:0)-(u+v[1])*this.tilesize;if(0<f*r-x*m){if(0>s*-x+q*f)return E;t=Math.sqrt(f*f+x*x);u=x/t;t=-f/t;var C=m*u+r*t,v=u*C,C=t*C;if(v*v+C*C>=s*s+q*q)return E||0.5>f*(r-q)-x*(m-s);e.pos.x=l+s-v;e.pos.y=n+q-C;e.collision.slope={x:f,y:x,nx:u,ny:t};return!0}return!1}});var e=1/3,f=2/3;ig.CollisionMap.defaultTileDef={5:[0,1,1,f,!0],6:[0,f,1,e,!0],7:[0,e,1,0,!0],3:[0,1,1,0.5,!0],4:[0,0.5,1,0,!0],2:[0,
1,1,0,!0],10:[0.5,1,1,0,!0],21:[0,1,0.5,0,!0],32:[f,1,1,0,!0],43:[e,1,f,0,!0],54:[0,1,e,0,!0],27:[0,0,1,e,!0],28:[0,e,1,f,!0],29:[0,f,1,1,!0],25:[0,0,1,0.5,!0],26:[0,0.5,1,1,!0],24:[0,0,1,1,!0],11:[0,0,0.5,1,!0],22:[0.5,0,1,1,!0],33:[0,0,e,1,!0],44:[e,0,f,1,!0],55:[f,0,1,1,!0],16:[1,e,0,0,!0],17:[1,f,0,e,!0],18:[1,1,0,f,!0],14:[1,0.5,0,0,!0],15:[1,1,0,0.5,!0],13:[1,1,0,0,!0],8:[0.5,1,0,0,!0],19:[1,1,0.5,0,!0],30:[e,1,0,0,!0],41:[f,1,e,0,!0],52:[1,1,f,0,!0],38:[1,f,0,1,!0],39:[1,e,0,f,!0],40:[1,0,
0,e,!0],36:[1,0.5,0,1,!0],37:[1,0,0,0.5,!0],35:[1,0,0,1,!0],9:[1,0,0.5,1,!0],20:[0.5,0,0,1,!0],31:[1,0,f,1,!0],42:[f,0,e,1,!0],53:[e,0,0,1,!0],12:[0,0,1,0,!1],23:[1,1,0,1,!1],34:[1,0,1,1,!1],45:[0,1,0,0,!1]};ig.CollisionMap.staticNoCollision={trace:function(e,f,l,n){return{collision:{x:!1,y:!1,slope:!1},pos:{x:e+l,y:f+n},tile:{x:0,y:0}}}}});ig.baked=!0;
ig.module("impact.background-map").requires("impact.map","impact.image").defines(function(){ig.BackgroundMap=ig.Map.extend({tiles:null,scroll:{x:0,y:0},distance:1,repeat:!1,tilesetName:"",foreground:!1,enabled:!0,preRender:!1,preRenderedChunks:null,chunkSize:512,debugChunks:!1,anims:{},init:function(e,f,g){this.parent(e,f);this.setTileset(g)},setTileset:function(e){this.tilesetName=e instanceof ig.Image?e.path:e;this.tiles=new ig.Image(this.tilesetName);this.preRenderedChunks=null},setScreenPos:function(e,
f){this.scroll.x=e/this.distance;this.scroll.y=f/this.distance},preRenderMapToChunks:function(){var e=this.width*this.tilesize*ig.system.scale,f=this.height*this.tilesize*ig.system.scale;this.chunkSize=Math.min(Math.max(e,f),this.chunkSize);var g=Math.ceil(e/this.chunkSize),j=Math.ceil(f/this.chunkSize);this.preRenderedChunks=[];for(var l=0;l<j;l++){this.preRenderedChunks[l]=[];for(var n=0;n<g;n++)this.preRenderedChunks[l][n]=this.preRenderChunk(n,l,n==g-1?e-n*this.chunkSize:this.chunkSize,l==j-1?
f-l*this.chunkSize:this.chunkSize)}},preRenderChunk:function(e,f,g,j){var l=g/this.tilesize/ig.system.scale+1,n=j/this.tilesize/ig.system.scale+1,s=e*this.chunkSize/ig.system.scale%this.tilesize,q=f*this.chunkSize/ig.system.scale%this.tilesize;e=Math.floor(e*this.chunkSize/this.tilesize/ig.system.scale);f=Math.floor(f*this.chunkSize/this.tilesize/ig.system.scale);var m=ig.$new("canvas");m.width=g;m.height=j;m.retinaResolutionEnabled=!1;j=m.getContext("2d");ig.System.scaleMode(m,j);g=ig.system.context;
ig.system.context=j;for(j=0;j<l;j++)for(var r=0;r<n;r++)if(j+e<this.width&&r+f<this.height){var t=this.data[r+f][j+e];t&&this.tiles.drawTile(j*this.tilesize-s,r*this.tilesize-q,t-1,this.tilesize)}ig.system.context=g;return m},draw:function(){this.tiles.loaded&&this.enabled&&(this.preRender?this.drawPreRendered():this.drawTiled())},drawPreRendered:function(){this.preRenderedChunks||this.preRenderMapToChunks();var e=ig.system.getDrawPos(this.scroll.x),f=ig.system.getDrawPos(this.scroll.y);if(this.repeat)var g=
this.width*this.tilesize*ig.system.scale,e=(e%g+g)%g,g=this.height*this.tilesize*ig.system.scale,f=(f%g+g)%g;var g=Math.max(Math.floor(e/this.chunkSize),0),j=Math.max(Math.floor(f/this.chunkSize),0),l=Math.ceil((e+ig.system.realWidth)/this.chunkSize),n=Math.ceil((f+ig.system.realHeight)/this.chunkSize),s=this.preRenderedChunks[0].length,q=this.preRenderedChunks.length;this.repeat||(l=Math.min(l,s),n=Math.min(n,q));for(var m=0;j<n;j++){for(var r=0,t=g;t<l;t++){var u=this.preRenderedChunks[j%q][t%s],
v=-e+t*this.chunkSize-r,x=-f+j*this.chunkSize-m;ig.system.context.drawImage(u,v,x);ig.Image.drawCount++;this.debugChunks&&(ig.system.context.strokeStyle="#f0f",ig.system.context.strokeRect(v,x,this.chunkSize,this.chunkSize));this.repeat&&u.width<this.chunkSize&&v+u.width<ig.system.realWidth&&(r+=this.chunkSize-u.width,l++)}this.repeat&&u.height<this.chunkSize&&x+u.height<ig.system.realHeight&&(m+=this.chunkSize-u.height,n++)}},drawTiled:function(){for(var e=0,f=null,g=(this.scroll.x/this.tilesize).toInt(),
j=(this.scroll.y/this.tilesize).toInt(),l=this.scroll.x%this.tilesize,n=this.scroll.y%this.tilesize,s=-l-this.tilesize,l=ig.system.width+this.tilesize-l,q=ig.system.height+this.tilesize-n,m=-1,n=-n-this.tilesize;n<q;m++,n+=this.tilesize){var r=m+j;if(r>=this.height||0>r){if(!this.repeat)continue;r=(r%this.height+this.height)%this.height}for(var t=-1,u=s;u<l;t++,u+=this.tilesize){e=t+g;if(e>=this.width||0>e){if(!this.repeat)continue;e=(e%this.width+this.width)%this.width}if(e=this.data[r][e])(f=this.anims[e-
1])?f.draw(u,n):this.tiles.drawTile(u,n,e-1,this.tilesize)}}}})});ig.baked=!0;
ig.module("impact.game").requires("impact.impact","impact.entity","impact.collision-map","impact.background-map").defines(function(){ig.Game=ig.Class.extend({clearColor:"#000000",gravity:0,screen:{x:0,y:0},_rscreen:{x:0,y:0},entities:[],namedEntities:{},collisionMap:ig.CollisionMap.staticNoCollision,backgroundMaps:[],backgroundAnims:{},autoSort:!1,sortBy:null,cellSize:64,_deferredKill:[],_levelToLoad:null,_doSortEntities:!1,staticInstantiate:function(){this.sortBy=this.sortBy||ig.Game.SORT.Z_INDEX;
ig.game=this;return null},loadLevel:function(e){this.screen={x:0,y:0};this.entities=[];this.namedEntities={};for(var f=0;f<e.entities.length;f++){var g=e.entities[f];this.spawnEntity(g.type,g.x,g.y,g.settings)}this.sortEntities();this.collisionMap=ig.CollisionMap.staticNoCollision;this.backgroundMaps=[];for(f=0;f<e.layer.length;f++)if(g=e.layer[f],"collision"==g.name)this.collisionMap=new ig.CollisionMap(g.tilesize,g.data);else{var j=new ig.BackgroundMap(g.tilesize,g.data,g.tilesetName);j.anims=this.backgroundAnims[g.tilesetName]||
{};j.repeat=g.repeat;j.distance=g.distance;j.foreground=!!g.foreground;j.preRender=!!g.preRender;j.name=g.name;this.backgroundMaps.push(j)}for(f=0;f<this.entities.length;f++)this.entities[f].ready()},loadLevelDeferred:function(e){this._levelToLoad=e},getMapByName:function(e){if("collision"==e)return this.collisionMap;for(var f=0;f<this.backgroundMaps.length;f++)if(this.backgroundMaps[f].name==e)return this.backgroundMaps[f];return null},getEntityByName:function(e){return this.namedEntities[e]},getEntitiesByType:function(e){e=
"string"===typeof e?ig.global[e]:e;for(var f=[],g=0;g<this.entities.length;g++){var j=this.entities[g];j instanceof e&&!j._killed&&f.push(j)}return f},spawnEntity:function(e,f,g,j){var l="string"===typeof e?ig.global[e]:e;if(!l)throw"Can't spawn entity of type "+e;e=new l(f,g,j||{});this.entities.push(e);e.name&&(this.namedEntities[e.name]=e);return e},sortEntities:function(){this.entities.sort(this.sortBy)},sortEntitiesDeferred:function(){this._doSortEntities=!0},removeEntity:function(e){e.name&&
delete this.namedEntities[e.name];e._killed=!0;e.type=ig.Entity.TYPE.NONE;e.checkAgainst=ig.Entity.TYPE.NONE;e.collides=ig.Entity.COLLIDES.NEVER;this._deferredKill.push(e)},run:function(){this.update();this.draw()},update:function(){this._levelToLoad&&(this.loadLevel(this._levelToLoad),this._levelToLoad=null);this.updateEntities();this.checkEntities();for(var e=0;e<this._deferredKill.length;e++)this._deferredKill[e].erase(),this.entities.erase(this._deferredKill[e]);this._deferredKill=[];if(this._doSortEntities||
this.autoSort)this.sortEntities(),this._doSortEntities=!1;for(var f in this.backgroundAnims){var e=this.backgroundAnims[f],g;for(g in e)e[g].update()}},updateEntities:function(){for(var e=0;e<this.entities.length;e++){var f=this.entities[e];f._killed||f.update()}},draw:function(){this.clearColor&&ig.system.clear(this.clearColor);this._rscreen.x=ig.system.getDrawPos(this.screen.x)/ig.system.scale;this._rscreen.y=ig.system.getDrawPos(this.screen.y)/ig.system.scale;var e;for(e=0;e<this.backgroundMaps.length;e++){var f=
this.backgroundMaps[e];if(f.foreground)break;f.setScreenPos(this.screen.x,this.screen.y);f.draw()}this.drawEntities();for(e;e<this.backgroundMaps.length;e++)f=this.backgroundMaps[e],f.setScreenPos(this.screen.x,this.screen.y),f.draw()},drawEntities:function(){for(var e=0;e<this.entities.length;e++)this.entities[e].draw()},checkEntities:function(){for(var e={},f=0;f<this.entities.length;f++){var g=this.entities[f];if(!(g.type==ig.Entity.TYPE.NONE&&g.checkAgainst==ig.Entity.TYPE.NONE&&g.collides==ig.Entity.COLLIDES.NEVER))for(var j=
{},l=Math.floor(g.pos.y/this.cellSize),n=Math.floor((g.pos.x+g.size.x)/this.cellSize)+1,s=Math.floor((g.pos.y+g.size.y)/this.cellSize)+1,q=Math.floor(g.pos.x/this.cellSize);q<n;q++)for(var m=l;m<s;m++)if(e[q])if(e[q][m]){for(var r=e[q][m],t=0;t<r.length;t++)g.touches(r[t])&&!j[r[t].id]&&(j[r[t].id]=!0,ig.Entity.checkPair(g,r[t]));r.push(g)}else e[q][m]=[g];else e[q]={},e[q][m]=[g]}}});ig.Game.SORT={Z_INDEX:function(e,f){return e.zIndex-f.zIndex},POS_X:function(e,f){return e.pos.x+e.size.x-(f.pos.x+
f.size.x)},POS_Y:function(e,f){return e.pos.y+e.size.y-(f.pos.y+f.size.y)}}});ig.baked=!0;
ig.module("plugins.packer.packer-image-injector").requires("impact.image","impact.animation").defines(function(){ig.Image.inject({tintCache:{},load:function(e){ig.packer&&ig.packer.isImageInAtlas(this.path)?(this.frameData=ig.packer.getFrameData(this.path),this.width=this.frameData.frame.w,this.height=this.frameData.frame.h,this.loaded=ig.packer.isImageLoadedForPath(this.path),e&&e(this.path,!0)):this.parent(e)},reload:function(){ig.packer.isImageInAtlas(this.path)||this.parent()},resize:function(e){ig.packer.isImageInAtlas(this.path)?
console.warn("PACKER PLUGIN WARNING! : image.scale is not supported, \nImage path:"+this.path):this.parent(e)},draw:function(e,f,g,j,l,n,s,q){if(ig.packer.isImageInAtlas(this.path)){if(!this.atlasImage&&(this.atlasImage=ig.packer.getAtlasImage(this.path),this.frameData=ig.packer.getFrameData(this.path),this.width=this.frameData.frame.w,this.height=this.frameData.frame.h,!this.atlasImage))return;l=l?l:this.width;n=n?n:this.height;ig.system.context.drawImage(this.atlasImage,(g?g:0)+this.frameData.frame.x,
(j?j:0)+this.frameData.frame.y,l,n,ig.system.getDrawPos(e),ig.system.getDrawPos(f),s?s:l,q?q:n)}else l=l?l:this.width,n=n?n:this.height,ig.system.context.drawImage(this.data,g?g:0,j?j:0,l,n,ig.system.getDrawPos(e),ig.system.getDrawPos(f),s?s:l,q?q:n);ig.Image.drawCount++},drawImage:function(e,f,g,j,l,n,s,q){e=e?e:0;f=f?f:0;2>=arguments.length?this.draw(e,f):4>=arguments.length?(g=g?g:this.width,j=j?j:this.height,this.draw(e,f,0,0,this.width,this.height,g,j)):(g=g?g:this.width,j=j?j:this.height,s=
s?s:this.width,q=q?q:this.height,this.draw(l?l:0,n?n:0,e,f,g,j,s,q))},drawCtx:function(e,f,g,j,l,n,s,q,m){if(ig.packer.isImageInAtlas(this.path)){if(!this.atlasImage&&(this.atlasImage=ig.packer.getAtlasImage(this.path),this.frameData=ig.packer.getFrameData(this.path),this.width=this.frameData.frame.w,this.height=this.frameData.frame.h,!this.atlasImage))return;n=n?n:this.width;s=s?s:this.height;e.drawImage(this.atlasImage,(j?j:0)+this.frameData.frame.x,(l?l:0)+this.frameData.frame.y,n,s,ig.system.getDrawPos(f),
ig.system.getDrawPos(g),q?q:n,m?m:s)}else n=n?n:this.width,s=s?s:this.height,e.drawImage(this.data,j?j:0,l?l:0,n,s,ig.system.getDrawPos(f),ig.system.getDrawPos(g),q?q:n,m?m:s);ig.Image.drawCount++},drawImageCtx:function(e,f,g,j,l,n,s,q,m){f=f?f:0;g=g?g:0;2>=arguments.length?this.drawCtx(e,f,g):5>=arguments.length?(j=j?j:this.width,l=l?l:this.height,this.drawCtx(e,f,g,0,0,this.width,this.height,j,l)):(j=j?j:this.width,l=l?l:this.height,q=q?q:this.width,m=m?m:this.height,this.drawCtx(e,n?n:0,s?s:0,
f,g,j,l,q,m))},drawTile:function(e,f,g,j,l,n,s){if(ig.packer.isImageInAtlas(this.path)){if(this.atlasImage||!(this.atlasImage=ig.packer.getAtlasImage(this.path),this.frameData=ig.packer.getFrameData(this.path),this.width=this.frameData.frame.w,this.height=this.frameData.frame.h,!this.atlasImage)){l=l?l:j;var q=Math.floor(j),m=Math.floor(l),r=n?-1:1,t=s?-1:1;if(n||s)ig.system.context.save(),ig.system.context.scale(r,t);ig.system.context.drawImage(this.atlasImage,Math.floor(g*j)%this.width+this.frameData.frame.x,
Math.floor(g*j/this.width)*l+this.frameData.frame.y,q,m,ig.system.getDrawPos(e)*r-(n?q:0),ig.system.getDrawPos(f)*t-(s?m:0),q,m);(n||s)&&ig.system.context.restore();ig.Image.drawCount++}}else this.parent(e,f,g,j,l,n,s)},drawTileTint:function(e,f,g,j,l,n,s,q){if(e=this.getTintedImageCanvas(e))if(n=n?n:l,this.loaded&&!(l>this.width||n>this.height)){var m=ig.system.scale,r=Math.floor(l*m),t=Math.floor(n*m),u=s?-1:1,v=q?-1:1;if(s||q)ig.system.context.save(),ig.system.context.scale(u,v);ig.system.context.drawImage(e,
Math.floor(j*l)%this.width*m,Math.floor(j*l/this.width)*n*m,r,t,ig.system.getDrawPos(f)*u-(s?r:0),ig.system.getDrawPos(g)*v-(q?t:0),r,t);(s||q)&&ig.system.context.restore();ig.Image.drawCount++}},drawTint:function(e,f,g,j,l,n,s,q,m){if(e=this.getTintedImageCanvas(e))n=n?n:this.width,s=s?s:this.height,ig.system.context.drawImage(e,j?j:0,l?l:0,n,s,ig.system.getDrawPos(f),ig.system.getDrawPos(g),q?q:n,m?m:s),ig.Image.drawCount++},getTintedImageCanvas:function(e){if(!this.tintCache[e]){if(ig.packer.isImageInAtlas(this.path)&&
!this.atlasImage&&(this.atlasImage=ig.packer.getAtlasImage(this.path),this.frameData=ig.packer.getFrameData(this.path),this.width=this.frameData.frame.w,this.height=this.frameData.frame.h,!this.atlasImage))return;var f=ig.$new("canvas");f.width=this.width;f.height=this.height;this.atlasImage?f.getContext("2d").drawImage(this.atlasImage,this.frameData.frame.x,this.frameData.frame.y,this.width,this.height,0,0,this.width,this.height):f.getContext("2d").drawImage(this.data,0,0,this.width,this.height,
0,0,this.width,this.height);for(var g=f.getContext("2d"),j=g.getImageData(0,0,this.width,this.height),l=j.data,n,s=l.length,q,m,r,t,u=parseInt(e.substr(1,2),16)/255,v=parseInt(e.substr(3,2),16)/255,x=parseInt(e.substr(5,2),16)/255,E=0;E<s;E+=4)n=l[E+3]/255,t=n+1-1*n,q=l[E]/255*n,m=l[E+1]/255*n,r=l[E+2]/255*n,t=255/t,l[E]=(q*u+u*(1-n))*t,l[E+1]=(m*v+v*(1-n))*t,l[E+2]=(r*x+x*(1-n))*t;g.putImageData(j,0,0);this.tintCache[e]=f}return this.tintCache[e]}})});ig.baked=!0;
ig.module("plugins.packer.packer-animation-injector").requires("impact.image","impact.animation").defines(function(){ig.Animation.inject({tint:null,draw:function(e,f){if(this.tint){var g=Math.max(this.sheet.width,this.sheet.height);e>ig.system.width||f>ig.system.height||(0>e+g||0>f+g)||(1!=this.alpha&&(ig.system.context.globalAlpha=this.alpha),0==this.angle?this.sheet.image.drawTileTint(this.tint,e,f,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y):(ig.system.context.save(),ig.system.context.translate(ig.system.getDrawPos(e+
this.pivot.x),ig.system.getDrawPos(f+this.pivot.y)),ig.system.context.rotate(this.angle),this.sheet.image.drawTileTint(this.tint,-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y),ig.system.context.restore()),1!=this.alpha&&(ig.system.context.globalAlpha=1))}else this.parent(e,f)}})});ig.baked=!0;
ig.module("plugins.packer.packer-plugin").requires("plugins.packer.packer-image-injector","plugins.packer.packer-animation-injector").defines(function(){ig.AtlasImage=ig.Class.extend({init:function(e){this.path=e},load:function(e){this.loadCallback=e||null;this.data=new Image;this.data.onload=this.onload.bind(this);this.data.onerror=this.onerror.bind(this);this.data.src=ig.prefix+this.path+ig.nocache},onload:function(){this.loaded=!0;ig.packer.refreshImageLoadedStatus();this.loadCallback&&this.loadCallback(this.path,
!0)},onerror:function(){this.error=!0;this.loadCallback&&this.loadCallback(this.path,!1)}});ig.packer={textureJson:[],textureAtlas:[],jsonLoadStatus:[],atlasLoadStatus:[],textureExistStatus:[],pathMap:{},initCallback:null,initPacker:function(e){if(window.packerplugin&&0<packerplugin.textures.length){console.log("Packer Plugin 1.1.6 is enabled, loading "+packerplugin.textures.length+" texture atlases...");ig.packer.initCallback=e;for(e=0;e<packerplugin.textures.length;e++)this.textureExistStatus.push(1);
this.loadAllJson()}else console.log("Packer Plugin 1.1.6 is disabled, loading individual images..."),e()},loadAllJson:function(){for(var e=0;e<ig.packer.textureExistStatus.length;e++)1==ig.packer.textureExistStatus[e]&&(ig.packer.textureJson.push(null),ig.packer.textureAtlas.push(null),ig.packer.jsonLoadStatus.push(1),ig.packer.atlasLoadStatus.push(0),ig.packer.textureJson[e]=JSON.parse(window.packerplugin.json[packerplugin.textures[e]]));ig.packer.onLoadJsonComplete()},onLoadJsonComplete:function(){for(var e=
0;e<ig.packer.textureJson.length;e++){var f=ig.packer.textureJson[e],g;for(g in f.frames)ig.packer.pathMap[g]={path:g,textureIndex:e};f="media/graphics/packed/"+packerplugin.textures[e]+".png";0<=packerplugin.textures[e].indexOf("big-jpg")&&(f="media/graphics/packed/"+packerplugin.textures[e]+".jpg");f=new ig.AtlasImage(f);ig.packer.textureAtlas[e]=f;ig.addResource(f)}ig.packer.initCallback()},isImageInAtlas:function(e){return Object.hasOwnProperty.call(ig.packer.pathMap,e)?!0:!1},refreshImageLoadedStatus:function(){for(var e in ig.Image.cache)if(Object.hasOwnProperty.call(ig.Image.cache,
e)){var f=ig.Image.cache[e];ig.packer.isImageInAtlas(f.path)&&(f.loaded=ig.packer.isImageLoadedForPath(f.path))}},isImageLoadedForPath:function(e){return ig.packer.textureAtlas[ig.packer.pathMap[e].textureIndex].loaded?!0:!1},getAtlasImage:function(e){e=ig.packer.pathMap[e].textureIndex;return!ig.packer.textureAtlas[e].loaded?null:ig.packer.textureAtlas[e].data},getFrameData:function(e){return ig.packer.textureJson[ig.packer.pathMap[e].textureIndex].frames[e]}}});ig.baked=!0;
ig.module("plugins.patches.webkit-image-smoothing-patch").defines(function(){ig.System&&(ig.System.SCALE={CRISP:function(e,f){f.imageSmoothingEnabled=f.msImageSmoothingEnabled=f.mozImageSmoothingEnabled=f.oImageSmoothingEnabled=!1;e.style.imageRendering="-moz-crisp-edges";e.style.imageRendering="-o-crisp-edges";e.style.imageRendering="-webkit-optimize-contrast";e.style.imageRendering="crisp-edges";e.style.msInterpolationMode="nearest-neighbor"},SMOOTH:function(e,f){f.imageSmoothingEnabled=f.msImageSmoothingEnabled=
f.mozImageSmoothingEnabled=f.oImageSmoothingEnabled=!0;e.style.imageRendering="";e.style.msInterpolationMode=""}},ig.System.scaleMode=ig.System.SCALE.SMOOTH)});ig.baked=!0;
ig.module("plugins.patches.windowfocus-onMouseDown-patch").defines(function(){var e=!1;try{e=window.self!==window.top,!1===e&&(e=0<window.frames.length)}catch(f){e=!0}ig.Input.inject({keydown:function(f){var j=f.target.tagName;if(!("INPUT"==j||"TEXTAREA"==j))if(j="keydown"==f.type?f.keyCode:2==f.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1,e&&0>j&&window.focus(),("touchstart"==f.type||"mousedown"==f.type)&&this.mousemove(f),j=this.bindings[j])this.actions[j]=!0,this.locks[j]||(this.presses[j]=!0,this.locks[j]=
!0),f.stopPropagation(),f.preventDefault()}})});ig.baked=!0;
ig.module("plugins.handlers.dom-handler").defines(function(){ig.DomHandler=ig.Class.extend({JQUERYAVAILABLE:!1,init:function(){this.JQUERYAVAILABLE=this._jqueryAvailable()},_jqueryAvailable:function(){return"undefined"!==typeof jQuery},addEvent:function(e,f,g,j){if(this.JQUERYAVAILABLE)e.on(f,g);else e.addEventListener(f,g,j)},create:function(e){return this.JQUERYAVAILABLE?$("<"+e+">"):ig.$new(e)},getElementByClass:function(e){return this.JQUERYAVAILABLE?$("."+e):document.getElementsByClassName(e)},
getElementById:function(e){return this.JQUERYAVAILABLE?0<$(e).length?$(e):null:ig.$(e)},appendChild:function(e,f){this.JQUERYAVAILABLE?e.append(f):e.appendChild(f)},appendToBody:function(e){this.JQUERYAVAILABLE?$("body").append(e):document.body.appendChild(e)},resize:function(e,f,g){if(this.JQUERYAVAILABLE)e.width(f.toFixed(2)),e.height(g.toFixed(2));else{var j=e.style.visibility;f="width:"+f.toFixed(2)+"px; height:"+g.toFixed(2)+"px;";this.attr(e,"style",f);e.style.visibility=j}},resizeOffsetLeft:function(e,
f,g,j){if(this.JQUERYAVAILABLE)e.width(f.toFixed(2)),e.height(g.toFixed(2)),e.css("left",j);else{var l=e.style.visibility;f="width:"+f.toFixed(2)+"px; height:"+g.toFixed(2)+"px; left: "+j.toFixed(2)+"px;";this.attr(e,"style",f);e.style.visibility=l}},css:function(e,f){if(this.JQUERYAVAILABLE)e.css(f);else{var g="",j;for(j in f)g+=j+":"+f[j]+";";this.attr(e,"style",g)}},getOffsets:function(e){return this.JQUERYAVAILABLE?(e=e.offset(),{left:e.left,top:e.top}):{left:e.offsetLeft,top:e.offsetTop}},attr:function(e,
f,g){if("undefined"===typeof g)return this.JQUERYAVAILABLE?e.attr(f):e.getAttribute(f);this.JQUERYAVAILABLE?e.attr(f,g):e.setAttribute(f,g)},show:function(e){this.JQUERYAVAILABLE?(e.show(),e.css("visibility","visible")):e&&(e.style?e.style.visibility="visible":e[0]&&(e[0].style.visibility="visible"))},hide:function(e){this.JQUERYAVAILABLE?(e.hide(),e.css("visibility","hidden")):e&&(e.style?e.style.visibility="hidden":e[0]&&(e[0].style.visibility="hidden"))},getQueryVariable:function(e){for(var f=
window.location.search.substring(1).split("&"),g=0;g<f.length;g++){var j=f[g].split("=");if(decodeURIComponent(j[0])==e)return decodeURIComponent(j[1])}},forcedDeviceDetection:function(){var e=this.getQueryVariable("device");if(e)switch(e){case "mobile":console.log("serving mobile version ...");ig.ua.mobile=!0;break;case "desktop":console.log("serving desktop version ...");ig.ua.mobile=!1;break;default:console.log("serving universal version ...")}else console.log("serving universal version ...")},
forcedDeviceRotation:function(){var e=this.getQueryVariable("force-rotate");if(e)switch(e){case "portrait":console.log("force rotate to portrait");window.orientation=0;break;case "landscape":console.log("force rotate to horizontal");window.orientation=90;break;default:alert("wrong command/type in param force-rotate. Defaulting value to portrait"),window.orientation=0}}})});ig.baked=!0;
ig.module("plugins.data.vector").defines(function(){Vector2=ig.Class.extend({x:null,y:null,valType:"number",init:function(e,f){typeof e===this.valType&&typeof f===this.valType&&(this.x=e,this.y=f)},row:function(e){typeof e===this.valType&&(this.y=e);return this.y},col:function(e){typeof e===this.valType&&(this.x=e);return this.x},magnitude:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},unitVector:function(){var e=this.magnitude();if(0<e)return new Vector2(this.x/e,this.y/e);throw"Divide by 0 error in unitVector function of vector:"+
this;},add:function(e){return new Vector2(this.x+e.x,this.y+e.y)},subtract:function(e){return new Vector2(this.x-e.x,this.y-e.y)},dotProduct:function(e){return this.x*e.x+this.y*e.y},multiplyByScalar:function(e){return new Vector2(e*this.x,e*this.y)}})});ig.baked=!0;
ig.module("plugins.handlers.size-handler").requires("plugins.data.vector").defines(function(){ig.SizeHandler=ig.Class.extend({portraitMode:!0,desktop:{actualSize:new Vector2(window.innerWidth,window.innerHeight),actualResolution:new Vector2(540,960)},mobile:{actualSize:new Vector2(window.innerWidth,window.innerHeight),actualResolution:new Vector2(540,960)},windowSize:new Vector2(window.innerWidth,window.innerHeight),scaleRatioMultiplier:new Vector2(1,1),sizeRatio:new Vector2(1,1),scale:1,domHandler:null,
dynamicClickableEntityDivs:{},coreDivsToResize:["#canvas","#play","#orientate"],adsToResize:{MobileAdInGamePreroll:{"box-width":_SETTINGS.Ad.Mobile.Preroll.Width+2,"box-height":_SETTINGS.Ad.Mobile.Preroll.Height+20},MobileAdInGameEnd:{"box-width":_SETTINGS.Ad.Mobile.End.Width+2,"box-height":_SETTINGS.Ad.Mobile.End.Height+20},MobileAdInGamePreroll2:{"box-width":_SETTINGS.Ad.Mobile.Preroll.Width+2,"box-height":_SETTINGS.Ad.Mobile.Preroll.Height+20},MobileAdInGameEnd2:{"box-width":_SETTINGS.Ad.Mobile.End.Width+
2,"box-height":_SETTINGS.Ad.Mobile.End.Height+20},MobileAdInGamePreroll3:{"box-width":_SETTINGS.Ad.Mobile.Preroll.Width+2,"box-height":_SETTINGS.Ad.Mobile.Preroll.Height+20},MobileAdInGameEnd3:{"box-width":_SETTINGS.Ad.Mobile.End.Width+2,"box-height":_SETTINGS.Ad.Mobile.End.Height+20}},init:function(e){this.domHandler=e;if("undefined"===typeof e)throw"undefined Dom Handler for Size Handler";this.sizeCalcs();this.eventListenerSetup();this.samsungFix()},sizeCalcs:function(){this.windowSize=new Vector2(window.innerWidth,
window.innerHeight);if(ig.ua.mobile){this.mobile.actualSize=new Vector2(window.innerWidth,window.innerHeight);var e=new Vector2(this.mobile.actualResolution.x,this.mobile.actualResolution.y);this.scaleRatioMultiplier=new Vector2(this.mobile.actualSize.x/e.x,this.mobile.actualSize.y/e.y);var f=Math.min(this.scaleRatioMultiplier.x,this.scaleRatioMultiplier.y);this.mobile.actualSize.x=e.x*this.scaleRatioMultiplier.x;this.mobile.actualSize.y=e.y*this.scaleRatioMultiplier.y}else this.desktop.actualSize=
new Vector2(window.innerWidth,window.innerHeight),e=new Vector2(this.desktop.actualResolution.x,this.desktop.actualResolution.y),this.scaleRatioMultiplier=new Vector2(this.desktop.actualSize.x/e.x,this.desktop.actualSize.y/e.y),f=Math.min(this.scaleRatioMultiplier.x,this.scaleRatioMultiplier.y),this.desktop.actualSize.x=e.x*f,this.desktop.actualSize.y=e.y*f;this.sizeRatio.x=window.innerWidth/this.mobile.actualResolution.x;this.sizeRatio.y=window.innerHeight/this.mobile.actualResolution.y},resizeLayers:function(){for(var e=
0;e<this.coreDivsToResize.length;e++){var f=ig.domHandler.getElementById(this.coreDivsToResize[e]);ig.ua.mobile?ig.domHandler.resize(f,Math.floor(ig.sizeHandler.mobile.actualSize.x),Math.floor(ig.sizeHandler.mobile.actualSize.y)):ig.domHandler.resizeOffsetLeft(f,Math.floor(ig.sizeHandler.desktop.actualSize.x),Math.floor(ig.sizeHandler.desktop.actualSize.y),Math.floor(ig.sizeHandler.windowSize.x/2-ig.sizeHandler.desktop.actualSize.x/2))}for(var g in this.adsToResize){var e=ig.domHandler.getElementById("#"+
g),f=ig.domHandler.getElementById("#"+g+"-Box"),j=(window.innerWidth-this.adsToResize[g]["box-width"])/2+"px",l=(window.innerHeight-this.adsToResize[g]["box-height"])/2+"px";e&&ig.domHandler.css(e,{width:window.innerWidth,height:window.innerHeight});f&&ig.domHandler.css(f,{left:j,top:l})}for(g in this.dynamicClickableEntityDivs){f=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y);e=ig.domHandler.getElementById("#"+g);if(ig.ua.mobile)var n=this.dynamicClickableEntityDivs[g].entity_pos_x,
s=this.dynamicClickableEntityDivs[g].entity_pos_y,l=this.dynamicClickableEntityDivs[g].width,j=this.dynamicClickableEntityDivs[g].height,q=Math.floor(n*this.scaleRatioMultiplier.x)+"px",s=Math.floor(s*this.scaleRatioMultiplier.y)+"px",l=Math.floor(l*this.scaleRatioMultiplier.x)+"px",f=Math.floor(j*this.scaleRatioMultiplier.y)+"px";else var j=ig.domHandler.getElementById("#canvas"),j=ig.domHandler.getOffsets(j),q=j.left,m=j.top,n=this.dynamicClickableEntityDivs[g].entity_pos_x,s=this.dynamicClickableEntityDivs[g].entity_pos_y,
l=this.dynamicClickableEntityDivs[g].width,j=this.dynamicClickableEntityDivs[g].height,q=Math.floor(q+n*f)+"px",s=Math.floor(m+s*f)+"px",l=Math.floor(l*f)+"px",f=Math.floor(j*f)+"px";ig.domHandler.css(e,{"float":"left",position:"absolute",left:q,top:s,width:l,height:f,"z-index":3})}$("#ajaxbar").width(this.windowSize.x);$("#ajaxbar").height(this.windowSize.y)},resize:function(){this.sizeCalcs();this.resizeLayers()},reorient:function(){console.log("changing orientation ...");if(ig.ua.mobile){var e=
this.portraitMode?window.innerHeight<window.innerWidth:window.innerHeight>window.innerWidth,f=this.domHandler.getElementById("#orientate"),g=this.domHandler.getElementById("#game");e?(this.domHandler.show(f),this.domHandler.hide(g),console.log("portrait"+window.innerWidth+","+window.innerHeight)):(this.domHandler.show(g),this.domHandler.hide(f),console.log("landscape"+window.innerWidth+","+window.innerHeight))}ig.ua.mobile?(this.resize(),this.resizeAds()):this.resize()},resizeAds:function(){for(var e in this.adsToResize){var f=
ig.domHandler.getElementById("#"+e),g=ig.domHandler.getElementById("#"+e+"-Box"),j=(window.innerWidth-this.adsToResize[e]["box-width"])/2+"px",l=(window.innerHeight-this.adsToResize[e]["box-height"])/2+"px";f&&ig.domHandler.css(f,{width:window.innerWidth,height:window.innerHeight});g&&ig.domHandler.css(g,{left:j,top:l})}},samsungFix:function(){ig.ua.android&&!(4.2>parseFloat(navigator.userAgent.slice(navigator.userAgent.indexOf("Android")+8,navigator.userAgent.indexOf("Android")+11)))&&(!(0>navigator.userAgent.indexOf("GT"))&&
!(0<navigator.userAgent.indexOf("Chrome"))&&!(0<navigator.userAgent.indexOf("Firefox")))&&(document.addEventListener("touchstart",function(e){e.preventDefault();return!1},!1),document.addEventListener("touchmove",function(e){e.preventDefault();return!1},!1),document.addEventListener("touchend",function(e){e.preventDefault();return!1},!1))},orientationInterval:null,orientationTimeout:null,orientationHandler:function(){this.reorient();window.scrollTo(0,1)},orientationDelayHandler:function(){null==this.orientationInterval&&
(this.orientationInterval=window.setInterval(this.orientationHandler.bind(this),100));null==this.orientationTimeout&&(this.orientationTimeout=window.setTimeout(function(){this.clearAllIntervals()}.bind(this),2E3))},clearAllIntervals:function(){window.clearInterval(this.orientationInterval);this.orientationInterval=null;window.clearTimeout(this.orientationTimeout);this.orientationTimeout=null},eventListenerSetup:function(){ig.ua.iOS?(window.addEventListener("orientationchange",this.orientationDelayHandler.bind(this)),
window.addEventListener("resize",this.orientationDelayHandler.bind(this))):(window.addEventListener("orientationchange",this.orientationHandler.bind(this)),window.addEventListener("resize",this.orientationHandler.bind(this)));document.ontouchmove=function(e){window.scrollTo(0,1);e.preventDefault()}}})});ig.baked=!0;
ig.module("plugins.handlers.api-handler").defines(function(){ig.ApiHandler=ig.Class.extend({apiAvailable:{MJSPreroll:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS&&_SETTINGS.Ad.Mobile.Preroll.Enabled&&MobileAdInGamePreroll.Initialize()},MJSHeader:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS.Ad.Mobile.Header.Enabled&&MobileAdInGameHeader.Initialize()},MJSFooter:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS.Ad.Mobile.Footer.Enabled&&MobileAdInGameFooter.Initialize()},
MJSEnd:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS.Ad.Mobile.End.Enabled&&MobileAdInGameEnd.Initialize()}},run:function(e,f){if(this.apiAvailable[e])this.apiAvailable[e](f)}})});ig.baked=!0;
ig.module("plugins.audio.sound-player").defines(function(){SoundPlayer=ig.Class.extend({tagName:"SoundPlayer",stayMuteFlag:!1,debug:!1,init:function(){this.debug&&console.log(this.tagName)},play:function(e){this.debug&&console.log("play sound ",e)},stop:function(){this.debug&&console.log("stop sound ")},volume:function(){this.debug&&console.log("set volume")},mute:function(e){this.debug&&console.log("mute");"undefined"===typeof e?this.stayMuteFlag=!0:e&&(this.stayMuteFlag=!0)},unmute:function(e){this.debug&&
console.log("unmute");"undefined"===typeof e?this.stayMuteFlag=!1:e&&(this.stayMuteFlag=!1)}})});ig.baked=!0;
ig.module("plugins.audio.impact-music-player").requires("plugins.audio.sound-player").defines(function(){ImpactMusicPlayer=SoundPlayer.extend({tagName:"ImpactMusicPlayer",bgmPlaying:!1,soundList:{},init:function(e,f){this.parent(e,f);for(var g in e)this.soundList[g]=g,ig.music.add(e[g].path+".*",g);f&&f.loop&&(ig.music.loop=f.loop)},play:function(e){this.stayMuteFlag||(this.bgmPlaying=!0,"undefined"===typeof e?ig.music.play(e):ig.music.play())},stop:function(){this.bgmPlaying=!1;ig.music.pause()},
volume:function(e){console.log("impactmusic:",e);ig.music.volume=0>e?0:isNaN(e)?1:1<e?1:e},getVolume:function(){return ig.music.volume},mute:function(e){this.parent(e);this.bgmPlaying&&this.stop()},unmute:function(e){this.parent(e);this.play()}})});ig.baked=!0;
ig.module("plugins.audio.impact-sound-player").requires("plugins.audio.sound-player").defines(function(){ImpactSoundPlayer=SoundPlayer.extend({tagName:"ImpactSoundPlayer",soundList:{},init:function(e,f){this.parent(e,f);for(var g in e){var j=new ig.Sound(e[g].path+".*");this.soundList[g]=j}},play:function(e){this.stayMuteFlag||("object"===typeof e?(console.log(e+" exists"),e.play()):"string"===typeof e&&this.soundList[e].play())},stop:function(e){this.parent(e);e.stop()},volume:function(e){ig.soundManager.volume=
0>e?0:isNaN(e)?1:1<e?1:e},getVolume:function(){return ig.soundManager.volume},mute:function(e){this.parent(e);ig.Sound.enabled=!1},unmute:function(e){this.parent(e);ig.Sound.enabled=!0}})});ig.baked=!0;
ig.module("plugins.audio.howler-player").requires("plugins.audio.sound-player").defines(function(){HowlerPlayer=SoundPlayer.extend({tagName:"HowlerPlayer",soundList:{},init:function(e,f){this.parent(e,f);for(var g in e){var j=e[g].path,j=new Howl({src:[j+"."+ig.Sound.FORMAT.OGG.ext,j+"."+ig.Sound.FORMAT.MP3.ext]});this.soundList[g]=j}},play:function(e){this.stayMuteFlag||("object"===typeof e?e.play():"string"===typeof e&&this.soundList[e].play())},stop:function(e){this.parent(e);"object"===typeof e?
e.stop():"string"===typeof e&&this.soundList[e].stop()},volume:function(e){for(var f in this.soundList){if(0>e){this.soundList[f].volume(0);break}isNaN(e)?this.soundList[f].volume(1):1<e?this.soundList[f].volume(1):this.soundList[f].volume(e)}},getVolume:function(){for(var e in this.soundList)return this.soundList[e].volume()},mute:function(e){this.parent(e);Howler.mute(!0)},unmute:function(e){this.parent(e);Howler.mute(!1)}})});ig.baked=!0;
ig.module("plugins.audio.howler-music-player").requires("plugins.audio.sound-player").defines(function(){HowlerMusicPlayer=SoundPlayer.extend({tagName:"HowlerMusicPlayer",bgmPlaying:!1,soundList:{},init:function(e,f){this.parent(e,f);for(var g in e){var j=e[g].path,j=new Howl({src:[j+"."+ig.Sound.FORMAT.OGG.ext,j+"."+ig.Sound.FORMAT.MP3.ext],loop:!0,autoplay:!1,onend:function(){}.bind(this)});this.soundList[g]=j}},play:function(e){if(!this.stayMuteFlag&&!this.bgmPlaying)if("object"===typeof e)this.bgmPlaying=
!0,e.play();else if("string"===typeof e)this.bgmPlaying=!0,this.soundList[e].play();else for(var f in this.soundList){this.soundList[f].play();this.bgmPlaying=!0;break}},stop:function(e){this.parent(e);if(this.bgmPlaying){for(var f in this.soundList)this.soundList[f].stop();this.bgmPlaying=!1}},volume:function(e){console.log("howler",e);for(var f in this.soundList){if(0>e){this.soundList[f].volume(0);break}isNaN(e)?this.soundList[f].volume(1):1<e?this.soundList[f].volume(1):this.soundList[f].volume(e)}},
getVolume:function(){for(var e in this.soundList)return this.soundList[e].volume()},mute:function(e){this.parent(e);Howler.mute(!0)},unmute:function(e){this.parent(e);Howler.mute(!1)}})});ig.baked=!0;
ig.module("plugins.audio.jukebox-player").requires("plugins.audio.sound-player").defines(function(){JukeboxPlayer=SoundPlayer.extend({tagName:"JukeboxPlayer",bgmPlaying:!1,soundList:{},jukeboxPlayer:null,pausePosition:0,premuteVolume:0,minVolume:0.001,init:function(e,f){this.parent(e,f);for(var g in e){this.soundList[g]=g;var j=e[g].path;this.jukeboxPlayer=new jukebox.Player({resources:[j+"."+ig.Sound.FORMAT.OGG.ext,j+"."+ig.Sound.FORMAT.MP3.ext],autoplay:!1,spritemap:{music:{start:e[g].startMp3,
end:e[g].endMp3,loop:!0}}})}},play:function(){this.stayMuteFlag||(this.bgmPlaying=!0,this.pausePosition?(console.log("resume"),this.jukeboxPlayer.resume(this.pausePosition)):(console.log("play"),this.jukeboxPlayer.play(this.jukeboxPlayer.settings.spritemap.music.start,!0)),this.premuteVolume=this.getVolume())},stop:function(){this.bgmPlaying=!1;this.pausePosition=this.jukeboxPlayer.pause()},volume:function(e){console.log("jukebox:",e);0>=e?this.jukeboxPlayer.setVolume(this.minVolume):isNaN(e)?this.jukeboxPlayer.setVolume(1):
1<e?this.jukeboxPlayer.setVolume(1):this.jukeboxPlayer.setVolume(e)},getVolume:function(){return this.jukeboxPlayer.getVolume()},mute:function(e){this.parent(e);this.bgmPlaying&&(console.log("jukebox",this.premuteVolume),this.stayMuteFlag||(this.premuteVolume=this.getVolume()),this.jukeboxPlayer.pause(),this.jukeboxPlayer.setVolume(this.minVolume))},unmute:function(e){this.parent(e);this.stayMuteFlag||(console.log("jukebox",this.premuteVolume),this.jukeboxPlayer.setVolume(this.premuteVolume),this.jukeboxPlayer.resume())}})});
ig.baked=!0;
ig.module("plugins.audio.webaudio-music-player").requires("plugins.audio.sound-player").defines(function(){WebaudioMusicPlayer=SoundPlayer.extend({tagName:"WebaudioMusicPlayer",bgmPlaying:!1,isSupported:!1,muteFlag:!1,pausedTime:0,webaudio:null,useHTML5Audio:!1,audio:null,inactiveAudio:null,codecs:null,reinitOnPlay:!1,inputList:null,_volume:1,soundList:{},init:function(e){this.webaudio={compatibility:{},gainNode:null,buffer:null,source_loop:{},source_once:{}};try{Howler&&Howler.ctx?this.webaudio.context=Howler.ctx:
ig&&ig.webaudio_ctx?this.webaudio.context=ig.webaudio_ctx:(this.AudioContext=window.AudioContext||window.webkitAudioContext,this.webaudio.context=new this.AudioContext,ig.webaudio_ctx=this.webaudio.context),this.isSupported=!0}catch(f){console.log("Web Audio API not supported in this browser."),this.webaudio=null,this.useHTML5Audio=!0}if(this.useHTML5Audio)if("undefined"!==typeof Audio)try{new Audio}catch(g){this.useHTML5Audio=!1}else this.useHTML5Audio=!1;this.useHTML5Audio&&(this.audio=new Audio,
this.isSupported=!0,this.initHTML5Audio(e));if(!this.isSupported)return null;this.webaudio&&(this.inputList=e,this.initWebAudio(e))},initWebAudio:function(e){ig.ua.iOS&&this.initIOSWebAudioUnlock();this.webaudio.gainNode=this.webaudio.context.createGain();this.webaudio.gainNode.connect(this.webaudio.context.destination);this.webaudio.gainNode.gain.value=this._volume;this.webaudio.buffer=null;var f="start",g="stop",j=this.webaudio.context.createBufferSource();"function"!==typeof j.start&&(f="noteOn");
this.webaudio.compatibility.start=f;"function"!==typeof j.stop&&(g="noteOff");this.webaudio.compatibility.stop=g;for(var l in e){this.soundList[l]=l;var g=e[l].path,f=g+"."+ig.Sound.FORMAT.MP3.ext,n=g+"."+ig.Sound.FORMAT.OGG.ext;ig.ua.mobile?ig.ua.iOS&&(n=f):(g=navigator.userAgent.toLowerCase(),-1!=g.indexOf("safari")&&-1>=g.indexOf("chrome")&&(n=f),g.indexOf("win64")&&(n=f));var s=new XMLHttpRequest;s.open("GET",n,!0);s.responseType="arraybuffer";s.onload=function(){this.webaudio.context.decodeAudioData(s.response,
function(e){this.webaudio.buffer=e;this.webaudio.source_loop={};this.bgmPlaying?this.play(null,!0):this.stop()}.bind(this),function(){console.log('Error decoding audio "'+n+'".')})}.bind(this);s.send();if(4==s.readyState&&"undefined"!==typeof Audio){this.useHTML5Audio=!0;try{new Audio}catch(q){this.useHTML5Audio=!1}this.useHTML5Audio&&(console.log("Using HTML5 Audio"),this.webaudio=null,this.audio=new Audio,this.isSupported=!0,this.initHTML5Audio(e))}break}},initIOSWebAudioUnlock:function(){if(this.webaudio){webaudio=
this.webaudio;var e=function(){var f=webaudio.context,g=f.createBuffer(1,1,22050),j=f.createBufferSource();j.buffer=g;j.connect(f.destination);"undefined"===typeof j.start?j.noteOn(0):j.start(0);setTimeout(function(){(j.playbackState===j.PLAYING_STATE||j.playbackState===j.FINISHED_STATE)&&window.removeEventListener("touchend",e,!1)}.bind(this),0)};window.addEventListener("touchend",e,!1)}},initHTML5Audio:function(e){if(this.useHTML5Audio&&this.audio){var f=this.audio;this.codecs={};this.codecs={mp3:!!f.canPlayType("audio/mpeg;").replace(/^no$/,
""),opus:!!f.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!f.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!f.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!f.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(f.canPlayType("audio/x-m4a;")||f.canPlayType("audio/m4a;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(f.canPlayType("audio/x-mp4;")||f.canPlayType("audio/mp4;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!f.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,
"")};this.is={ff:Boolean(null!=window.mozInnerScreenX&&/firefox/.test(navigator.userAgent.toLowerCase())),ie:Boolean(document.all&&!window.opera),opera:Boolean(window.opera),chrome:Boolean(window.chrome),safari:Boolean(!window.chrome&&/safari/.test(navigator.userAgent.toLowerCase())&&window.getComputedStyle&&!window.globalStorage&&!window.opera)};this.playDelay=-60;this.stopDelay=30;this.is.chrome&&(this.playDelay=-25);this.is.chrome&&(this.stopDelay=25);this.is.ff&&(this.playDelay=-25);this.is.ff&&
(this.stopDelay=85);this.is.opera&&(this.playDelay=5);this.is.opera&&(this.stopDelay=0);for(var g in e){this.soundList[g]=g;var j=e[g].path,f=j+"."+ig.Sound.FORMAT.OGG.ext,j=j+"."+ig.Sound.FORMAT.MP3.ext,l=null;this.codecs[ig.Sound.FORMAT.OGG.ext.toLowerCase()]?l=f:this.codecs[ig.Sound.FORMAT.MP3.ext.toLowerCase()]&&(l=j);if(l){ig.ua.mobile?ig.ua.iOS&&(l=j):(e=navigator.userAgent.toLowerCase(),-1!=e.indexOf("safari")&&-1>=e.indexOf("chrome")&&(l=j));this.audio.addEventListener("error",function(){this.audio.error&&
4===this.audio.error.code&&(this.isSupported=!1)},!1);this.audio.src=l;this.audio._pos=0;this.audio.preload="auto";this.audio.volume=this._volume;this.inactiveAudio=new Audio;this.inactiveAudio.src=l;this.inactiveAudio._pos=0;this.inactiveAudio.preload="auto";this.inactiveAudio.volume=this._volume;this.inactiveAudio.load();var n=function(){this._duration=this.audio.duration;this._loaded||(this._loaded=!0);this.bgmPlaying?this.play(null,!0):this.stop();this.audio.removeEventListener("canplaythrough",
n,!1)}.bind(this);this.audio.addEventListener("canplaythrough",n,!1);this.audio.load();break}}}},play:function(e,f){if(this.isSupported)if(this.bgmPlaying=!0,this.webaudio){if(!f&&this.reinitOnPlay&&this.webaudio.source_loop.buffer==this.webaudio.buffer){if(this.webaudio.source_loop._playing&&(this.webaudio.source_loop[this.webaudio.compatibility.stop](0),this.webaudio.source_loop._playing=!1,this.pausedTime+=this.webaudio.context.currentTime-this.webaudio.source_loop._startTime,this.pausedTime%=
this.webaudio.source_loop.buffer.duration,this.webaudio.source_loop._startTime=0,"noteOn"===this.webaudio.compatibility.start))this.webaudio.source_once[this.webaudio.compatibility.stop](0);try{this.webaudio.context.close();this.webaudio.context=new this.AudioContext;this.webaudio.gainNode=this.webaudio.context.createGain();this.webaudio.gainNode.connect(this.webaudio.context.destination);this.webaudio.gainNode.gain.value=this._volume;var g="start",j="stop",l=this.webaudio.context.createBufferSource();
"function"!==typeof l.start&&(g="noteOn");this.webaudio.compatibility.start=g;"function"!==typeof l.stop&&(j="noteOff");this.webaudio.compatibility.stop=j;this.webaudio.source_loop={};this.play(null,!0)}catch(n){}}if(this.webaudio.buffer){if(!this.muteFlag&&(this.bgmPlaying=!0,!this.webaudio.source_loop._playing)){this.webaudio.source_loop=this.webaudio.context.createBufferSource();this.webaudio.source_loop.buffer=this.webaudio.buffer;this.webaudio.source_loop.loop=!0;this.webaudio.source_loop.connect(this.webaudio.gainNode);
if(null==e||isNaN(e))e=0,this.pausedTime&&(e=this.pausedTime);this.webaudio.source_loop._startTime=this.webaudio.context.currentTime;if("noteOn"===this.webaudio.compatibility.start)this.webaudio.source_once=this.webaudio.context.createBufferSource(),this.webaudio.source_once.buffer=this.webaudio.buffer,this.webaudio.source_once.connect(this.webaudio.gainNode),this.webaudio.source_once.noteGrainOn(0,e,this.webaudio.buffer.duration-e),this.webaudio.source_loop[this.webaudio.compatibility.start](this.webaudio.context.currentTime+
(this.webaudio.buffer.duration-e));else this.webaudio.source_loop[this.webaudio.compatibility.start](0,e);this.webaudio.source_loop._playing=!0}}else this.bgmPlaying=!0}else if(this.audio){var s=this.audio;if(!this.muteFlag)if(this.bgmPlaying=!0,isNaN(e)&&(e=0,this.pausedTime&&(e=this.pausedTime)),g=this._duration-e,this._onEndTimer&&(clearTimeout(this._onEndTimer),this._onEndTimer=null),this._onEndTimer=setTimeout(function(){this.audio.currentTime=0;this.audio.pause();this.pausedTime=0;if(this.inactiveAudio){var e=
this.audio;this.audio=this.inactiveAudio;this.inactiveAudio=e}this.play()}.bind(this),1E3*g+this.playDelay),4===s.readyState||!s.readyState&&navigator.isCocoonJS)s.readyState=4,s.currentTime=e,s.muted=this.muteFlag||s.muted,s.volume=this._volume,setTimeout(function(){s.play()},0);else{clearTimeout(this._onEndTimer);this._onEndTimer=null;var q=function(){typeof("function"==this.play)&&(this.play(),s.removeEventListener("canplaythrough",q,!1))}.bind(this);s.addEventListener("canplaythrough",q,!1)}}},
stop:function(){this.bgmPlaying=!1;if(this.isSupported)if(this.webaudio){if(this.webaudio.source_loop._playing&&(this.webaudio.source_loop[this.webaudio.compatibility.stop](0),this.webaudio.source_loop._playing=!1,this.pausedTime+=this.webaudio.context.currentTime-this.webaudio.source_loop._startTime,this.pausedTime%=this.webaudio.source_loop.buffer.duration,this.webaudio.source_loop._startTime=0,"noteOn"===this.webaudio.compatibility.start))this.webaudio.source_once[this.webaudio.compatibility.stop](0)}else if(this.audio){var e=
this.audio;4==e.readyState&&(this.pausedTime=e.currentTime,e.currentTime=0,e.pause(),clearTimeout(this._onEndTimer),this._onEndTimer=null)}},volume:function(e){if(isNaN(e)||null==e)return this.getVolume();this.isSupported&&(this._volume=e,0>this._volume?this._volume=0:1<this._volume&&(this._volume=1),this.webaudio?this.webaudio.gainNode&&(this.webaudio.gainNode.gain.value=this._volume):this.audio&&(this.audio.volume=this._volume,this.inactiveAudio&&(this.inactiveAudio.volume=this._volume)))},getVolume:function(){return!this.isSupported?
0:this._volume},mute:function(e){this.parent(e);!1==this.muteFlag&&(this.muteFlag=!0,this.bgmPlaying&&(this.stop(),this.bgmPlaying=!0))},unmute:function(e){this.parent(e);!this.stayMuteFlag&&!0==this.muteFlag&&(this.muteFlag=!1,this.bgmPlaying&&this.play())}})});ig.baked=!0;
ig.module("plugins.audio.sound-info").defines(function(){SoundInfo=ig.Class.extend({FORMATS:{OGG:".ogg",MP3:".mp3"},sfx:{kittyopeningSound:{path:"media/audio/opening/kittyopening"},staticSound:{path:"media/audio/play/static"},openingSound:{path:"media/audio/opening/opening"},clear:{path:"media/audio/clear"},drop:{path:"media/audio/drop"},slideUp:{path:"media/audio/slide-up"},coin:{path:"media/audio/coin"},click:{path:"media/audio/click"}},bgm:{background:{path:"media/audio/bgm",startOgg:0,endOgg:21.463,
startMp3:0,endMp3:21.463}}})});ig.baked=!0;
ig.module("plugins.audio.sound-handler").requires("plugins.audio.impact-music-player","plugins.audio.impact-sound-player","plugins.audio.howler-player","plugins.audio.howler-music-player","plugins.audio.jukebox-player","plugins.audio.webaudio-music-player","plugins.audio.sound-info").defines(function(){ig.SoundHandler=ig.Class.extend({bgmPlayer:null,sfxPlayer:null,focusBlurMute:!1,soundInfo:new SoundInfo,init:function(){console.log("Initiating sound handler");this.initWindowHandler();ig.ua.mobile?
(this.initPowerButtonFix(),this.bgmPlayer=new WebaudioMusicPlayer(this.soundInfo.bgm,{loop:!0}),this.bgmPlayer.isSupported||(this.bgmPlayer=new JukeboxPlayer(this.soundInfo.bgm,{loop:!0}))):(this.bgmPlayer=new WebaudioMusicPlayer(this.soundInfo.bgm,{loop:!0}),this.bgmPlayer.isSupported||(this.bgmPlayer=new ImpactMusicPlayer(this.soundInfo.bgm,{loop:!0})));this.sfxPlayer=new HowlerPlayer(this.soundInfo.sfx)},checkBGM:function(){return this.bgmPlayer.stayMuteFlag},checkSFX:function(){return this.sfxPlayer.stayMuteFlag},
muteSFX:function(e){this.sfxPlayer&&this.sfxPlayer.mute(e)},muteBGM:function(e){this.bgmPlayer&&this.bgmPlayer.mute(e)},unmuteSFX:function(e){this.sfxPlayer&&this.sfxPlayer.unmute(e)},unmuteBGM:function(e){this.bgmPlayer&&this.bgmPlayer.unmute(e)},muteAll:function(e){this.muteSFX(e);this.muteBGM(e)},unmuteAll:function(e){this.unmuteSFX(e);this.unmuteBGM(e)},forceMuteAll:function(){this.focusBlurMute||this.muteAll(!1);this.focusBlurMute=!0},forceUnMuteAll:function(){this.focusBlurMute&&(this.unmuteAll(!1),
this.focusBlurMute=!1)},initWindowHandler:function(){"true"===ig.domHandler.getQueryVariable("webview")?($(window).focus(function(){ig.soundHandler&&ig.soundHandler.forceUnMuteAll()}),$(window).blur(function(){ig.soundHandler&&ig.soundHandler.forceMuteAll()})):(window.onfocus=function(){ig.soundHandler&&ig.soundHandler.forceUnMuteAll()},window.onblur=function(){ig.soundHandler&&ig.soundHandler.forceMuteAll()})},initPowerButtonFix:function(){var e=this.getHiddenProp();e&&(e=e.replace(/[H|h]idden/,
"")+"visibilitychange",document.addEventListener(e,this.visChange));window.addEventListener("pagehide",function(){ig.soundHandler&&ig.soundHandler.forceMuteAll()},!1);window.addEventListener("pageshow",function(){ig.soundHandler&&ig.soundHandler.forceUnMuteAll()},!1)},getHiddenProp:function(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var f=0;f<e.length;f++)if(e[f]+"Hidden"in document)return e[f]+"Hidden";return null},isHidden:function(){var e=this.getHiddenProp();return!e?
!1:document[e]},visChange:function(){ig.soundHandler.isHidden()?ig.soundHandler&&ig.soundHandler.forceMuteAll():ig.soundHandler&&ig.soundHandler.forceUnMuteAll()},saveVolume:function(){this.sfxPlayer&&ig.game.io.storageSet("soundVolume",this.sfxPlayer.getVolume());this.bgmPlayer&&ig.game.io.storageSet("musicVolume",this.bgmPlayer.getVolume())},forceLoopBGM:function(){var e;if(!this.focusBlurMute&&this.bgmPlayer.bgmPlaying&&this.bgmPlayer){var f=this.bgmPlayer.jukeboxPlayer;if(f){null!=window.mozInnerScreenX&&
/firefox/.test(navigator.userAgent.toLowerCase());e=Boolean(window.chrome);!window.chrome&&/safari/.test(navigator.userAgent.toLowerCase());var g=0.1;ig.ua.mobile&&(g=0.115,ig.ua.android&&(g=0.45,e&&(g=0.3)));f.settings.spritemap.music&&(e=f.settings.spritemap.music.end-g,f.getCurrentTime()>=e&&(e=f.settings.spritemap.music.start,ig.ua.android?this.forcelooped||(f.play(e,!0),this.forcelooped=!0,setTimeout(function(){ig.soundHandler.forcelooped=!1},g)):f.setCurrentTime(e)))}else"ImpactMusicPlayer"==
this.bgmPlayer.tagName&&(null!=window.mozInnerScreenX&&/firefox/.test(navigator.userAgent.toLowerCase()),e=Boolean(window.chrome),!window.chrome&&/safari/.test(navigator.userAgent.toLowerCase()),g=0.1,ig.ua.mobile&&(g=0.115,ig.ua.android&&(g=0.45,e&&(g=0.3))),f=0,"mp3"==ig.soundManager.format.ext&&(f=0.05),ig.music.currentTrack&&(e=ig.music.currentTrack.duration-g,ig.music.currentTrack.currentTime>=e&&(ig.ua.android?this.forcelooped||(ig.music.currentTrack.pause(),ig.music.currentTrack.currentTime=
f,ig.music.currentTrack.play(),this.forcelooped=!0,setTimeout(function(){ig.soundHandler.forcelooped=!1},g)):ig.music.currentTrack.currentTime=f)))}}})});ig.baked=!0;
ig.module("plugins.io.storage").defines(function(){ig.Storage=ig.Class.extend({staticInstantiate:function(){return!ig.Storage.instance?null:ig.Storage.instance},init:function(){ig.Storage.instance=this},isCapable:function(){return"undefined"!==typeof window.localStorage},isSet:function(e){return null!==this.get(e)},initUnset:function(e,f){null===this.get(e)&&this.set(e,f)},get:function(e){if(!this.isCapable())return null;try{return JSON.parse(localStorage.getItem(e))}catch(f){return window.localStorage.getItem(e)}},
getInt:function(e){return~~this.get(e)},getFloat:function(e){return parseFloat(this.get(e))},getBool:function(e){return!!this.get(e)},key:function(e){return this.isCapable()?window.localStorage.key(e):null},set:function(e,f){if(!this.isCapable())return null;try{window.localStorage.setItem(e,JSON.stringify(f))}catch(g){console.log(g)}},setHighest:function(e,f){f>this.getFloat(e)&&this.set(e,f)},remove:function(e){if(!this.isCapable())return null;window.localStorage.removeItem(e)},clear:function(){if(!this.isCapable())return null;
window.localStorage.clear()}})});ig.baked=!0;ig.module("plugins.io.mouse").defines(function(){Mouse=ig.Class.extend({bindings:{click:[ig.KEY.MOUSE1]},init:function(){ig.input.initMouse();for(var e in this.bindings){this[e]=e;for(var f=0;f<this.bindings[e].length;f++)ig.input.bind(this.bindings[e][f],e)}},getPos:function(){if(ig.ua.mobile)var e=ig.input.mouse.x/ig.sizeHandler.sizeRatio.x,f=ig.input.mouse.y/ig.sizeHandler.sizeRatio.y;else e=ig.input.mouse.x,f=ig.input.mouse.y;return new Vector2(e,f)}})});
ig.baked=!0;ig.module("plugins.io.keyboard").defines(function(){Keyboard=ig.Class.extend({bindings:{jump:[ig.KEY.W,ig.KEY.UP_ARROW],moveright:[ig.KEY.D,ig.KEY.RIGHT_ARROW],moveleft:[ig.KEY.A,ig.KEY.LEFT_ARROW],shoot:[ig.KEY.S,ig.KEY.DOWN_ARROW,ig.KEY.SPACE]},init:function(){for(var e in this.bindings){this[e]=e;for(var f=0;f<this.bindings[e].length;f++)ig.input.bind(this.bindings[e][f],e)}}})});ig.baked=!0;
ig.module("plugins.io.gamepad-input").defines(function(){ig.PADKEY={BUTTON_0:0,PADBUTTON_1:1,BUTTON_2:2,BUTTON_3:3,BUTTON_LEFT_BUMPER:4,BUTTON_RIGHT_BUMPER:5,BUTTON_LEFT_TRIGGER:6,BUTTON_RIGHT_TRIGGER:7,BUTTON_LEFT_JOYSTICK:10,BUTTON_RIGHT_JOYSTICK:11,BUTTON_DPAD_UP:12,BUTTON_DPAD_DOWN:13,BUTTON_DPAD_LEFT:14,BUTTON_DPAD_RIGHT:15,BUTTON_MENU:16,AXIS_LEFT_JOYSTICK_X:0,AXIS_LEFT_JOYSTICK_Y:1,AXIS_RIGHT_JOYSTICK_X:2,AXIS_RIGHT_JOYSTICK_Y:3};ig.GamepadInput=ig.Class.extend({isInit:!1,isSupported:!1,list:[],
bindings:{},states:{},presses:{},releases:{},downLocks:{},upLocks:{},leftStick:{x:0,y:0},rightStick:{x:0,y:0},start:function(){if(!this.isInit){this.isInit=!0;var e=navigator.getGamepads||navigator.webkitGetGamepads;e&&(!navigator.getGamepads&&navigator.webkitGetGamepads&&(navigator.getGamepads=navigator.webkitGetGamepads),this.list=navigator.getGamepads());this.isSupported=e}},isAvailable:function(){return this.isInit&&this.isSupported},buttonPressed:function(e){return"object"==typeof e?e.pressed:
1==e},buttonDown:function(e){if(e=this.bindings[e])this.states[e]=!0,this.downLocks[e]||(this.presses[e]=!0,this.downLocks[e]=!0)},buttonUp:function(e){if((e=this.bindings[e])&&this.downLocks[e]&&!this.upLocks[e])this.states[e]=!1,this.releases[e]=!0,this.upLocks[e]=!0},clearPressed:function(){for(var e in this.releases)this.states[e]=!1,this.downLocks[e]=!1;this.releases={};this.presses={};this.upLocks={}},bind:function(e,f){this.bindings[e]=f},unbind:function(e){this.releases[this.bindings[e]]=
!0;this.bindings[e]=null},unbindAll:function(){this.bindings={};this.states={};this.presses={};this.releases={};this.downLocks={};this.upLocks={}},state:function(e){return this.states[e]},pressed:function(e){return this.presses[e]},released:function(e){return this.releases[e]},clamp:function(e,f,g){return e<f?f:e>g?g:e},pollGamepads:function(){if(this.isSupported){this.leftStick.x=0;this.leftStick.y=0;this.rightStick.x=0;this.rightStick.y=0;this.list=navigator.getGamepads();for(var e in this.bindings){for(var f=
!1,g=0;g<this.list.length;g++){var j=this.list[g];if(j&&j.buttons&&this.buttonPressed(j.buttons[e])){f=!0;break}}f?this.buttonDown(e):this.buttonUp(e)}for(g=0;g<this.list.length;g++)if((j=this.list[g])&&j.axes){e=j.axes[ig.GAMEPADINPUT.AXIS_LEFT_JOYSTICK_X];var f=j.axes[ig.GAMEPADINPUT.AXIS_LEFT_JOYSTICK_Y],l=j.axes[ig.GAMEPADINPUT.AXIS_RIGHT_JOYSTICK_X],j=j.axes[ig.GAMEPADINPUT.AXIS_RIGHT_JOYSTICK_Y];this.leftStick.x+=isNaN(e)?0:e;this.leftStick.y+=isNaN(f)?0:f;this.rightStick.x+=isNaN(l)?0:l;this.rightStick.y+=
isNaN(j)?0:j}0<this.list.length&&(this.leftStick.x=this.clamp(this.leftStick.x,-1,1),this.leftStick.y=this.clamp(this.leftStick.y,-1,1),this.rightStick.x=this.clamp(this.rightStick.x,-1,1),this.rightStick.y=this.clamp(this.rightStick.y,-1,1))}}})});ig.baked=!0;
ig.module("plugins.io.gamepad").requires("plugins.io.gamepad-input").defines(function(){Gamepad=ig.Class.extend({bindings:{padJump:[ig.PADKEY.BUTTON_0]},init:function(){ig.gamepadInput.start();for(var e in this.bindings)for(var f=0;f<this.bindings[e].length;f++)ig.gamepadInput.bind(this.bindings[e][f],e)},press:function(){},held:function(){},release:function(){}})});ig.baked=!0;
ig.module("plugins.io.multitouch").defines(function(){Multitouch=ig.Class.extend({init:function(){ig.multitouchInput.start()},getTouchesPos:function(){if(ig.ua.mobile){if(0<ig.multitouchInput.touches.length){for(var e=[],f=0;f<ig.multitouchInput.touches.length;f++){var g=ig.multitouchInput.touches[f];e.push({x:g.x,y:g.y})}return e}return null}}})});ig.baked=!0;
ig.module("plugins.io.multitouch-input").defines(function(){ig.MultitouchInput=ig.Class.extend({isStart:!1,touches:[],multitouchCapable:!1,lastEventUp:null,start:function(){this.isStart||(this.isStart=!0,navigator.maxTouchPoints&&1<navigator.maxTouchPoints&&(this.multitouchCapable=!0),ig.ua.touchDevice&&(window.navigator.msPointerEnabled&&(ig.system.canvas.addEventListener("MSPointerDown",this.touchdown.bind(this),!1),ig.system.canvas.addEventListener("MSPointerUp",this.touchup.bind(this),!1),ig.system.canvas.addEventListener("MSPointerMove",
this.touchmove.bind(this),!1),ig.system.canvas.style.msContentZooming="none",ig.system.canvas.style.msTouchAction="none"),ig.system.canvas.addEventListener("touchstart",this.touchdown.bind(this),!1),ig.system.canvas.addEventListener("touchend",this.touchup.bind(this),!1),ig.system.canvas.addEventListener("touchmove",this.touchmove.bind(this),!1)))},touchmove:function(e){if(ig.ua.touchDevice){var f=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,g=parseInt(ig.system.canvas.offsetHeight)||
ig.system.realHeight,f=ig.system.scale*(f/ig.system.realWidth),g=ig.system.scale*(g/ig.system.realHeight);if(e.touches){for(;0<this.touches.length;)this.touches.pop();!this.multitouchCapable&&1<e.touches.length&&(this.multitouchCapable=!0);var j={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(j=ig.system.canvas.getBoundingClientRect());for(var l=0;l<e.touches.length;l++){var n=e.touches[l];n&&this.touches.push({x:(n.clientX-j.left)/f,y:(n.clientY-j.top)/g})}}else this.windowMove(e)}},touchdown:function(e){var f=
parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,g=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight,f=ig.system.scale*(f/ig.system.realWidth),g=ig.system.scale*(g/ig.system.realHeight);if(window.navigator.msPointerEnabled)this.windowKeyDown(e);else if(ig.ua.touchDevice&&e.touches){for(;0<this.touches.length;)this.touches.pop();!this.multitouchCapable&&1<e.touches.length&&(this.multitouchCapable=!0);var j={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(j=ig.system.canvas.getBoundingClientRect());
for(var l=0;l<e.touches.length;l++){var n=e.touches[l];n&&this.touches.push({x:(n.clientX-j.left)/f,y:(n.clientY-j.top)/g})}}},touchup:function(e){var f=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;parseInt(ig.system.canvas.offsetHeight);f=ig.system.scale*(f/ig.system.realWidth);if(window.navigator.msPointerEnabled)this.windowKeyUp(e);else{this.lastEventUp=e;var g={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(g=ig.system.canvas.getBoundingClientRect());if(ig.ua.touchDevice){e=
(e.changedTouches[0].clientX-g.left)/f;for(f=0;f<this.touches.length;f++)this.touches[f].x>=e-40&&this.touches[f].x<=e+40&&this.touches.splice(f,1)}}},windowKeyDown:function(e){var f=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,g=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight,f=ig.system.scale*(f/ig.system.realWidth),g=ig.system.scale*(g/ig.system.realHeight);if(window.navigator.msPointerEnabled){var j={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(j=ig.system.canvas.getBoundingClientRect());
e=e.changedTouches?e.changedTouches:[e];for(var l=0;l<e.length;++l){for(var n=e[l],s="undefined"!=typeof n.identifier?n.identifier:"undefined"!=typeof n.pointerId?n.pointerId:1,q=(n.clientX-j.left)/f,n=(n.clientY-j.top)/g,m=0;m<this.touches.length;++m)this.touches[m].identifier==s&&this.touches.splice(m,1);this.touches.push({x:q,y:n,identifier:s})}for(f=0;f<this.touches.length;f++);}},windowKeyUp:function(e){e="undefined"!=typeof e.identifier?e.identifier:"undefined"!=typeof e.pointerId?e.pointerId:
1;for(var f=0;f<this.touches.length;++f)this.touches[f].identifier==e&&this.touches.splice(f,1);for(;0<this.touches.length;)this.touches.pop()},windowMove:function(e){var f=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,g=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight,f=ig.system.scale*(f/ig.system.realWidth),g=ig.system.scale*(g/ig.system.realHeight),j={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(j=ig.system.canvas.getBoundingClientRect());if(window.navigator.msPointerEnabled)for(var l=
"undefined"!=typeof e.identifier?e.identifier:"undefined"!=typeof e.pointerId?e.pointerId:1,n=0;n<this.touches.length;++n)if(this.touches[n].identifier==l){var s=(e.clientY-j.top)/g;this.touches[n].x=(e.clientX-j.left)/f;this.touches[n].y=s}}})});ig.baked=!0;
ig.module("plugins.fake-storage").requires("impact.game").defines(function(){ig.FakeStorage=ig.Class.extend({tempData:{},init:function(){ig.FakeStorage.instance=this},initUnset:function(e,f){null===this.get(e)&&this.set(e,f)},set:function(e,f){this.tempData[e]=JSON.stringify(f)},setHighest:function(e,f){f>this.getFloat(e)&&this.set(e,f)},get:function(e){return"undefined"==typeof this.tempData[e]?null:JSON.parse(this.tempData[e])},getInt:function(e){return~~this.get(e)},getFloat:function(e){return parseFloat(this.get(e))},
getBool:function(e){return!!this.get(e)},isSet:function(e){return null!==this.get(e)},remove:function(){delete this.tempData.key},clear:function(){this.tempData={}}})});ig.baked=!0;
ig.module("plugins.io.io-manager").requires("plugins.io.storage","plugins.io.mouse","plugins.io.keyboard","plugins.io.gamepad","plugins.io.multitouch","plugins.io.multitouch-input","plugins.io.gamepad-input","plugins.fake-storage").defines(function(){IoManager=ig.Class.extend({storage:null,localStorageSupport:!1,gamekey:"TeamKaboom",mouse:null,keyboard:null,multitouch:null,gamepad:null,init:function(){ig.multitouchInput=new ig.MultitouchInput;ig.gamepadInput=new ig.GamepadInput;this.unbindAll();this.initStorage();
this.initMouse();this.initKeyboard()},unbindAll:function(){ig.input.unbindAll();ig.gamepadInput.unbindAll()},initStorage:function(){try{window.localStorage.setItem("test","test"),this.storage=new ig.Storage}catch(e){console.log("using fake storage"),this.storage=new ig.FakeStorage}},initMouse:function(){this.mouse=new Mouse},initKeyboard:function(){this.keyboard=new Keyboard},initMultitouch:function(){this.multitouch=new Multitouch},initGamepad:function(){this.gamepad=new Gamepad},press:function(e){return ig.input.pressed(e)||
this.gamepad&&this.gamepad.press(e)?!0:!1},held:function(e){return ig.input.state(e)||this.gamepad&&this.gamepad.state(e)?!0:!1},release:function(e){return ig.input.released(e)||this.gamepad&&this.gamepad.released(e)?!0:!1},getClickPos:function(){return this.mouse.getPos()},getTouchesPos:function(){return this.multitouch.getTouchesPos()},checkOverlap:function(e,f,g,j,l){return e.x>f+j||e.x<f||e.y>g+l||e.y<g?!1:!0},_supportsLocalStorage:function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),
this.localStorageSupport="localStorage"in window&&null!==window.localStorage}catch(e){return this.localStorageSupport}},storageIsSet:function(e){return!this.localStorageSupport?null:this.storage.isSet(e)},storageGet:function(e){return!this.localStorageSupport?null:this.storage.get(e)},storageSet:function(e,f){if(!this.localStorageSupport)return null;this.storage.set(e,f)},assert:function(e,f,g){if(f!==g)throw"actualValue:"+f+" not equal to testValue:"+g+" at "+e;}})});ig.baked=!0;
ig.module("plugins.splash-loader").requires("impact.loader","impact.animation").defines(function(){ig.SplashLoader=ig.Loader.extend({desktopCoverDIVID:"play-desktop",splashDesktop:new ig.Image("media/graphics/game/bg.png"),splashMobile:new ig.Image("media/graphics/game/bg.png"),barFrame:new ig.Image("media/graphics/game/volume-base.png"),barComplete:new ig.Image("media/graphics/game/volume-bar.png"),barSize:{x:312,y:10},init:function(e,f){this.parent(e,f);ig.apiHandler.run("MJSPreroll")},testing:!0,
end:function(){this.parent();this._drawStatus=1;this.draw();if(ig.ua.mobile){var e=ig.domHandler.getElementById("#play");ig.domHandler.show(e);ig.system.setGame(MyGame)}else this.tapToStartDiv()},tapToStartDiv:function(e){this.desktopCoverDIV=document.createElement("div");this.desktopCoverDIV.id=this.desktopCoverDIVID;this.desktopCoverDIV.setAttribute("class","play");this.desktopCoverDIV.setAttribute("style","position: absolute; display: block; z-index: 999999; background-color: rgba(23, 32, 53, 0.7); visibility: visible; font-size: 10vmin; text-align: center; vertical-align: middle; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;");
this.desktopCoverDIV.innerHTML="<div style='color:white;background-color: rgba(255, 255, 255, 0.3); border: 2px solid #fff; font-size:20px; border-radius: 5px; position: relative; float: left; top: 50%; left: 50%; transform: translate(-50%, -50%);'><div style='padding:20px 50px; font-family: Arial;'>"+_STRINGS.Splash.TapToStart+"</div></div>";(document.getElementById("play").parentNode||document.getElementById("ajaxbar")).appendChild(this.desktopCoverDIV);try{"undefined"!==typeof ig.sizeHandler?"undefined"!==
typeof ig.sizeHandler.coreDivsToResize&&(ig.sizeHandler.coreDivsToResize.push("#"+this.desktopCoverDIVID),"function"===typeof ig.sizeHandler.reorient&&ig.sizeHandler.reorient()):"undefined"!==typeof coreDivsToResize&&(coreDivsToResize.push(this.desktopCoverDIVID),"function"===typeof sizeHandler&&sizeHandler())}catch(f){console.log(f)}this.desktopCoverDIV.addEventListener("click",function(){try{"undefined"!==typeof ig.soundHandler?("undefined"!==typeof ig.soundHandler.bgmPlayer?"undefined"!==typeof ig.soundHandler.bgmPlayer.webaudio&&
"undefined"!==typeof ig.soundHandler.bgmPlayer.webaudio.context&&ig.soundHandler.bgmPlayer.webaudio.context.resume():(ig.soundHandler=null,ig.soundHandler="undefined"!==typeof ig.soundList?new ig.SoundHandler(ig.soundList):new ig.SoundHandler),"undefined"!==typeof ig.soundHandler.sfxPlayer?"function"===typeof ig.soundHandler.sfxPlayer.play&&ig.soundHandler.sfxPlayer.play("staticSound"):"undefined"!==typeof ig.soundHandler.staticSound?"function"===typeof ig.soundHandler.staticSound.play&&ig.soundHandler.staticSound.play():
"function"===typeof ig.soundHandler.playSound&&ig.soundHandler.playSound("staticSound")):"undefined"!==typeof Howl?(ig.global.staticSound=new Howl({src:["media/audio/play/static.ogg","media/audio/play/static.mp3"]}),ig.global.staticSound.play()):"undefined"!==typeof createjs&&"undefined"!==typeof createjs.Sound&&"function"===typeof createjs.Sound.play&&createjs.Sound.play("opening")}catch(f){console.log(f)}this.setAttribute("style","visibility: hidden;");"function"===typeof e&&e();ig.system.setGame(MyGame)})},
setupCustomAnimation:function(){this.customAnim=new ig.Animation(this.customAnim,0.05,[0,1,2,3,4,5]);this.customAnim.currentFrame=0;ig.loadingScreen=this;ig.loadingScreen.animationTimer=window.setInterval("ig.loadingScreen.animate()",100)},animate:function(){this.customAnim.currentFrame<this.customAnim.sequence.length?this.customAnim.currentFrame++:this.customAnim.currentFrame=0;this.customAnim.gotoFrame(this.customAnim.currentFrame)},draw:function(){ig.system.context.font="1px acrom-bold";ig.system.context.fillText("acrom-bold",
-100,-100);ig.system.context.font="1px acrom-bold";ig.system.context.fillText("acrom-bold",-100,-100);this._drawStatus+=(this.status-this._drawStatus)/5;ig.system.context.fillStyle="#000";ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);var e=ig.system.context,f=ig.system.scale,g=ig.system.realWidth/2-this.barSize.x/2,j=ig.system.realHeight-200;ig.ua.mobile?this.splashMobile.draw(0,0):this.splashDesktop.draw(0,0);var l=this.barSize.x*this._drawStatus,n=l*f,s=this.barSize.y,g=g*f,j=
(j-200)*f;this.barFrame.draw(g,j);0<l&&this.barComplete.draw(g+8,j+7,0,0,n,s);e.font="30px acrom-bold";e.fillStyle="white";l=_STRINGS.Splash.Loading;e.save();e.textAlign="center";e.fillText(l,g+this.barSize.x*f/2+10,j+50);e.restore()}})});ig.baked=!0;
ig.module("plugins.tween").requires("impact.entity").defines(function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var f=0;f<this.length;++f)if(this[f]===e)return f;return-1});ig.Entity.prototype.tweens=[];ig.Entity.prototype._preTweenUpdate=ig.Entity.prototype.update;ig.Entity.prototype.update=function(){this._preTweenUpdate();if(0<this.tweens.length){for(var e=[],f=0;f<this.tweens.length;f++)this.tweens[f].update(),this.tweens[f].complete||e.push(this.tweens[f]);this.tweens=
e}};ig.Entity.prototype.tween=function(e,f,g){e=new ig.Tween(this,e,f,g);this.tweens.push(e);return e};ig.Entity.prototype.pauseTweens=function(){for(var e=0;e<this.tweens.length;e++)this.tweens[e].pause()};ig.Entity.prototype.resumeTweens=function(){for(var e=0;e<this.tweens.length;e++)this.tweens[e].resume()};ig.Entity.prototype.stopTweens=function(e){for(var f=0;f<this.tweens.length;f++)this.tweens[f].stop(e)};ig.Tween=function(e,f,g,j){var l={},n={},s={},q=0,m=!1,r=!1,t=!1;this.duration=g;this.paused=
this.complete=!1;this.easing=ig.Tween.Easing.Linear.EaseNone;this.onComplete=!1;this.loop=this.delay=0;this.loopCount=-1;ig.merge(this,j);this.loopNum=this.loopCount;this.chain=function(e){t=e};this.initEnd=function(e,f,g){if("object"!==typeof f[e])g[e]=f[e];else for(subprop in f[e])g[e]||(g[e]={}),this.initEnd(subprop,f[e],g[e])};this.initStart=function(e,f,g,j){if("object"!==typeof g[e])"undefined"!==typeof f[e]&&(j[e]=g[e]);else for(subprop in g[e])j[e]||(j[e]={}),"undefined"!==typeof f[e]&&this.initStart(subprop,
f[e],g[e],j[e])};this.start=function(){this.paused=this.complete=!1;this.loopNum=this.loopCount;q=0;-1==e.tweens.indexOf(this)&&e.tweens.push(this);r=!0;m=new ig.Timer;for(var g in f)this.initEnd(g,f,n);for(g in n)this.initStart(g,n,e,l),this.initDelta(g,s,e,n)};this.initDelta=function(e,f,g,j){if("object"!==typeof j[e])f[e]=j[e]-g[e];else for(subprop in j[e])f[e]||(f[e]={}),this.initDelta(subprop,f[e],g[e],j[e])};this.propUpdate=function(e,f,g,j,l){if("object"!==typeof g[e])f[e]="undefined"!=typeof g[e]?
g[e]+j[e]*l:f[e];else for(subprop in g[e])this.propUpdate(subprop,f[e],g[e],j[e],l)};this.propSet=function(e,f,g){if("object"!==typeof f[e])g[e]=f[e];else for(subprop in f[e])g[e]||(g[e]={}),this.propSet(subprop,f[e],g[e])};this.update=function(){if(!r)return!1;if(this.delay){if(m.delta()<this.delay)return;this.delay=0;m.reset()}if(this.paused||this.complete)return!1;var f=(m.delta()+q)/this.duration,f=1<f?1:f,g=this.easing(f);for(property in s)this.propUpdate(property,e,l,s,g);if(1<=f){if(0==this.loopNum||
!this.loop){this.complete=!0;if(this.onComplete)this.onComplete();t&&t.start();return!1}if(this.loop==ig.Tween.Loop.Revert){for(property in l)this.propSet(property,l,e);q=0;m.reset();-1!=this.loopNum&&this.loopNum--}else if(this.loop==ig.Tween.Loop.Reverse){f={};g={};ig.merge(f,n);ig.merge(g,l);ig.merge(l,f);ig.merge(n,g);for(property in n)this.initDelta(property,s,e,n);q=0;m.reset();-1!=this.loopNum&&this.loopNum--}}};this.pause=function(){this.paused=!0;m&&m.delta&&(q+=m.delta())};this.resume=function(){this.paused=
!1;m&&m.reset&&m.reset()};this.stop=function(e){e&&(this.loop=this.complete=this.paused=!1,q+=g,this.update());this.complete=!0}};ig.Tween.Loop={Revert:1,Reverse:2};ig.Tween.Easing={Linear:{},Quadratic:{},Cubic:{},Quartic:{},Quintic:{},Sinusoidal:{},Exponential:{},Circular:{},Elastic:{},Back:{},Bounce:{}};ig.Tween.Easing.Linear.EaseNone=function(e){return e};ig.Tween.Easing.Quadratic.EaseIn=function(e){return e*e};ig.Tween.Easing.Quadratic.EaseOut=function(e){return-e*(e-2)};ig.Tween.Easing.Quadratic.EaseInOut=
function(e){return 1>(e*=2)?0.5*e*e:-0.5*(--e*(e-2)-1)};ig.Tween.Easing.Cubic.EaseIn=function(e){return e*e*e};ig.Tween.Easing.Cubic.EaseOut=function(e){return--e*e*e+1};ig.Tween.Easing.Cubic.EaseInOut=function(e){return 1>(e*=2)?0.5*e*e*e:0.5*((e-=2)*e*e+2)};ig.Tween.Easing.Quartic.EaseIn=function(e){return e*e*e*e};ig.Tween.Easing.Quartic.EaseOut=function(e){return-(--e*e*e*e-1)};ig.Tween.Easing.Quartic.EaseInOut=function(e){return 1>(e*=2)?0.5*e*e*e*e:-0.5*((e-=2)*e*e*e-2)};ig.Tween.Easing.Quintic.EaseIn=
function(e){return e*e*e*e*e};ig.Tween.Easing.Quintic.EaseOut=function(e){return(e-=1)*e*e*e*e+1};ig.Tween.Easing.Quintic.EaseInOut=function(e){return 1>(e*=2)?0.5*e*e*e*e*e:0.5*((e-=2)*e*e*e*e+2)};ig.Tween.Easing.Sinusoidal.EaseIn=function(e){return-Math.cos(e*Math.PI/2)+1};ig.Tween.Easing.Sinusoidal.EaseOut=function(e){return Math.sin(e*Math.PI/2)};ig.Tween.Easing.Sinusoidal.EaseInOut=function(e){return-0.5*(Math.cos(Math.PI*e)-1)};ig.Tween.Easing.Exponential.EaseIn=function(e){return 0==e?0:Math.pow(2,
10*(e-1))};ig.Tween.Easing.Exponential.EaseOut=function(e){return 1==e?1:-Math.pow(2,-10*e)+1};ig.Tween.Easing.Exponential.EaseInOut=function(e){return 0==e?0:1==e?1:1>(e*=2)?0.5*Math.pow(2,10*(e-1)):0.5*(-Math.pow(2,-10*(e-1))+2)};ig.Tween.Easing.Circular.EaseIn=function(e){return-(Math.sqrt(1-e*e)-1)};ig.Tween.Easing.Circular.EaseOut=function(e){return Math.sqrt(1- --e*e)};ig.Tween.Easing.Circular.EaseInOut=function(e){return 1>(e/=0.5)?-0.5*(Math.sqrt(1-e*e)-1):0.5*(Math.sqrt(1-(e-=2)*e)+1)};ig.Tween.Easing.Elastic.EaseIn=
function(e){var f,g=0.1,j=0.4;if(0==e)return 0;if(1==e)return 1;j||(j=0.3);!g||1>g?(g=1,f=j/4):f=j/(2*Math.PI)*Math.asin(1/g);return-(g*Math.pow(2,10*(e-=1))*Math.sin(2*(e-f)*Math.PI/j))};ig.Tween.Easing.Elastic.EaseOut=function(e){var f,g=0.1,j=0.4;if(0==e)return 0;if(1==e)return 1;j||(j=0.3);!g||1>g?(g=1,f=j/4):f=j/(2*Math.PI)*Math.asin(1/g);return g*Math.pow(2,-10*e)*Math.sin(2*(e-f)*Math.PI/j)+1};ig.Tween.Easing.Elastic.EaseInOut=function(e){var f,g=0.1,j=0.4;if(0==e)return 0;if(1==e)return 1;
j||(j=0.3);!g||1>g?(g=1,f=j/4):f=j/(2*Math.PI)*Math.asin(1/g);return 1>(e*=2)?-0.5*g*Math.pow(2,10*(e-=1))*Math.sin(2*(e-f)*Math.PI/j):0.5*g*Math.pow(2,-10*(e-=1))*Math.sin(2*(e-f)*Math.PI/j)+1};ig.Tween.Easing.Back.EaseIn=function(e){return e*e*(2.70158*e-1.70158)};ig.Tween.Easing.Back.EaseOut=function(e){return(e-=1)*e*(2.70158*e+1.70158)+1};ig.Tween.Easing.Back.EaseInOut=function(e){return 1>(e*=2)?0.5*e*e*(3.5949095*e-2.5949095):0.5*((e-=2)*e*(3.5949095*e+2.5949095)+2)};ig.Tween.Easing.Bounce.EaseIn=
function(e){return 1-ig.Tween.Easing.Bounce.EaseOut(1-e)};ig.Tween.Easing.Bounce.EaseOut=function(e){return(e/=1)<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+0.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+0.9375:7.5625*(e-=2.625/2.75)*e+0.984375};ig.Tween.Easing.Bounce.EaseInOut=function(e){return 0.5>e?0.5*ig.Tween.Easing.Bounce.EaseIn(2*e):0.5*ig.Tween.Easing.Bounce.EaseOut(2*e-1)+0.5}});ig.baked=!0;
ig.module("plugins.scale").requires("impact.entity").defines(function(){ig.Entity.inject({scale:{x:1,y:1},_offset:{x:0,y:0},_scale:{x:1,y:1},_size:{x:0,y:0},init:function(e,f,g){this.parent(e,f,g);this._offset.x=this.offset.x;this._offset.y=this.offset.y;this._size.x=this.size.x;this._size.y=this.size.y;this.setScale(this.scale.x,this.scale.y)},draw:function(){var e=ig.system.context;e.save();e.translate(ig.system.getDrawPos(this.pos.x.round()-this.offset.x-ig.game.screen.x),ig.system.getDrawPos(this.pos.y.round()-
this.offset.y-ig.game.screen.y));e.scale(this._scale.x,this._scale.y);null!=this.currentAnim&&this.currentAnim.draw(0,0);e.restore()},setScale:function(e,f){var g=this.size.x,j=this.size.y;this.scale.x=e||this.scale.x;this.scale.y=f||this.scale.y;this._scale.x=this.scale.x/ig.system.scale;this._scale.y=this.scale.y/ig.system.scale;this.offset.x=this._offset.x*this._scale.x;this.offset.y=this._offset.y*this._scale.y;this.size.x=this._size.x*this._scale.x;this.size.y=this._size.y*this._scale.y;this.pos.x+=
(g-this.size.x)/2;this.pos.y+=(j-this.size.y)/2}})});ig.baked=!0;
ig.module("plugins.url-parameters").defines(function(){ig.UrlParameters=ig.Class.extend({init:function(){switch(getQueryVariable("iphone")){case "true":ig.ua.iPhone=!0,console.log("iPhone mode")}var e=getQueryVariable("webview");if(e)switch(e){case "true":ig.ua.is_uiwebview=!0,console.log("webview mode")}if(e=getQueryVariable("debug"))switch(e){case "true":ig.game.showDebugMenu(),console.log("debug mode")}switch(getQueryVariable("view")){case "stats":ig.game.resetPlayerStats(),ig.game.endGame()}getQueryVariable("ad")}})});
ig.baked=!0;
ig.module("plugins.director").requires("impact.impact").defines(function(){ig.Director=ig.Class.extend({init:function(e,f){this.game=e;this.levels=[];this.currentLevel=0;this.append(f)},loadLevel:function(e){for(var f in ig.sizeHandler.dynamicClickableEntityDivs){var g=ig.domHandler.getElementById("#"+f);ig.domHandler.hide(g)}this.currentLevel=e;this.game.loadLevel(this.levels[e]);return!0},loadLevelWithoutEntities:function(e){this.currentLevel=e;this.game.loadLevelWithoutEntities(this.levels[e]);return!0},
append:function(e){newLevels=[];return"object"===typeof e?(e.constructor===[].constructor?newLevels=e:newLevels[0]=e,this.levels=this.levels.concat(newLevels),!0):!1},nextLevel:function(){return this.currentLevel+1<this.levels.length?this.loadLevel(this.currentLevel+1):!1},previousLevel:function(){return 0<=this.currentLevel-1?this.loadLevel(this.currentLevel-1):!1},jumpTo:function(e){var f=null;for(i=0;i<this.levels.length;i++)this.levels[i]==e&&(f=i);return 0<=f?this.loadLevel(f):!1},firstLevel:function(){return this.loadLevel(0)},
lastLevel:function(){return this.loadLevel(this.levels.length-1)},reloadLevel:function(){return this.loadLevel(this.currentLevel)}})});ig.baked=!0;
ig.module("plugins.impact-storage").requires("impact.game").defines(function(){ig.Storage=ig.Class.extend({staticInstantiate:function(){return!ig.Storage.instance?null:ig.Storage.instance},init:function(){ig.Storage.instance=this},isCapable:function(){return"undefined"!==typeof window.localStorage},isSet:function(e){return null!==this.get(e)},initUnset:function(e,f){null===this.get(e)&&this.set(e,f)},get:function(e){if(!this.isCapable())return null;try{return JSON.parse(localStorage.getItem(e))}catch(f){return window.localStorage.getItem(e)}},
getInt:function(e){return~~this.get(e)},getFloat:function(e){return parseFloat(this.get(e))},getBool:function(e){return!!this.get(e)},key:function(e){return this.isCapable()?window.localStorage.key(e):null},set:function(e,f){if(!this.isCapable())return null;try{window.localStorage.setItem(e,JSON.stringify(f))}catch(g){console.log(g)}},setHighest:function(e,f){f>this.getFloat(e)&&this.set(e,f)},remove:function(e){if(!this.isCapable())return null;window.localStorage.removeItem(e)},clear:function(){if(!this.isCapable())return null;
window.localStorage.clear()}})});ig.baked=!0;
ig.module("plugins.async").requires("impact.game").defines(function(){(function(){function e(){}function f(e){return e}function g(e){return!!e}function j(e){return!e}function l(e){return function(){if(null===e)throw Error("Callback was already called.");e.apply(this,arguments);e=null}}function n(e){return function(){null!==e&&(e.apply(this,arguments),e=null)}}function s(e){return U(e)||"number"===typeof e.length&&0<=e.length&&0===e.length%1}function q(e,f){for(var g=-1,j=e.length;++g<j;)f(e[g],g,
e)}function m(e,f){for(var g=-1,j=e.length,l=Array(j);++g<j;)l[g]=f(e[g],g,e);return l}function r(e){return m(Array(e),function(e,f){return f})}function t(e,f){for(var g=0;g<e.length;g++)if(e[g]===f)return g;return-1}function u(e){var f=-1,g,j;if(s(e))return g=e.length,function(){f++;return f<g?f:null};j=za(e);g=j.length;return function(){f++;return f<g?j[f]:null}}function v(e,f){f=null==f?e.length-1:+f;return function(){for(var g=Math.max(arguments.length-f,0),j=Array(g),l=0;l<g;l++)j[l]=arguments[l+
f];switch(f){case 0:return e.call(this,j);case 1:return e.call(this,arguments[0],j)}}}function x(e){return function(f,g,j){return e(f,j)}}function E(f){return function(g,j,m){m=n(m||e);g=g||[];var q=u(g);if(0>=f)return m(null);var r=!1,s=0,t=!1;(function B(){if(r&&0>=s)return m(null);for(;s<f&&!t;){var e=q();if(null===e){r=!0;0>=s&&m(null);break}s+=1;j(g[e],e,l(function(e){s-=1;e?(m(e),t=!0):B()}))}})()}}function C(e){return function(f,g,j){return e(y.eachOf,f,g,j)}}function G(e){return function(f,
g,j,l){return e(E(g),f,j,l)}}function N(e){return function(f,g,j){return e(y.eachOfSeries,f,g,j)}}function da(f,g,j,l){l=n(l||e);g=g||[];var m=s(g)?[]:{};f(g,function(e,f,g){j(e,function(e,j){m[f]=j;g(e)})},function(e){l(e,m)})}function H(e,f,g,j){var l=[];e(f,function(e,f,j){g(e,function(g){g&&l.push({index:f,value:e});j()})},function(){j(m(l.sort(function(e,f){return e.index-f.index}),function(e){return e.value}))})}function na(e,f,g,j){H(e,f,function(e,f){g(e,function(e){f(!e)})},j)}function ba(e,
f,g){return function(j,l,m,n){function q(){n&&n(g(!1,void 0))}function r(e,j,l){if(!n)return l();m(e,function(j){n&&f(j)&&(n(g(!0,e)),n=m=!1);l()})}3<arguments.length?e(j,l,r,q):(n=m,m=l,e(j,r,q))}}function Ga(e,f){return f}function Ra(f,g,j){j=j||e;var l=s(g)?[]:{};f(g,function(e,f,g){e(v(function(e,j){1>=j.length&&(j=j[0]);l[f]=j;g(e)}))},function(e){j(e,l)})}function bb(e,f,g,j){var l=[];e(f,function(e,f,j){g(e,function(e,f){l=l.concat(f||[]);j(e)})},function(e){j(e,l)})}function Sa(f,g,j){function n(f,
g,j,l){if(null!=l&&"function"!==typeof l)throw Error("task callback must be a function");f.started=!0;U(g)||(g=[g]);if(0===g.length&&f.idle())return y.setImmediate(function(){f.drain()});q(g,function(g){g={data:g,callback:l||e};j?f.tasks.unshift(g):f.tasks.push(g);f.tasks.length===f.concurrency&&f.saturated()});y.setImmediate(f.process)}function r(e,f){return function(){s-=1;var g=!1,j=arguments;q(f,function(e){q(t,function(f,j){f===e&&!g&&(t.splice(j,1),g=!0)});e.callback.apply(e,j)});0===e.tasks.length+
s&&e.drain();e.process()}}if(null==g)g=1;else if(0===g)throw Error("Concurrency must not be zero");var s=0,t=[],u={tasks:[],concurrency:g,payload:j,saturated:e,empty:e,drain:e,started:!1,paused:!1,push:function(e,f){n(u,e,!1,f)},kill:function(){u.drain=e;u.tasks=[]},unshift:function(e,f){n(u,e,!0,f)},process:function(){for(;!u.paused&&s<u.concurrency&&u.tasks.length;){var e=u.payload?u.tasks.splice(0,u.payload):u.tasks.splice(0,u.tasks.length),g=m(e,function(e){return e.data});0===u.tasks.length&&
u.empty();s+=1;t.push(e[0]);e=l(r(u,e));f(g,e)}},length:function(){return u.tasks.length},running:function(){return s},workersList:function(){return t},idle:function(){return 0===u.tasks.length+s},pause:function(){u.paused=!0},resume:function(){if(!1!==u.paused){u.paused=!1;for(var e=Math.min(u.concurrency,u.tasks.length),f=1;f<=e;f++)y.setImmediate(u.process)}}};return u}function oa(e){return v(function(f,g){f.apply(null,g.concat([v(function(f,g){"object"===typeof console&&(f?console.error&&console.error(f):
console[e]&&q(g,function(f){console[e](f)}))})]))})}function Ta(e){return function(f,g,j){e(r(f),g,j)}}function sa(e){return v(function(f,g){var j=v(function(g){var j=this,l=g.pop();return e(f,function(e,f,l){e.apply(j,g.concat([l]))},l)});return g.length?j.apply(this,g):j})}function Ha(e){return v(function(f){var g=f.pop();f.push(function(){var e=arguments;j?y.setImmediate(function(){g.apply(null,e)}):g.apply(null,e)});var j=!0;e.apply(this,f);j=!1})}var y={},Ua,xa="object"===typeof self&&self.self===
self&&self||"object"===typeof global&&global.global===global&&global||this;null!=xa&&(Ua=xa.async);y.noConflict=function(){xa.async=Ua;return y};var db=Object.prototype.toString,U=Array.isArray||function(e){return"[object Array]"===db.call(e)},za=Object.keys||function(e){var f=[],g;for(g in e)e.hasOwnProperty(g)&&f.push(g);return f},Ia="function"===typeof setImmediate&&setImmediate,Aa=Ia?function(e){Ia(e)}:function(e){setTimeout(e,0)};y.nextTick="object"===typeof process&&"function"===typeof process.nextTick?
process.nextTick:Aa;y.setImmediate=Ia?Aa:y.nextTick;y.forEach=y.each=function(e,f,g){return y.eachOf(e,x(f),g)};y.forEachSeries=y.eachSeries=function(e,f,g){return y.eachOfSeries(e,x(f),g)};y.forEachLimit=y.eachLimit=function(e,f,g,j){return E(f)(e,x(g),j)};y.forEachOf=y.eachOf=function(f,g,j){function m(e){s--;e?j(e):null===r&&0>=s&&j(null)}j=n(j||e);f=f||[];for(var q=u(f),r,s=0;null!=(r=q());)s+=1,g(f[r],r,l(m));0===s&&j(null)};y.forEachOfSeries=y.eachOfSeries=function(f,g,j){function m(){var e=
!0;if(null===r)return j(null);g(f[r],r,l(function(f){if(f)j(f);else{r=q();if(null===r)return j(null);e?y.setImmediate(m):m()}}));e=!1}j=n(j||e);f=f||[];var q=u(f),r=q();m()};y.forEachOfLimit=y.eachOfLimit=function(e,f,g,j){E(f)(e,g,j)};y.map=C(da);y.mapSeries=N(da);y.mapLimit=G(da);y.inject=y.foldl=y.reduce=function(e,f,g,j){y.eachOfSeries(e,function(e,j,l){g(f,e,function(e,g){f=g;l(e)})},function(e){j(e,f)})};y.foldr=y.reduceRight=function(e,g,j,l){e=m(e,f).reverse();y.reduce(e,g,j,l)};y.transform=
function(e,f,g,j){3===arguments.length&&(j=g,g=f,f=U(e)?[]:{});y.eachOf(e,function(e,j,l){g(f,e,j,l)},function(e){j(e,f)})};y.select=y.filter=C(H);y.selectLimit=y.filterLimit=G(H);y.selectSeries=y.filterSeries=N(H);y.reject=C(na);y.rejectLimit=G(na);y.rejectSeries=N(na);y.any=y.some=ba(y.eachOf,g,f);y.someLimit=ba(y.eachOfLimit,g,f);y.all=y.every=ba(y.eachOf,j,j);y.everyLimit=ba(y.eachOfLimit,j,j);y.detect=ba(y.eachOf,f,Ga);y.detectSeries=ba(y.eachOfSeries,f,Ga);y.detectLimit=ba(y.eachOfLimit,f,Ga);
y.sortBy=function(e,f,g){function j(e,f){var g=e.criteria,l=f.criteria;return g<l?-1:g>l?1:0}y.map(e,function(e,g){f(e,function(f,j){f?g(f):g(null,{value:e,criteria:j})})},function(e,f){if(e)return g(e);g(null,m(f.sort(j),function(e){return e.value}))})};y.auto=function(f,g,j){function l(){r--;q(B.slice(0),function(e){e()})}"function"===typeof g&&(j=g,g=null);j=n(j||e);var m=za(f),r=m.length;if(!r)return j(null);g||(g=r);var s={},u=0,x=!1,B=[];B.unshift(function(){r||j(null,s)});q(m,function(e){function m(){var f;
if(f=u<g){var j=!0;q(E,function(e){j=j&&s.hasOwnProperty(e)});f=j&&!s.hasOwnProperty(e)}return f}function n(){if(m()){u++;var e=t(B,n);0<=e&&B.splice(e,1);r[r.length-1](V,s)}}if(!x){for(var r=U(f[e])?f[e]:[f[e]],V=v(function(f,g){u--;1>=g.length&&(g=g[0]);if(f){var m={},n=s;q(za(n),function(e){m[e]=n[e]});m[e]=g;x=!0;j(f,m)}else s[e]=g,y.setImmediate(l)}),E=r.slice(0,r.length-1),C=E.length,W;C--;){if(!(W=f[E[C]]))throw Error("Has nonexistent dependency in "+E.join(", "));if(U(W)&&0<=t(W,e))throw Error("Has cyclic dependencies");
}m()?(u++,r[r.length-1](V,s)):B.unshift(n)}})};y.retry=function(e,f,g){function j(e,f){function g(e,j){return function(g){e(function(e,f){g(!e||j,{err:e,result:f})},f)}}function n(e){return function(f){setTimeout(function(){f(null)},e)}}for(;m.times;){var q=!(m.times-=1);l.push(g(m.task,q));!q&&0<m.interval&&l.push(n(m.interval))}y.series(l,function(f,g){g=g[g.length-1];(e||m.callback)(g.err,g.result)})}var l=[],m={times:5,interval:0},n=arguments.length;if(1>n||3<n)throw Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");
2>=n&&"function"===typeof e&&(g=f,f=e);if("function"!==typeof e)if(n=m,"number"===typeof e)n.times=parseInt(e,10)||5;else if("object"===typeof e)n.times=parseInt(e.times,10)||5,n.interval=parseInt(e.interval,10)||0;else throw Error("Unsupported argument type for 'times': "+typeof e);m.callback=g;m.task=f;return m.callback?j():j};y.waterfall=function(f,g){function j(e){return v(function(f,l){if(f)g.apply(null,[f].concat(l));else{var m=e.next();m?l.push(j(m)):l.push(g);Ha(e).apply(null,l)}})}g=n(g||
e);if(!U(f))return g(Error("First argument to waterfall must be an array of functions"));if(!f.length)return g();j(y.iterator(f))()};y.parallel=function(e,f){Ra(y.eachOf,e,f)};y.parallelLimit=function(e,f,g){Ra(E(f),e,g)};y.series=function(e,f){Ra(y.eachOfSeries,e,f)};y.iterator=function(e){function f(g){function j(){e.length&&e[g].apply(null,arguments);return j.next()}j.next=function(){return g<e.length-1?f(g+1):null};return j}return f(0)};y.apply=v(function(e,f){return v(function(g){return e.apply(null,
f.concat(g))})});y.concat=C(bb);y.concatSeries=N(bb);y.whilst=function(f,g,j){j=j||e;if(f()){var l=v(function(e,m){e?j(e):f.apply(this,m)?g(l):j.apply(null,[null].concat(m))});g(l)}else j(null)};y.doWhilst=function(e,f,g){var j=0;return y.whilst(function(){return 1>=++j||f.apply(this,arguments)},e,g)};y.until=function(e,f,g){return y.whilst(function(){return!e.apply(this,arguments)},f,g)};y.doUntil=function(e,f,g){return y.doWhilst(e,function(){return!f.apply(this,arguments)},g)};y.during=function(f,
g,j){j=j||e;var l=v(function(e,g){e?j(e):(g.push(m),f.apply(this,g))}),m=function(e,f){e?j(e):f?g(l):j(null)};f(m)};y.doDuring=function(e,f,g){var j=0;y.during(function(e){1>j++?e(null,!0):f.apply(this,arguments)},e,g)};y.queue=function(e,f){return Sa(function(f,g){e(f[0],g)},f,1)};y.priorityQueue=function(f,g){function j(e,f){return e.priority-f.priority}function l(e,f,g){for(var j=-1,m=e.length-1;j<m;){var n=j+(m-j+1>>>1);0<=g(f,e[n])?j=n:m=n-1}return j}var m=y.queue(f,g);m.push=function(f,g,n){if(null!=
n&&"function"!==typeof n)throw Error("task callback must be a function");m.started=!0;U(f)||(f=[f]);0===f.length?y.setImmediate(function(){m.drain()}):q(f,function(f){f={data:f,priority:g,callback:"function"===typeof n?n:e};m.tasks.splice(l(m.tasks,f,j)+1,0,f);m.tasks.length===m.concurrency&&m.saturated();y.setImmediate(m.process)})};delete m.unshift;return m};y.cargo=function(e,f){return Sa(e,1,f)};y.log=oa("log");y.dir=oa("dir");y.memoize=function(e,g){var j={},l={},m=Object.prototype.hasOwnProperty;
g=g||f;var n=v(function(f){var n=f.pop(),q=g.apply(null,f);m.call(j,q)?y.setImmediate(function(){n.apply(null,j[q])}):m.call(l,q)?l[q].push(n):(l[q]=[n],e.apply(null,f.concat([v(function(e){j[q]=e;var f=l[q];delete l[q];for(var g=0,m=f.length;g<m;g++)f[g].apply(null,e)})])))});n.memo=j;n.unmemoized=e;return n};y.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}};y.times=Ta(y.map);y.timesSeries=Ta(y.mapSeries);y.timesLimit=function(e,f,g,j){return y.mapLimit(r(e),
f,g,j)};y.seq=function(){var f=arguments;return v(function(g){var j=this,l=g[g.length-1];"function"==typeof l?g.pop():l=e;y.reduce(f,g,function(e,f,g){f.apply(j,e.concat([v(function(e,f){g(e,f)})]))},function(e,f){l.apply(j,[e].concat(f))})})};y.compose=function(){return y.seq.apply(null,Array.prototype.reverse.call(arguments))};y.applyEach=sa(y.eachOf);y.applyEachSeries=sa(y.eachOfSeries);y.forever=function(f,g){function j(e){if(e)return m(e);n(j)}var m=l(g||e),n=Ha(f);j()};y.ensureAsync=Ha;y.constant=
v(function(e){var f=[null].concat(e);return function(e){return e.apply(this,f)}});y.wrapSync=y.asyncify=function(e){return v(function(f){var g=f.pop(),j;try{j=e.apply(this,f)}catch(l){return g(l)}f=typeof j;if(("function"===f||"object"===f&&j)&&"function"===typeof j.then)j.then(function(e){g(null,e)})["catch"](function(e){g(e.message?e:Error(e))});else g(null,j)})};"object"===typeof module&&module.exports?module.exports=y:"function"===typeof define&&define.amd?define([],function(){return y}):xa.async=
y})()});ig.baked=!0;ig.module("plugins.patches.user-agent-patch").defines(function(){ig.ua.touchDevice="ontouchstart"in window||window.navigator.msMaxTouchPoints||window.navigator.maxTouchPoints;ig.ua.is_mac="MacIntel"===navigator.platform;ig.ua.iOS=ig.ua.touchDevice&&ig.ua.is_mac||ig.ua.iOS;ig.ua.mobile=ig.ua.iOS||ig.ua.mobile});ig.baked=!0;
ig.module("plugins.appcrt").defines(function(){Appcrt=ig.Class.extend({apiHighscore:window.appcrtAPIURL||"https://games-scores.e-droid.net/srv/score.php",apiParams:"gameID=${1}&userID=${2}&score=${3}&param1=${4}",gameId:getQueryVariable("gameid"),userId:getQueryVariable("userid"),param1:getQueryVariable("param1"),isShowAds:getQueryVariable("ads"),highScore:0,isHighscore:!1,showAdLink:"https://showad",countAd:0,version:"1.0.3",submitHighscore:function(e){ig.game.appcrt.showAds();this.apiHighscore?
(this.highScore=e,this.isHighscore=!0,this.gameId&&this.userId&&(this.isHighscore&&this.param1)&&(console.log("Sending score"),this.isHighscore=!1,e=this.apiParams.replace("${1}",this.gameId),e=e.replace("${2}",this.userId),e=e.replace("${3}",this.highScore),e=e.replace("${4}",this.param1),$.ajax({url:this.apiHighscore+"?"+e,type:"POST",success:function(){console.log("data sent successfully")},error:function(){console.log("data send, failed")}}))):console.warn("The API URL need to be set")},showAds:function(){1==
this.isShowAds&&(window.open(this.showAdLink,"_blank"),this.countAd++)}})});ig.baked=!0;
ig.module("plugins.fullscreen").requires("impact.entity","plugins.handlers.size-handler","plugins.director").defines(function(){ig.Fullscreen={enableFullscreenButton:!0,_isEnabled:"notChecked",isEnabled:function(){"notChecked"==this._isEnabled&&(console.log("Fullscreen plugin v1.1"),this._isEnabled=document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled?!0:!1);return this._isEnabled},isFullscreen:function(){return ig.Fullscreen.isEnabled()&&
(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)?!0:!1},toggleFullscreen:function(){ig.Fullscreen.isFullscreen()?ig.Fullscreen.exitFullscreen():ig.Fullscreen.requestFullscreen();ig.sizeHandler.orientationDelayHandler()},requestFullscreen:function(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?
e.msRequestFullscreen():console.log("no request fullscreen method available")},exitFullscreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():console.log("no exit fullscreen method available")},divs:{}};ig.Director.inject({loadLevel:function(e){var f=ig.Fullscreen.divs,g;for(g in f)f=ig.domHandler.getElementById("#"+
g),ig.domHandler.hide(f);return this.parent(e)}});ig.SizeHandler.inject({resize:function(){this.parent();var e=ig.Fullscreen.divs,f;for(f in e){var g=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y),j=ig.domHandler.getElementById("#"+f),l=e[f].entity_pos_x,n=e[f].entity_pos_y,s=e[f].width,q=e[f].height,m=ig.domHandler.getElementById("#canvas"),r=ig.domHandler.getOffsets(m);ig.ua.mobile?(m=r.left,r=r.top,ig.sizeHandler.disableStretchToFitOnMobileFlag?(l=Math.floor(m+
l*ig.sizeHandler.scaleRatioMultiplier.x)+"px",n=Math.floor(r+n*ig.sizeHandler.scaleRatioMultiplier.y)+"px",s=Math.floor(s*ig.sizeHandler.scaleRatioMultiplier.x)+"px",q=Math.floor(q*ig.sizeHandler.scaleRatioMultiplier.y)+"px"):(l=Math.floor(l*ig.sizeHandler.sizeRatio.x)+"px",n=Math.floor(n*ig.sizeHandler.sizeRatio.y)+"px",s=Math.floor(s*ig.sizeHandler.sizeRatio.x)+"px",q=Math.floor(q*ig.sizeHandler.sizeRatio.y)+"px")):(m=r.left,r=r.top,l=Math.floor(m+l*g)+"px",n=Math.floor(r+n*g)+"px",s=Math.floor(s*
g)+"px",q=Math.floor(q*g)+"px");ig.domHandler.css(j,{"float":"left",position:"absolute",left:l,top:n,width:s,height:q,"z-index":3});e[f]["font-size"]&&ig.domHandler.css(j,{"font-size":e[f]["font-size"]*g+"px"})}}});ig.FullscreenButton=ig.Entity.extend({enterImage:null,exitImage:null,isReady:!1,isShown:!0,zIndex:999999,identifier:null,prevPos:{x:0,y:0},invisImagePath:"media/graphics/misc/invisible.png",init:function(e,f,g){this.parent(e,f,g);ig.Fullscreen.isEnabled()&&ig.Fullscreen.enableFullscreenButton?
this.enterImage.loaded?this.initSize():this.enterImage.loadCallback=function(){this.initSize()}.bind(this):this.kill()},kill:function(){this.parent();var e=ig.domHandler.getElementById("#"+this.identifier);e&&ig.domHandler.hide(e)},show:function(){this.isShown=!0;var e=ig.domHandler.getElementById("#"+this.identifier);e&&ig.domHandler.show(e)},hide:function(){this.isShown=!1;var e=ig.domHandler.getElementById("#"+this.identifier);e&&ig.domHandler.hide(e)},initSize:function(){this.size.x=this.enterImage.width;
this.size.y=this.enterImage.height;this.createClickableLayer();this.isReady=!0},createClickableLayer:function(){this.identifier="fullscreen-button-layer";var e=ig.domHandler.getElementById("#"+this.identifier);e?(ig.domHandler.show(e),ig.domHandler.attr(e,"onclick","ig.Fullscreen.toggleFullscreen()")):this.createClickableOutboundLayer()},update:function(e,f){e=this.pos.x;f=this.pos.y;this.isReady&&!(this.prevPos.x===e&&this.prevPos.y===f)&&(ig.Fullscreen.divs[this.identifier]={},ig.Fullscreen.divs[this.identifier].width=
this.size.x,ig.Fullscreen.divs[this.identifier].height=this.size.y,ig.Fullscreen.divs[this.identifier].entity_pos_x=this.pos.x,ig.Fullscreen.divs[this.identifier].entity_pos_y=this.pos.y,this.prevPos.x=e,this.prevPos.y=f)},draw:function(){this.isReady&&this.isShown&&(ig.Fullscreen.isFullscreen()?this.exitImage.draw(this.pos.x,this.pos.y):this.enterImage.draw(this.pos.x,this.pos.y))},createClickableOutboundLayer:function(){var e=this.identifier,f=this.invisImagePath,g=ig.domHandler.create("div");ig.domHandler.attr(g,
"id",e);ig.domHandler.attr(g,"onclick","ig.Fullscreen.toggleFullscreen()");var j=ig.domHandler.create("a"),l=ig.domHandler.create("img");ig.domHandler.css(l,{width:"100%",height:"100%"});ig.domHandler.attr(l,"src",f);f=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y);if(ig.ua.mobile){var n=ig.domHandler.getElementById("#canvas"),n=ig.domHandler.getOffsets(n),s=n.left,q=n.top;console.log(n.left);ig.sizeHandler.disableStretchToFitOnMobileFlag?(n=Math.floor(s+this.pos.x*
ig.sizeHandler.scaleRatioMultiplier.x)+"px",q=Math.floor(q+this.pos.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px",s=Math.floor(this.size.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px",f=Math.floor(this.size.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px"):(n=Math.floor(this.pos.x*ig.sizeHandler.sizeRatio.x)+"px",q=Math.floor(this.pos.y*ig.sizeHandler.sizeRatio.y)+"px",s=Math.floor(this.size.x*ig.sizeHandler.sizeRatio.x)+"px",f=Math.floor(this.size.y*ig.sizeHandler.sizeRatio.y)+"px")}else n=ig.domHandler.getElementById("#canvas"),
n=ig.domHandler.getOffsets(n),s=n.left,q=n.top,ig.sizeHandler.enableStretchToFitOnDesktopFlag?(n=Math.floor(s+this.pos.x*ig.sizeHandler.sizeRatio.x)+"px",q=Math.floor(q+this.pos.y*ig.sizeHandler.sizeRatio.y)+"px",s=Math.floor(this.size.x*ig.sizeHandler.sizeRatio.x)+"px",f=Math.floor(this.size.y*ig.sizeHandler.sizeRatio.y)+"px"):(n=Math.floor(s+this.pos.x*f)+"px",q=Math.floor(q+this.pos.y*f)+"px",s=Math.floor(this.size.x*f)+"px",f=Math.floor(this.size.y*f)+"px");ig.domHandler.css(g,{"float":"left",
position:"absolute",left:n,top:q,width:s,height:f,"z-index":3});ig.domHandler.addEvent(g,"mousemove",ig.input.mousemove.bind(ig.input),!1);ig.domHandler.appendChild(j,l);ig.domHandler.appendChild(g,j);ig.domHandler.appendToBody(g);ig.Fullscreen.divs[e]={};ig.Fullscreen.divs[e].width=this.size.x;ig.Fullscreen.divs[e].height=this.size.y;ig.Fullscreen.divs[e].entity_pos_x=this.pos.x;ig.Fullscreen.divs[e].entity_pos_y=this.pos.y}})});this.START_BRANDING_SPLASH;ig.baked=!0;
ig.module("plugins.branding.splash").requires("impact.impact","impact.entity").defines(function(){ig.BrandingSplash=ig.Class.extend({init:function(){ig.game.spawnEntity(EntityBranding,0,0)}});EntityBranding=ig.Entity.extend({gravityFactor:0,size:{x:32,y:32},init:function(e,f,g){this.parent(e,f,g);ig.game.director.loadLevel(ig.game.director.currentLevel)}})});this.END_BRANDING_SPLASH;ig.baked=!0;
ig.module("game.entities.buttons.button").requires("impact.entity","plugins.data.vector").defines(function(){EntityButton=ig.Entity.extend({collides:ig.Entity.COLLIDES.NEVER,type:ig.Entity.TYPE.A,size:new Vector2(48,48),fillColor:null,zIndex:1E3,init:function(e,f,g){this.parent(e,f,g);!ig.global.wm&&!isNaN(g.zIndex)&&(this.zIndex=g.zIndex);e=Math.floor(256*Math.random());f=Math.floor(256*Math.random());g=Math.floor(256*Math.random());this.fillColor="rgba("+e+","+g+","+f+",1)"},clicked:function(){throw"no implementation on clicked()";
},clicking:function(){throw"no implementation on clicking()";},released:function(){throw"no implementation on released()";}})});ig.baked=!0;
ig.module("plugins.clickable-div-layer").requires("plugins.data.vector").defines(function(){ClickableDivLayer=ig.Class.extend({pos:new Vector2(0,0),size:new Vector2(0,0),identifier:null,invisImagePath:"media/graphics/misc/invisible.png",init:function(e){this.pos=new Vector2(e.pos.x,e.pos.y);this.size=new Vector2(e.size.x,e.size.y);var f="more-games",g="www.google.com",j=!1;e.div_layer_name&&(f=e.div_layer_name);e.link&&(g=e.link);e.newWindow&&(j=e.newWindow);this.createClickableLayer(f,g,j)},createClickableLayer:function(e,
f,g){this.identifier=e;var j=ig.domHandler.getElementById("#"+e);j?(ig.domHandler.show(j),ig.domHandler.attr(j,"href",f)):this.createClickableOutboundLayer(e,f,this.invisImagePath,g)},update:function(e,f){this.pos.x===e&&this.pos.y===f||(ig.sizeHandler.dynamicClickableEntityDivs[this.identifier]={},ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].width=this.size.x,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].height=this.size.y,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].entity_pos_x=
this.pos.x,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].entity_pos_y=this.pos.y)},createClickableOutboundLayer:function(e,f,g,j){var l=ig.domHandler.create("div");ig.domHandler.attr(l,"id",e);var n=ig.domHandler.create("a");j?(ig.domHandler.attr(n,"href",f),ig.domHandler.attr(n,"target","_blank")):ig.domHandler.attr(n,"href",f);f=ig.domHandler.create("img");ig.domHandler.css(f,{width:"100%",height:"100%"});ig.domHandler.attr(f,"src",g);g=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,
ig.sizeHandler.scaleRatioMultiplier.y);if(ig.ua.mobile){j=Math.floor(this.pos.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px";var s=Math.floor(this.pos.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px",q=Math.floor(this.size.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px";g=Math.floor(this.size.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px"}else j=ig.domHandler.getElementById("#canvas"),j=ig.domHandler.getOffsets(j),s=j.top,j=Math.floor(j.left+this.pos.x*g)+"px",s=Math.floor(s+this.pos.y*g)+"px",q=Math.floor(this.size.x*
g)+"px",g=Math.floor(this.size.y*g)+"px";ig.domHandler.css(l,{"float":"left",position:"absolute",left:j,top:s,width:q,height:g,"z-index":3});ig.domHandler.addEvent(l,"mousemove",ig.input.mousemove.bind(ig.input),!1);ig.domHandler.appendChild(n,f);ig.domHandler.appendChild(l,n);ig.domHandler.appendToBody(l);ig.sizeHandler.dynamicClickableEntityDivs[e]={};ig.sizeHandler.dynamicClickableEntityDivs[e].width=this.size.x;ig.sizeHandler.dynamicClickableEntityDivs[e].height=this.size.y;ig.sizeHandler.dynamicClickableEntityDivs[e].entity_pos_x=
this.pos.x;ig.sizeHandler.dynamicClickableEntityDivs[e].entity_pos_y=this.pos.y}})});ig.baked=!0;
ig.module("game.entities.buttons.button-branding-logo").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonBrandingLogo=EntityButton.extend({type:ig.Entity.TYPE.A,gravityFactor:0,logo:new ig.AnimationSheet("branding/logo.png",_SETTINGS.Branding.Logo.Width,_SETTINGS.Branding.Logo.Height),zIndex:10001,size:{x:64,y:66},clickableLayer:null,link:null,newWindow:!1,div_layer_name:"branding-logo",name:"brandinglogo",init:function(e,f,g){this.parent(e,f,g);
if(!ig.global.wm){if("undefined"==typeof wm)if(_SETTINGS.Branding.Logo.Enabled)this.size.x=_SETTINGS.Branding.Logo.Width,this.size.y=_SETTINGS.Branding.Logo.Height,this.anims.idle=new ig.Animation(this.logo,0,[0],!0),this.currentAnim=this.anims.idle,g&&g.centralize&&(this.pos.x=ig.system.width/2-this.size.x/2,console.log("centralize true ... centering branded logo ...")),_SETTINGS.Branding.Logo.LinkEnabled&&(this.link=_SETTINGS.Branding.Logo.Link,this.newWindow=_SETTINGS.Branding.Logo.NewWindow,this.clickableLayer=
new ClickableDivLayer(this));else{this.kill();return}this.div_layer_name=g.div_layer_name?g.div_layer_name:"branding-logo"}},show:function(){var e=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.show(e)},hide:function(){var e=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.hide(e)},clicked:function(){},clicking:function(){},released:function(){}})});ig.baked=!0;
ig.module("game.entities.branding-logo-placeholder").requires("impact.entity","game.entities.buttons.button-branding-logo").defines(function(){EntityBrandingLogoPlaceholder=ig.Entity.extend({gravityFactor:0,size:{x:32,y:32},_wmDrawBox:!0,_wmBoxColor:"rgba(0, 0, 255, 0.7)",init:function(e,f,g){this.parent(e,f,g);if(g)switch(console.log("settings found ... using that div layer name"),e=g.div_layer_name,console.log("settings.centralize:",g.centralize),g.centralize){case "true":console.log("centralize true");
centralize=!0;break;case "false":console.log("centralize false");centralize=!1;break;default:console.log("default ... centralize false"),centralize=!1}else e="branding-logo",centralize=!1;if("undefined"==typeof wm){if(_SETTINGS.Branding.Logo.Enabled)try{ig.game.spawnEntity(EntityButtonBrandingLogo,this.pos.x,this.pos.y,{div_layer_name:e,centralize:centralize})}catch(j){console.log(j)}this.kill()}}})});ig.baked=!0;
ig.module("game.entities.buttons.button-more-games").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonMoreGames=EntityButton.extend({zIndex:9998,size:{x:231,y:75},animSheet:new ig.AnimationSheet("media/graphics/game/btn-purple.png",231,75),opacity:1,fontStyle:"acrom-bold",clickableLayer:null,link:null,newWindow:!1,div_layer_name:"more-games",name:"moregames",init:function(e,f,g){this.parent(e,f,g);ig.global.wm||(this.div_layer_name=g.div_layer_name?
g.div_layer_name:"more-games",_SETTINGS.MoreGames.Enabled?(this.anims.idle=new ig.Animation(this.animSheet,0,[0],!0),this.currentAnim=this.anims.idle,_SETTINGS.MoreGames.Link&&(this.link=_SETTINGS.MoreGames.Link),_SETTINGS.MoreGames.NewWindow&&(this.newWindow=_SETTINGS.MoreGames.NewWindow),this.clickableLayer=new ClickableDivLayer(this)):this.kill())},draw:function(){this.parent();var e=ig.system.context,f=28;this.mouseOver&&(f*=this.scale.x);e.font=f+"px "+this.fontStyle;e.fillStyle="white";e.textAlign=
"center";e.textBaseline="alphabetic";f=ig.system.context.globalAlpha;ig.system.context.globalAlpha=this.opacity;e.fillText(_STRINGS.Game.ButtonLabels.MoreGames,this.pos.x+this.size.x/2,this.pos.y+this.size.y/2+5);ig.system.context.globalAlpha=f;this.drawOpaqueBlack()},update:function(){this.parent();if(ig.game.poppaused){if(!ig.game.mainMenu.mainGame.ongoingGame){var e=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.hide(e)}}else!ig.game.poppaused&&!ig.game.mainMenu.mainGame.ongoingGame&&
(e=ig.domHandler.getElementById("#"+this.div_layer_name),ig.domHandler.show(e));this.currentAnim.alpha=this.opacity;e=ig.game.io.mouse.getPos();!ig.ua.mobile&&!this.disable&&e.x>=this.pos.x&&e.x<=this.pos.x+this.size.x&&e.y>=this.pos.y&&e.y<=this.pos.y+this.size.y&&!ig.game.poppaused?(this.mouseOver=!0,this.setScale(1.1,1.1)):(this.mouseOver=!1,this.setScale(1,1))},disableClick:function(){this.disable=!0;var e=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.hide(e)},enableClick:function(){this.disable=
!1;var e=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.show(e)},show:function(e,f){this.disable=!0;null==e&&(e=0.5);var g=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.show(g);this.pos.x=270-this.size.x/2;this.tween({opacity:1},e,{onComplete:function(){this.disable=!1;f?f():""}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start()},hide:function(e,f){this.disable=!0;null==e&&(e=0.5);var g=ig.domHandler.getElementById("#"+this.div_layer_name);
ig.domHandler.hide(g);this.tween({opacity:0},e,{onComplete:function(){this.disable=!1;this.__oldX=this.pos.x;this.pos.x=-999;f?f():""}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start()},drawOpaqueBlack:function(){var e=ig.system.context,f=ig.system.realWidth,g=ig.system.realHeight;this._____showOpaqueBlack&&(e.save(),e.beginPath(),e.globalAlpha=0.8,e.rect(0,0,f,g),e.fillStyle="black",e.fill(),e.restore())},showOpaqueBlack:function(e){this._____showOpaqueBlack=e},clicked:function(){this.disable||
ig.soundHandler.sfxPlayer.play(ig.soundHandler.sfxPlayer.soundList.click)},clicking:function(){},released:function(){}})});ig.baked=!0;
ig.module("game.entities.opening-shield").requires("impact.entity").defines(function(){EntityOpeningShield=ig.Entity.extend({size:{x:48,y:48},move:0,init:function(e,f,g){this.parent(e,f,g)},ready:function(){ig.wm||(_SETTINGS.DeveloperBranding.Splash.Enabled?this.initTimer=new ig.Timer(0.1):(ig.game.director.nextLevel(),ig.system.context.globalAlpha=1,this.kill()))},update:function(){this.parent()}})});ig.baked=!0;
ig.module("game.entities.opening-kitty").requires("impact.entity").defines(function(){EntityOpeningKitty=ig.Entity.extend({size:{x:48,y:48},soundKey:"kittyopeningSound",init:function(e,f,g){this.parent(e,f,g)},ready:function(){if(!ig.wm)if(_SETTINGS.DeveloperBranding.Splash.Enabled){this.initTimer=new ig.Timer(0.1);try{ig.game.settingsGame.soundOn&&ig.soundHandler.sfxPlayer.play(this.soundKey)}catch(e){console.log(e)}}else ig.game.director.nextLevel(),ig.system.context.globalAlpha=1,this.kill()},
update:function(){this.parent()},draw:function(){this.parent()}})});ig.baked=!0;
ig.module("game.entities.pointer").requires("impact.entity").defines(function(){EntityPointer=ig.Entity.extend({checkAgainst:ig.Entity.TYPE.BOTH,isFirstPressed:!1,isPressed:!1,isReleased:!1,isHovering:!1,hoveringItem:null,objectArray:[],clickedObjectList:[],ignorePause:!0,zIndex:5E3,check:function(e){this.objectArray.push(e)},clickObject:function(e){if(this.isFirstPressed&&"function"==typeof e.clicked){if(ig.game.__isMouseClicked)return;ig.game.__isMouseClicked=setTimeout(function(){delete ig.game.__isMouseClicked},
10);e.clicked();this.addToClickedObjectList(e)}this.isPressed&&!this.isReleased&&"function"==typeof e.clicking&&e.clicking();this.isReleased&&"function"==typeof e.released&&!ig.game.__isMouseReleased&&(ig.game.__isMouseReleased=setTimeout(function(){delete ig.game.__isMouseReleased},10),e.released(),this.removeFromClickedObjectList(e))},refreshPos:function(){this.pos=ig.game.io.getClickPos()},update:function(){this.parent();this.refreshPos();var e=null,f=-1;for(a=this.objectArray.length-1;-1<a;a--)this.objectArray[a].zIndex>
f&&(f=this.objectArray[a].zIndex,e=this.objectArray[a]);if(null!=e)null!=this.hoveringItem?this.hoveringItem!=e&&("function"==typeof this.hoveringItem.leave&&this.hoveringItem.leave(),"function"==typeof e.over&&e.over()):"function"==typeof e.over&&e.over(),this.hoveringItem=e,this.clickObject(e),this.objectArray=[];else if(null!=this.hoveringItem&&"function"==typeof this.hoveringItem.leave&&(this.hoveringItem.leave(),this.hoveringItem=null),this.isReleased){for(e=0;e<this.clickedObjectList.length;e++)f=
this.clickedObjectList[e],"function"==typeof f.releasedOutside&&f.releasedOutside();this.clickedObjectList=[]}this.isFirstPressed=ig.input.pressed("click");this.isReleased=ig.input.released("click");this.isPressed=ig.input.state("click")},addToClickedObjectList:function(e){this.clickedObjectList.push(e)},removeFromClickedObjectList:function(e){for(var f=[],g=0;g<this.clickedObjectList.length;g++){var j=this.clickedObjectList[g];j!=e&&f.push(j)}this.clickedObjectList=f}})});ig.baked=!0;
ig.module("game.entities.pointer-selector").requires("game.entities.pointer").defines(function(){EntityPointerSelector=EntityPointer.extend({zIndex:1E3,_wmDrawBox:!0,_wmBoxColor:"rgba(0, 0, 255, 0.7)",size:{x:20,y:20},init:function(e,f,g){this.parent(e,f,g)}})});ig.baked=!0;
ig.module("game.entities.select").requires("impact.entity").defines(function(){EntitySelect=ig.Entity.extend({type:ig.Entity.TYPE.B,checkAgainst:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,canSelect:!1,canSelectTimerDuration:0.35,zIndex:99999,isHovering:!1,isSelected:!1,init:function(e,f,g){this.parent(e,f,g);this.canSelectTimer=new ig.Timer(this.canSelectTimerDuration)},doesClickableLayerExist:function(e){for(k in dynamicClickableEntityDivs)if(k==e)return!0;return!1},checkClickableLayer:function(e,
f,g){"undefined"==typeof wm&&(this.doesClickableLayerExist(e)?(ig.game.showOverlay([e]),$("#"+e).find("[href]").attr("href",f)):this.createClickableOutboundLayer(e,f,"media/graphics/misc/invisible.png",g))},createClickableOutboundLayer:function(e,f,g,j){var l=ig.$new("div");l.id=e;document.body.appendChild(l);$("#"+l.id).css("float","left");$("#"+l.id).css("width",this.size.x*multiplier);$("#"+l.id).css("height",this.size.y*multiplier);$("#"+l.id).css("position","absolute");var n=w/2-destW/2,s=h/
2-destH/2;w==mobileWidth?($("#"+l.id).css("left",this.pos.x),$("#"+l.id).css("top",this.pos.y)):($("#"+l.id).css("left",n+this.pos.x*multiplier),$("#"+l.id).css("top",s+this.pos.y*multiplier));j?$("#"+l.id).html("<a target='_blank' href='"+f+"'><img style='width:100%;height:100%' src='"+g+"'></a>"):$("#"+l.id).html("<a href='"+f+"'><img style='width:100%;height:100%' src='"+g+"'></a>");dynamicClickableEntityDivs[e]={};dynamicClickableEntityDivs[e].width=$("#"+l.id).width();dynamicClickableEntityDivs[e].height=
$("#"+l.id).height();dynamicClickableEntityDivs[e].entity_pos_x=this.pos.x;dynamicClickableEntityDivs[e].entity_pos_y=this.pos.y},hovered:function(){this.isHovering=!0;this.dehoverOthers()},dehoverOthers:function(){var e=ig.game.getEntitiesByType(EntitySelect);for(i=0;i<e.length;i++)e[i]!=this&&(e[i].isHovering=!1)},deselectOthers:function(){var e=ig.game.getEntitiesByType(EntitySelect);for(i=0;i<e.length;i++)e[i]!=this&&(e[i].isSelected=!1)},update:function(){this.parent();this.canSelectTimer&&0<
this.canSelectTimer.delta()&&(this.canSelect=!0,this.canSelectTimer=null)}})});ig.baked=!0;ig.module("game.levels.opening").requires("impact.image","game.entities.opening-kitty").defines(function(){LevelOpening={entities:[{type:"EntityOpeningKitty",x:520,y:212}],layer:[]}});ig.baked=!0;
ig.module("game.entities.ingame.volume").requires("impact.entity","game.entities.buttons.button").defines(function(){EntityMusicVolume=ig.Entity.extend({size:{x:312,y:10},name:"music-volume",bar:new ig.Image("media/graphics/game/volume-bar.png"),border:new ig.Image("media/graphics/game/volume-base.png"),icon:new ig.Image("media/graphics/game/music.png"),zIndex:1E4,init:function(e,f,g){this.parent(e,f,g);ig.global.wm||(this.size.x=this.bar.width,this.size.y=this.bar.height);ig.game.sortEntitiesDeferred()},
update:function(){this.parent()},draw:function(){this.parent();this.border.draw(this.pos.x,this.pos.y);this.icon.draw(this.pos.x-60,this.pos.y);(439==ig.game.musicPos||125<ig.game.musicPos)&&this.bar.draw(this.pos.x+6,this.pos.y+7,0,0,ig.game.musicVol*this.bar.width,this.bar.height);125==ig.game.musicPos&&this.bar.draw(this.pos.x+6,this.pos.y+7,0,0,ig.game.musicVol*this.bar.width+2,this.bar.height)}});EntitySoundVolume=ig.Entity.extend({size:{x:312,y:10},name:"sound-volume",bar:new ig.Image("media/graphics/game/volume-bar.png"),
border:new ig.Image("media/graphics/game/volume-base.png"),icon:new ig.Image("media/graphics/game/sound.png"),zIndex:1E4,init:function(e,f,g){this.parent(e,f,g);ig.global.wm||(this.size.x=this.bar.width,this.size.y=this.bar.height);ig.game.sortEntitiesDeferred()},update:function(){this.parent()},draw:function(){this.parent();this.border.draw(this.pos.x,this.pos.y);this.icon.draw(this.pos.x-60,this.pos.y);(439==ig.game.soundPos||125<ig.game.soundPos)&&this.bar.draw(this.pos.x+6,this.pos.y+7,0,0,ig.game.soundVol*
this.bar.width,this.bar.height);125==ig.game.soundPos&&this.bar.draw(this.pos.x+6,this.pos.y+7,0,0,ig.game.soundVol*this.bar.width+2,this.bar.height)}});EntityButtonMusic=EntityButton.extend({size:{x:40,y:40},offset:{x:0,y:0},type:ig.Entity.TYPE.B,name:"btn-music",cli:!1,sfxClick:"clickSound",animSheet:new ig.AnimationSheet("media/graphics/game/volume-slide.png",40,40),zIndex:10001,init:function(e,f,g){this.parent(e,f,g);this.addAnim("idle",1,[0]);this.currentAnim=this.anims.idle;this.currentAnim.pivot.x=
this.size.x/2},ready:function(){},update:function(){this.parent()},endUp:function(){},clicked:function(){this.cli=!0},clicking:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.pos.x=this.pointer.pos.x-15;this.pos.x>ig.system.width/4+304?this.pos.x=ig.system.width/4+304:this.pos.x<ig.system.width/4-10&&(this.pos.x=ig.system.width/4-10);ig.game.musicPos=this.pos.x;ig.game.musicVol=(this.pos.x-(ig.system.width/4-10))/(ig.system.width/4+304-(ig.system.width/4-10));ig.soundHandler.bgmPlayer.volume(ig.game.musicVol);
ig.game.musicVol=ig.game.musicVol;ig.game.storage.set("blocks-music-vol",ig.game.musicVol);ig.game.musicPos=ig.game.musicPos;ig.game.storage.set("blocks-music-pos",ig.game.musicPos)},released:function(){this.cli=!1},draw:function(){this.parent()}});EntityButtonSound=EntityButton.extend({size:{x:40,y:40},offset:{x:0,y:0},type:ig.Entity.TYPE.A,name:"btn-sound",cli:!1,sfxClick:"clickSound",animSheet:new ig.AnimationSheet("media/graphics/game/volume-slide.png",40,40),zIndex:10001,init:function(e,f,g){this.parent(e,
f,g);this.addAnim("idle",1,[0]);this.currentAnim=this.anims.idle;this.currentAnim.pivot.x=this.size.x/2},ready:function(){},update:function(){this.parent()},endUp:function(){},clicked:function(){this.cli=!0},clicking:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.pos.x=this.pointer.pos.x-15;this.pos.x>ig.system.width/4+304?this.pos.x=ig.system.width/4+304:this.pos.x<ig.system.width/4-10&&(this.pos.x=ig.system.width/4-10);ig.game.soundPos=this.pos.x;ig.game.soundVol=(this.pos.x-
(ig.system.width/4-10))/(ig.system.width/4+304-(ig.system.width/4-10));ig.soundHandler.sfxPlayer.volume(ig.game.soundVol);ig.game.soundVol=ig.game.soundVol;ig.game.storage.set("blocks-sound-vol",ig.game.soundVol);ig.game.soundPos=ig.game.soundPos;ig.game.storage.set("blocks-sound-pos",ig.game.soundPos)},released:function(){this.cli=!1},draw:function(){this.parent()}})});ig.baked=!0;
ig.module("game.entities.panels.pause").requires("impact.entity","game.entities.ingame.volume").defines(function(){new ig.Timer;EntityPanelPause=ig.Entity.extend({collides:ig.Entity.COLLIDES.NEVER,type:ig.Entity.TYPE.A,zIndex:9999,fontStyle:"acrom-bold",size:{x:474,y:474},spawn:!1,hiding:!1,animSheet:new ig.AnimationSheet("media/graphics/game/pop-border.png",474,474),init:function(e,f,g){this.parent(e,f,g);this.addAnim("idle",1,[0]);this.spawn=!0;ig.game.spawnEntity(EntityButtonContinue,-100,0,{con:0});
this.continueBtn=ig.game.entities[ig.game.entities.length-1];ig.game.spawnEntity(EntityButtonReplayPop,-100,0,{replay:1});this.replayBtn=ig.game.entities[ig.game.entities.length-1];ig.game.spawnEntity(EntityButtonHome,-100,0);this.homeBtn=ig.game.entities[ig.game.entities.length-1];ig.game.spawnEntity(EntityMusicVolume,0,-100);this.music=ig.game.entities[ig.game.entities.length-1];ig.game.spawnEntity(EntitySoundVolume,0,-100);this.sound=ig.game.entities[ig.game.entities.length-1];ig.game.spawnEntity(EntityButtonMusic,
ig.game.musicPos,-100);this.musicvol=ig.game.entities[ig.game.entities.length-1];ig.game.spawnEntity(EntityButtonSound,ig.game.soundPos,-100);this.soundvol=ig.game.entities[ig.game.entities.length-1];ig.game.sortEntitiesDeferred()},ready:function(){},update:function(){this.parent();this.currentAnim.alpha=this.opacity;ig.game.menu?(this.homeBtn.pos.x=this.pos.x+this.size.x/2-this.homeBtn.size.x/2-67-33.5,this.homeBtn.pos.y=this.pos.y-500,this.replayBtn.pos.x=this.pos.x+this.size.x/2-this.replayBtn.size.x/
2+100.5,this.replayBtn.pos.y=this.pos.y-500,this.continueBtn.pos.x=this.pos.x+this.size.x/2-this.continueBtn.size.x/2,this.continueBtn.pos.y=this.pos.y+this.size.y/2-this.continueBtn.size.y/2+150):(this.homeBtn.pos.x=this.pos.x+this.size.x/2-this.homeBtn.size.x/2-67-33.5,this.homeBtn.pos.y=this.pos.y+this.size.y/2-this.homeBtn.size.y/2+150,this.continueBtn.pos.x=this.pos.x+this.size.x/2-this.continueBtn.size.x/2,this.continueBtn.pos.y=this.pos.y+this.size.y/2-this.continueBtn.size.y/2+150,this.replayBtn.pos.x=
this.pos.x+this.size.x/2-this.replayBtn.size.x/2+100.5,this.replayBtn.pos.y=this.pos.y+this.size.y/2-this.replayBtn.size.y/2+150);this.music.pos.x=this.pos.x+100;this.music.pos.y=this.pos.y+150;this.sound.pos.x=this.pos.x+100;this.sound.pos.y=this.pos.y+230;this.musicvol.pos.x=ig.game.musicPos;this.musicvol.pos.y=this.pos.y+142;this.soundvol.pos.x=ig.game.soundPos;this.soundvol.pos.y=this.pos.y+222},draw:function(){this.parent();var e=ig.system.context;e.font="50px "+this.fontStyle;e.fillStyle="white";
e.textAlign="center";this.poptext=[_STRINGS.Game.Settings,_STRINGS.Game.Paused];ig.game.menu?!1==this.hiding&&e.fillText(this.poptext[0],this.pos.x+this.size.x/2,this.pos.y+70):ig.game.menu||e.fillText(this.poptext[1],this.pos.x+this.size.x/2,this.pos.y+70)},show:function(e,f){this.hiding=!1;ig.game.mainMenu.mainGame.isGamePause=!0;ig.game.mainMenu.mainGame.showOpaqueBlack(!0);ig.game.mainMenu.scorePanel.hide();ig.game.maingame?(ig.game.mainMenu.pauseBtn.hide(),ig.game.mainMenu.replayButton.hide()):
(ig.game.mainMenu.playBtn.hide(0.1),ig.game.mainMenu.settingsBtn.hide(0.1),_SETTINGS.MoreGames.Enabled&&ig.game.mainMenu.moreGamesBtn.hide(0.1));this.spawn=ig.game.poppaused=!0;for(var g=0;g<ig.game.mainMenu.mainGame.visibleCoins.length;g++){var j=ig.game.mainMenu.mainGame.visibleCoins[g];try{j.tweenToUpperLeft()}catch(l){}}ig.game.mainMenu.mainGame.____onGoingTutorial&&ig.game.mainMenu.mainGame.___handPointer&&(ig.game.mainMenu.mainGame.___handPointer.hide(),ig.game.mainMenu.mainGame.___handPointer.pauseTweens());
null==e&&(e=0.5);g=ig.system.realWidth/2-this.size.x/2;j=ig.system.realHeight/2-this.size.y/2;this.______isTweening||(this.______isTweening=!0,ig.game.mainMenu.playBtn.disable=!0,this.continueBtn.disable=!0,this.replayBtn.disable=!0,this.homeBtn.disable=!0,this.tween({pos:{x:g,y:j}},e,{onComplete:function(){delete this.______isTweening;delete this.continueBtn.disable;delete this.replayBtn.disable;delete this.homeBtn.disable;f?f():""}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start())},
hide:function(e,f){this.hiding=!0;delete ig.game.mainMenu.mainGame.isGamePause;ig.game.mainMenu.mainGame.showOpaqueBlack(!1);ig.game.poppaused=!1;ig.game.maingame||(ig.game.mainMenu.playBtn.show(),ig.game.mainMenu.settingsBtn.show(),_SETTINGS.MoreGames.Enabled&&ig.game.mainMenu.moreGamesBtn.show());this.spawn=!1;ig.game.mainMenu.mainGame.____onGoingTutorial&&ig.game.mainMenu.mainGame.___handPointer&&(ig.game.mainMenu.mainGame.___handPointer.show(),ig.game.mainMenu.mainGame.___handPointer.resumeTweens());
null==e&&(e=0.5);var g=ig.system.realWidth/2-this.size.x/2,j=-this.size.y;this.______isTweening||(this.______isTweening=!0,ig.game.mainMenu.playBtn.disable=!1,this.continueBtn.disable=!0,this.replayBtn.disable=!0,this.homeBtn.disable=!0,this.tween({pos:{x:g,y:j}},e,{onComplete:function(){delete this.______isTweening;ig.game.maingame&&(ig.game.mainMenu.pauseBtn.show(),ig.game.mainMenu.replayButton.show());delete this.continueBtn.disable;delete this.replayBtn.disable;delete this.homeBtn.disable;f?f():
""}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start())}})});ig.baked=!0;
ig.module("game.entities.panels.score").requires("impact.entity","game.entities.buttons.button").defines(function(){new ig.Timer;EntityPanelScore=ig.Entity.extend({zIndex:9999,fontStyle:"acrom-bold",opacity:1,disable:!1,size:{x:474,y:474},type:ig.Entity.TYPE.A,animSheet:new ig.AnimationSheet("media/graphics/game/border-over.png",474,474),scorePanel:new ig.Image("media/graphics/game/border-score.png"),init:function(e,f,g){this.parent(e,f,g);this.addAnim("idle",1,[0]);ig.game.spawnEntity(EntityButtonReplayPop,
0,0,{replay:1});this.replayBtn=ig.game.entities[ig.game.entities.length-1];ig.game.spawnEntity(EntityButtonHome,0,0);this.homeBtn=ig.game.entities[ig.game.entities.length-1]},ready:function(){},update:function(){this.parent();this.currentAnim.alpha=this.opacity;this.replayBtn.pos.x=this.pos.x+this.size.x/2-this.replayBtn.size.x/2+40;this.replayBtn.pos.y=this.pos.y+this.size.y-this.replayBtn.size.y/2-70;this.homeBtn.pos.x=this.pos.x+this.size.x/2-this.homeBtn.size.x/2-40;this.homeBtn.pos.y=this.pos.y+
this.size.y-this.homeBtn.size.y/2-70},draw:function(){this.parent();this.scorePanel.draw(this.pos.x+this.size/2-20,this.pos.y+50);var e=ig.system.context,f=this.pos.x+this.size.x/2,g=this.pos.y+45+5;e.textAlign="center";e.font="45px "+this.fontStyle;e.fillStyle="white";e.fillText(_STRINGS.Game.GameOver,f,g+10);e.font="35px "+this.fontStyle;g+=113;e.fillStyle="white";var j=parseInt(ig.game.mainMenu.mainGame.playerScore||0).toLocaleString();e.fillText(j,f,g);e.fillStyle="#e657a0";e.font="35px "+this.fontStyle;
g+=80;e.fillText(_STRINGS.Game.Best,f-50,g);e.font="35px "+this.fontStyle;g+=0;e.fillStyle="#e657a0";j=parseInt(ig.game.io.storage.get("blocks-highscore")||0).toLocaleString();e.fillText(j,f+60,g)},show:function(e,f){ig.game.mainMenu.mainGame.showOpaqueBlack(!0);ig.game.mainMenu.pausePanel.hide();ig.game.mainMenu.pauseBtn.hide();ig.game.mainMenu.replayButton.hide();for(var g=0;g<ig.game.mainMenu.mainGame.visibleCoins.length;g++){var j=ig.game.mainMenu.mainGame.visibleCoins[g];try{j.tweenToUpperLeft()}catch(l){}}null==
e&&(e=0.5);g=ig.system.realWidth/2-this.size.x/2;j=ig.system.realHeight/2-this.size.y/2;this.replayBtn.disable=!0;this.homeBtn.disable=!0;this.tween({pos:{x:g,y:j}},e,{onComplete:function(){delete this.replayBtn.disable;delete this.homeBtn.disable;f?f():""}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start()},hide:function(e,f){ig.game.mainMenu.mainGame.showOpaqueBlack(!1);ig.game.mainMenu.pauseBtn.show();ig.game.mainMenu.replayButton.show();null==e&&(e=0.5);var g=ig.system.realWidth/
2-this.size.x/2,j=-this.size.y;this.replayBtn.disable=!0;this.homeBtn.disable=!0;this.tween({pos:{x:g,y:j}},e,{onComplete:function(){delete this.replayBtn.disable;delete this.homeBtn.disable;f?f():""}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start()}})});ig.baked=!0;
ig.module("game.entities.buttons.button-settings").requires("impact.entity","game.entities.buttons.button").defines(function(){new ig.Timer;EntityButtonSettings=EntityButton.extend({zIndex:9998,fontStyle:"acrom-bold",opacity:1,disable:!1,cli:!1,size:{x:231,y:74},animSheet:new ig.AnimationSheet("media/graphics/game/btn-blue.png",231,74),init:function(e,f,g){this.parent(e,f,g);this.addAnim("idle",1,[0])},ready:function(){},update:function(){this.parent();this.currentAnim.alpha=this.opacity;var e=ig.game.io.mouse.getPos();
!ig.ua.mobile&&e.x>=this.pos.x&&e.x<=this.pos.x+this.size.x&&e.y>=this.pos.y&&e.y<=this.pos.y+this.size.y&&!1==this.cli?(this.mouseOver=!0,this.setScale(1.1,1.1)):(this.mouseOver=this.cli=!1,this.setScale(1,1))},clicked:function(){this.cli=!0;this.setScale(0.8,0.8);!this.disable&&ig.game.menu&&!0==this.cli&&(ig.soundHandler.sfxPlayer.play(ig.soundHandler.sfxPlayer.soundList.click),ig.game.mainMenu.pausePanel.show(),ig.game.mainMenu.pauseBtn.hide(),ig.game.mainMenu.replayButton.hide())},clicking:function(){},
released:function(){this.cli=!1;this.setScale(1,1)},draw:function(){this.parent();var e=ig.system.context,f=35;this.mouseOver&&(f*=this.scale.x);e.font=f+"px "+this.fontStyle;e.fillStyle="white";e.textAlign="center";e.textBaseline="alphabetic";f=ig.system.context.globalAlpha;ig.system.context.globalAlpha=this.opacity;e.fillText(_STRINGS.Game.ButtonLabels.Settings,this.pos.x+this.size.x/2,this.pos.y+this.size.y/2+5);ig.system.context.globalAlpha=f},disableClick:function(){this.disable=!0},enableClick:function(){this.disable=
!1},show:function(e,f){this.disable=!0;null==e&&(e=0.5);this.pos.x=270-this.size.x/2;this.tween({opacity:1},e,{onComplete:function(){this.disable=!1;f?f():""}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start()},hide:function(e,f){this.disable=!0;null==e&&(e=0.5);this.tween({opacity:0},e,{onComplete:function(){this.disable=!1;this.setScale(1,1);this.__oldX=this.pos.x;this.pos.x=-999;f?f():""}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start()}})});ig.baked=!0;
ig.module("game.entities.buttons.button-home").requires("impact.entity","game.entities.buttons.button").defines(function(){new ig.Timer;timer=new ig.Timer;EntityButtonHome=EntityButton.extend({zIndex:1E4,opacity:1,disable:!1,cli:!1,clic:!1,size:{x:67,y:67},animSheet:new ig.AnimationSheet("media/graphics/game/btn-home.png",67,67),init:function(e,f,g){this.parent(e,f,g);this.addAnim("idle",1,[0]);this.timinghide=new ig.Timer},ready:function(){},update:function(){this.parent();this.currentAnim.alpha=
this.opacity;var e=ig.game.io.mouse.getPos();!ig.ua.mobile&&e.x>=this.pos.x&&e.x<=this.pos.x+this.size.x&&e.y>=this.pos.y&&e.y<=this.pos.y+this.size.y&&!1==this.cli?(this.mouseOver=!0,this.setScale(1.1,1.1)):(this.mouseOver=this.cli=!1,this.setScale(1,1))},clicked:function(){this.cli=!0;this.setScale(0.8,0.8)},clicking:function(){},released:function(){this.cli=!1;this.setScale(1,1);this.disable||(ig.soundHandler.sfxPlayer.play(ig.soundHandler.sfxPlayer.soundList.click),ig.game.mainMenu.scorePanel.hide(),
ig.game.mainMenu.goToMainMenu(),this.clic=!0)},draw:function(){this.parent()},show:function(e,f){this.disable=!0;this.hiding=!1;null==e&&(e=0.5);this.pos.x=this.__oldX;this.tween({opacity:1},e,{onComplete:function(){this.disable=!1;f?f():""}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start()},hide:function(e,f){this.hiding=this.disable=!0;null==e&&(e=0.5);this.tween({opacity:0},e,{onComplete:function(){this.disable=!1;this.setScale(1,1);this.__oldX=this.pos.x;this.pos.x=-999;f?f():
""}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start()}})});ig.baked=!0;
ig.module("game.entities.buttons.button-play").requires("impact.entity","game.entities.buttons.button").defines(function(){new ig.Timer;EntityButtonPlay=EntityButton.extend({zIndex:9998,fontStyle:"acrom-bold",opacity:1,disable:!1,cli:!1,size:{x:231,y:75},animSheet:new ig.AnimationSheet("media/graphics/game/btn-pink.png",231,75),init:function(e,f,g){this.parent(e,f,g);this.addAnim("idle",1,[0]);this.fsBtn=ig.game.spawnEntity(ig.FullscreenButton,5,5,{enterImage:new ig.Image("media/graphics/sprites/enter-fullscreen-transparent.png"),
exitImage:new ig.Image("media/graphics/sprites/exit-fullscreen-transparent.png")})},ready:function(){},update:function(){this.parent();this.currentAnim.alpha=this.opacity;var e=ig.game.io.mouse.getPos();!ig.ua.mobile&&e.x>=this.pos.x&&e.x<=this.pos.x+this.size.x&&e.y>=this.pos.y&&e.y<=this.pos.y+this.size.y&&!1==this.cli?(this.mouseOver=!0,this.setScale(1.1,1.1)):(this.mouseOver=this.cli=!1,this.setScale(1,1))},clicked:function(){this.cli=!0;this.setScale(0.8,0.8);!this.disable&&!0==this.cli&&(ig.soundHandler.sfxPlayer.play(ig.soundHandler.sfxPlayer.soundList.click),
this.fsBtn.hide(),ig.game.mainMenu.goToMainGame())},clicking:function(){},released:function(){this.cli=!1;this.setScale(1,1)},draw:function(){this.parent();var e=ig.system.context,f=40;this.mouseOver&&(f*=this.scale.x);e.font=f+"px "+this.fontStyle;e.fillStyle="white";e.textAlign="center";e.textBaseline="alphabetic";f=ig.system.context.globalAlpha;ig.system.context.globalAlpha=this.opacity;e.fillText(_STRINGS.Game.ButtonLabels.Play,this.pos.x+this.size.x/2+5,this.pos.y+this.size.y/2+10);ig.system.context.globalAlpha=
f},disableClick:function(){this.disable=!0},enableClick:function(){this.disable=!1},show:function(e,f){this.disable=!0;null==e&&(e=0.5);this.pos.x=270-this.size.x/2;this.tween({opacity:1},e,{onComplete:function(){this.disable=!1;this.fsBtn.show();f?f():""}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start()},hide:function(e,f){this.disable=!0;null==e&&(e=0.5);this.tween({opacity:0},e,{onComplete:function(){this.disable=!1;this.setScale(1,1);this.__oldX=this.pos.x;this.pos.x=-999;f?
f():""}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start()}})});ig.baked=!0;
ig.module("game.entities.buttons.button-continue").requires("impact.entity","game.entities.buttons.button").defines(function(){new ig.Timer;EntityButtonContinue=EntityButton.extend({zIndex:1E4,opacity:1,disable:!1,cli:!1,size:{x:94,y:93},data:{animSheet:["media/graphics/game/btn-continue.png","media/graphics/game/btn-ok.png"],size:[{x:94,y:93},{x:95,y:94}],offset:[{x:0,y:0},{x:0,y:0}],sprite:[{x:94,y:93},{x:95,y:94}],anims:[[[0]],[[0]]]},init:function(e,f,g){this.parent(e,f,g);this.size=this.data.size[g.con];
this.offset=this.data.offset[g.con];this.sprite=this.data.sprite[g.con];this.animSheet=new ig.AnimationSheet(this.data.animSheet[g.con],this.sprite.x,this.sprite.y);this.addAnim("idle",1,this.data.anims[g.con][0]);this.currentAnim.pivot.x=this.size.x/2},ready:function(){},update:function(){this.parent();this.currentAnim.alpha=this.opacity;var e=ig.game.io.mouse.getPos();!ig.ua.mobile&&e.x>=this.pos.x&&e.x<=this.pos.x+this.size.x&&e.y>=this.pos.y&&e.y<=this.pos.y+this.size.y&&!1==this.cli?(this.mouseOver=
!0,this.setScale(1.1,1.1)):(this.mouseOver=this.cli=!1,this.setScale(1,1))},clicked:function(){this.cli=!0;this.setScale(0.8,0.8)},clicking:function(){},released:function(){this.cli=!1;this.setScale(1,1);this.disable||(ig.soundHandler.sfxPlayer.play(ig.soundHandler.sfxPlayer.soundList.click),ig.game.mainMenu.pausePanel.hide())},draw:function(){this.parent();this.sprite==this.data.sprite[1]&&(!1==this.cli?this.fnDrawText(ig.system.context,_STRINGS.Game.Ok,this.pos.x+48,this.pos.y+60,"#ffffff","28pt acrom-bold"):
this.fnDrawText(ig.system.context,_STRINGS.Game.Ok,this.pos.x+50,this.pos.y+65,"#ffffff","32pt acrom-bold"))},fnDrawText:function(e,f,g,j,l,n){this.q=f;this.width=g;this.height=j;this.textcolor=l;this.textsize=n;e=ig.system.context;e.font=this.textsize;e.textAlign="center";e.textBaseline="alphabetic";e.fillStyle=this.textcolor;e.fillText(this.q,this.width,this.height)},checkOverlapWithPointer:function(){var e=ig.game.getEntitiesByType(EntityPointer)[0];e.pos.x>this.pos.x+this.size.x&&this.released();
e.pos.x+e.size.x<this.pos.x&&this.released();e.pos.y>this.pos.y+this.size.y&&this.released();e.pos.y+e.size.y<this.pos.y&&this.released()},show:function(e,f){this.disable=!0;null==e&&(e=0.5);this.pos.x=this.__oldX;this.tween({opacity:1},e,{onComplete:function(){this.disable=!1;f?f():""}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start()},hide:function(e,f){this.disable=!0;null==e&&(e=0.5);this.tween({opacity:0},e,{onComplete:function(){this.disable=!1;this.setScale(1,1);this.__oldX=
this.pos.x;this.pos.x=-999;f?f():""}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start()}})});ig.baked=!0;
ig.module("game.entities.buttons.button-replay").requires("impact.entity","game.entities.buttons.button").defines(function(){new ig.Timer;EntityButtonReplay=EntityButton.extend({zIndex:1E4,opacity:1,disable:!1,cli:!1,size:{x:53,y:46},data:{animSheet:["media/graphics/game/btn-replay.png","media/graphics/game/btn-replay-over.png"],size:[{x:53,y:46},{x:67,y:67}],offset:[{x:0,y:0},{x:0,y:0}],sprite:[{x:53,y:46},{x:67,y:67}],anims:[[[0]],[[0]]]},init:function(e,f,g){this.parent(e,f,g);this.size=this.data.size[g.replay];
this.offset=this.data.offset[g.replay];this.sprite=this.data.sprite[g.replay];this.animSheet=new ig.AnimationSheet(this.data.animSheet[g.replay],this.sprite.x,this.sprite.y);this.addAnim("idle",1,this.data.anims[g.replay][0]);this.currentAnim.pivot.x=this.size.x/2},ready:function(){},update:function(){this.parent();this.currentAnim.alpha=this.opacity;var e=ig.game.io.mouse.getPos();!ig.ua.mobile&&e.x>=this.pos.x&&e.x<=this.pos.x+this.size.x&&e.y>=this.pos.y&&e.y<=this.pos.y+this.size.y&&!1==this.cli?
(this.mouseOver=!0,this.setScale(1.1,1.1)):(this.mouseOver=this.cli=!1,this.setScale(1,1))},clicked:function(){this.cli=!0;this.setScale(0.8,0.8)},clicking:function(){},released:function(){this.cli=!1;this.setScale(1,1);this.disable||(ig.soundHandler.sfxPlayer.play(ig.soundHandler.sfxPlayer.soundList.click),ig.game.mainMenu.pausePanel.hide(),ig.game.mainMenu.scorePanel.hide(),ig.game.mainMenu.mainGame.playerScore=0,ig.game.mainMenu.mainGame.startNewGame(),ig.game.mainMenu.mainGame.____onGoingTutorial&&
(delete ig.game.mainMenu.mainGame.____onGoingTutorial,ig.game.mainMenu.mainGame.___handPointer.stopTweens(),ig.game.mainMenu.mainGame.___handPointer.pos.x=-999,ig.game.mainMenu.mainGame.___handPointer.pos.y=-999))},draw:function(){this.parent()},show:function(e,f){this.status=this.disable=!0;null==e&&(e=0.2);this.pos.x=30;this.tween({opacity:1},e,{onComplete:function(){this.disable=!1;f?f():""}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start()},hide:function(e,f){this.disable=!0;
this.status=!1;null==e&&(e=0.2);this.tween({opacity:0},e,{onComplete:function(){this.disable=!1;this.setScale(1,1);this.__oldX=this.pos.x;this.pos.x=-999;f?f():""}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start()}});EntityButtonReplayPop=EntityButtonReplay.extend({zIndex:1E4,opacity:1,disable:!1,cli:!1,size:{x:67,y:67},data:{animSheet:["media/graphics/game/btn-replay.png","media/graphics/game/btn-replay-over.png"],size:[{x:53,y:46},{x:67,y:67}],offset:[{x:0,y:0},{x:0,y:0}],sprite:[{x:53,
y:46},{x:67,y:67}],anims:[[[0]],[[0]]]},init:function(e,f,g){this.parent(e,f,g)},ready:function(){this.parent()},update:function(){this.parent()},clicked:function(){this.parent()},clicking:function(){this.parent()},released:function(){this.parent()},draw:function(){this.parent()},show:function(){this.parent()},hide:function(){this.parent()}})});ig.baked=!0;
ig.module("game.entities.buttons.button-select").requires("impact.entity","game.entities.buttons.button").defines(function(){new ig.Timer;EntityButtonSelect=EntityButton.extend({zIndex:1E4,fontStyle:"acrom-bold",opacity:1,disable:!1,size:{x:231,y:75},animSheet:new ig.AnimationSheet("media/graphics/game/btn-pink.png",231,75),init:function(e,f,g){this.parent(e,f,g);this.addAnim("idle",1,[0])},ready:function(){},update:function(){this.parent();var e=ig.game.io.mouse.getPos();!ig.ua.mobile&&e.x>=this.pos.x&&
e.x<=this.pos.x+this.size.x&&e.y>=this.pos.y&&e.y<=this.pos.y+this.size.y?(this.mouseOver=!0,this.setScale(1.1,1.1)):(this.mouseOver=!1,this.setScale(1,1));var f=ig.game.mainMenu.mainGame.gameThemes,e=ig.game.io.storage.get("hexable-unlockedThemes")||{},g=ig.game.mainMenu.themePanel.currentPreviewIndex||0,f=f[g],j=ig.game.io.storage.get("hexable-playercoins")||0,l=ig.game.io.storage.get("hexable-indexSelectedTheme")||0;this.opacity=f&&f.price&&!e[f.name]&&f.price>j||g==l?0:1;this.currentAnim.alpha=
this.opacity},clicked:function(){},clicking:function(){this.setScale(0.95,0.95)},released:function(){},draw:function(){this.parent();var e=ig.system.context,f=22;this.mouseOver&&(f*=this.scale.x);e.font=f+"px "+this.fontStyle;e.fillStyle="white";e.textAlign="center";var g=ig.system.context.globalAlpha,j=ig.game.io.storage.get("hexable-unlockedThemes")||{},l=this.gameThemes[ig.game.mainMenu.themePanel.currentPreviewIndex||0];ig.system.context.globalAlpha=this.opacity;l&&l.price&&!j[l.name]?e.fillText(_STRINGS.Game.ButtonLabels.BuyTheme+
" $"+l.price,this.pos.x+this.size.x/2,this.pos.y+this.size.y/2+f/2.5):e.fillText(_STRINGS.Game.ButtonLabels.SelectTheme,this.pos.x+this.size.x/2,this.pos.y+this.size.y/2+f/2.5);ig.system.context.globalAlpha=g},show:function(e,f){this.disable=!0;null==e&&(e=0.5);this.pos.x=this.__oldX;this.tween({opacity:1},e,{onComplete:function(){this.disable=!0;f?f():""}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start()},hide:function(e,f){this.disable=!0;null==e&&(e=0.5);this.tween({opacity:0},
e,{onComplete:function(){this.disable=!1;this.setScale(1,1);this.__oldX=this.pos.x;this.pos.x=-999;f?f():""}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start()}})});ig.baked=!0;
ig.module("game.entities.buttons.button-pause").requires("impact.entity","game.entities.buttons.button").defines(function(){new ig.Timer;EntityButtonPause=EntityButton.extend({zIndex:10002,opacity:1,disable:!1,cli:!1,size:{x:32,y:36},animSheet:new ig.AnimationSheet("media/graphics/game/btn-pause.png",32,36),init:function(e,f,g){this.parent(e,f,g);this.addAnim("idle",1,[0])},ready:function(){},update:function(){this.parent();var e=ig.game.io.mouse.getPos();!ig.ua.mobile&&e.x>=this.pos.x&&e.x<=this.pos.x+
this.size.x&&e.y>=this.pos.y&&e.y<=this.pos.y+this.size.y&&!1==this.cli?(this.mouseOver=!0,this.setScale(1.1,1.1)):(this.mouseOver=this.cli=!1,this.setScale(1,1));this.currentAnim.alpha=this.opacity},clicked:function(){this.cli=!0;this.setScale(0.8,0.8)},clicking:function(){},released:function(){this.cli=!1;this.setScale(1,1);!this.disable&&!ig.game.mainMenu.mainGame.isGameOver&&(ig.soundHandler.sfxPlayer.play(ig.soundHandler.sfxPlayer.soundList.click),ig.game.mainMenu.pausePanel.show())},draw:function(){this.parent()},
show:function(e,f){this.disable=!0;null==e&&(e=0.2);this.pos.x=480;this.tween({opacity:1},e,{onComplete:function(){this.disable=!1;f?f():""}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start()},hide:function(e,f){this.disable=!0;null==e&&(e=0.2);this.tween({opacity:0},e,{onComplete:function(){this.disable=!1;this.setScale(1,1);this.__oldX=this.pos.x;this.pos.x=-999;f?f():""}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start()}})});ig.baked=!0;
ig.module("game.entities.settings.screenfademobile").requires("impact.entity").defines(function(){EntityScreenFademobile=ig.Entity.extend({size:{x:960,y:540},name:"screenfade-mobile",alphaFade:0,type:ig.Entity.TYPE.B,zIndex:9998,animSheet:new ig.AnimationSheet("media/graphics/game/background.png",540,960),init:function(e,f,g){this.parent(e,f,g);this.addAnim("idle",1,[0]);this.currentAnim=this.anims.idle;this.anims.idle.alpha=0;this.currentAnim.pivot.x=this.size.x/2;ig.game.sortEntitiesDeferred()},
update:function(){this.parent()},fadescreenAnim:function(){this.tween({currentAnim:{alpha:1}},0.3,{easing:ig.Tween.Easing.Sinusoidal.EaseIn}).start()},fadeoutAnim:function(){this.tween({currentAnim:{alpha:0}},0.3,{easing:ig.Tween.Easing.Sinusoidal.EaseIn}).start()},show:function(){this.fadescreenAnim();this.pos.x=0;this.pos.y=0},hide:function(){this.fadeoutAnim();this.pos.x=0;this.pos.y=-999}})});ig.baked=!0;
ig.module("game.entities.menu").requires("impact.entity","game.entities.settings.screenfademobile").defines(function(){EntityMenu=ig.Entity.extend({zIndex:1,opacity:1,size:{x:540,y:960},animSheet:new ig.AnimationSheet("media/graphics/game/bg.png",540,960),init:function(e,f,g){this.parent(e,f,g);ig.game.menu=!0;this.addAnim("idle",1,[0]);this.currentAnim.idle;this.anims.idle.alpha=1;ig.game.mainMenu=this;this.fadescreenAnim(0.5);e=480;ig.game.spawnEntity(EntityButtonPlay,0,0);this.playBtn=ig.game.entities[ig.game.entities.length-
1];this.playBtn.pos.x=270-this.playBtn.size.x/2;e+=10;this.playBtn.pos.y=e-15;e+=this.playBtn.size.y;ig.game.spawnEntity(EntityButtonSettings,0,0);this.settingsBtn=ig.game.entities[ig.game.entities.length-1];this.settingsBtn.pos.x=270-this.settingsBtn.size.x/2;e+=10;this.settingsBtn.pos.y=e-15;e+=this.settingsBtn.size.y+10;ig.game.spawnEntity(EntityButtonMoreGames,270-this.playBtn.size.x/2,e-15);this.moreGamesBtn=ig.game.entities[ig.game.entities.length-1];ig.game.spawnEntity(EntityScreenFademobile,
0,0);this.fade=ig.game.entities[ig.game.entities.length-1];this.fade.pos.x=0;this.fade.pos.y=0;this.fade.hide(0);ig.game.spawnEntity(EntityButtonPause,0,0);this.pauseBtn=ig.game.entities[ig.game.entities.length-1];this.pauseBtn.pos.x=480;this.pauseBtn.pos.y=23;this.pauseBtn.hide(0);ig.game.spawnEntity(EntityButtonReplay,0,0,{replay:0});this.replayButton=ig.game.entities[ig.game.entities.length-1];this.replayButton.pos.x=20;this.replayButton.pos.y=17;this.replayButton.hide(0);ig.game.spawnEntity(EntityMainGame,
0,0);this.mainGame=ig.game.entities[ig.game.entities.length-1];ig.game.spawnEntity(EntityPanelPause,0,0);this.pausePanel=ig.game.entities[ig.game.entities.length-1];this.pausePanel.pos.x=270-this.pausePanel.size.x/2;this.pausePanel.pos.y=0-this.pausePanel.size.y;this.pausePanel.hide();ig.game.spawnEntity(EntityPanelScore,0,0);this.scorePanel=ig.game.entities[ig.game.entities.length-1];this.scorePanel.pos.x=270-this.scorePanel.size.x/2;this.scorePanel.pos.y=0-this.scorePanel.size.y;ig.game.spawnEntity(EntityPointer,
0,0);ig.game.sortEntities();this.setGameTheme()},draw:function(){this.parent();this.drawOpaqueBlack()},update:function(){this.parent()},show:function(e,f){ig.game.menu=!0;null==e&&(e=0.2);this.pos.x=0;this.opacity=1;this.tween({opacity:1},e,{onComplete:function(){f?f():"";this.settingsBtn.show(0.2);this.playBtn.show(0.2);_SETTINGS.MoreGames.Enabled&&this.moreGamesBtn.show(0.2)}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start()},hide:function(e,f){ig.game.menu=!1;null==e&&(e=0.2);
this.tween({opacity:0},e,{onComplete:function(){this.__oldX=this.pos.x;this.pos.x=-999;f?f():""}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start();this.settingsBtn.hide(0.1);this.playBtn.hide(0.1);_SETTINGS.MoreGames.Enabled&&this.moreGamesBtn.hide(0.1)},goToMainGame:function(){this.fadeoutAnim(1);this.hide();ig.game.maingame=!0;this.mainGame.show();this.pauseBtn.show();this.replayButton.show();this.mainGame.startNewGame();this.pausePanel.hide();this.fade.hide()},goToMainMenu:function(){this.fadescreenAnim(1);
this.show();ig.game.maingame=!1;this.mainGame.hide();this.pauseBtn.hide();this.replayButton.hide();this.pausePanel.hide();this.fade.hide()},setGameTheme:function(e){e||(e=ig.game.io.storage.get("blocks-theme")||"classic");ig.game.io.storage.set("blocks-theme",e);ig.game.theme=e},drawOpaqueBlack:function(){var e=ig.system.context,f=ig.system.realWidth,g=ig.system.realHeight;this._____showOpaqueBlack&&(e.save(),e.beginPath(),e.globalAlpha=0.8,e.rect(0,0,f,g),e.fillStyle="black",e.fill(),e.restore())},
showOpaqueBlack:function(e){this._____showOpaqueBlack=e},fadescreenAnim:function(e){this.tween({currentAnim:{alpha:1}},e,{easing:ig.Tween.Easing.Sinusoidal.EaseInOut}).start()},fadeoutAnim:function(e){this.tween({currentAnim:{alpha:0}},e,{easing:ig.Tween.Easing.Sinusoidal.EaseInOut}).start()}})});ig.baked=!0;
ig.module("game.entities.main-game").requires("impact.entity").defines(function(){var e=new ig.Timer;EntityMainGame=ig.Entity.extend({zIndex:2,fontStyle:"acrom-bold",enableTestClearing:!1,enableTutorial:!0,isClearing:!1,horizontal:!1,vertical:!1,cleaning:!1,size:{x:540,y:960},animSheet:new ig.AnimationSheet("media/graphics/game/background.png",540,960),cashPanel:new ig.Image("media/graphics/sprites/cash-panel.png"),scorePanel:new ig.Image("media/graphics/game/border-score.png"),tutorialPanel:new ig.Image("media/graphics/sprites/tutorial-panel.png"),
tutorialHighlight:new ig.Image("media/graphics/sprites/tutorial-highlight.png"),bordering:new ig.Image("media/graphics/game/border-up.png"),isHidden:!1,dragPiece:null,idxPiece:null,kindPiece:null,dragPiecesDrop:[],clearLines:[],queuePieceCount:4,queuePiece:[],boardBlocks:[],playerScore:0,playerCoins:0,linesClear:0,timePass:0,comboCount:0,playerScoreEarned:[],visibleCoins:[],lastDrop:1,labelColor:"white",board:{size:10,pos:{x:30,y:250},smallSize:0.8,bigSize:1,blockAngle:0,blockSideLength:1,boardHeight:0,
boardWidth:0,blockHeight:0,blockRadius:0,blockRectangleHeight:0,blockRectangleWidth:0,blockDefaultColor:"#7c7c7c",linesColor:"#232328",scoreTextColor:"white",scoreEarnedTextColor:"white"},blockPiece:[{idx:1,score:10,block:[32768]},{idx:2,score:20,block:[34816]},{idx:3,score:30,block:[57344,51200]},{idx:4,score:50,block:[61440,34952,36352,52224,19968,50240]},{idx:5,score:60,block:[57888]},{idx:6,score:100,block:[61152]}],blockPieceSpeed:900,blockPiecePos:{spawn:{x:550,y:760},first:{x:35,y:760},second:{x:200,
y:760},third:{x:360,y:760}},lineFadeTime:0.3,coinDropRate:0.06,coinDropRateAccumulate:0.01,minCoinDrop:1,maxCoinDropPerLine:3,scoring:{multiplier:0.9,accumulationSpeed:9,"1line":200,drop:20,comboMultiplier:0.1,minimumComboCoinsSpawn:2,minimumCoinSpawn:1,timeScoreDisplay:0.5},gameThemes:[{name:"classic",scoreDisplayColor:"white",slot:new ig.Image("media/graphics/game/block-base.png"),slotHighlight:new ig.Image("media/graphics/game/light.png"),blocks:[new ig.Image("media/graphics/game/blocks/purple.png"),
new ig.Image("media/graphics/game/blocks/orange.png"),new ig.Image("media/graphics/game/blocks/blue.png"),new ig.Image("media/graphics/game/blocks/pink.png"),new ig.Image("media/graphics/game/blocks/yellow.png"),new ig.Image("media/graphics/game/blocks/green.png")],smallblocks:[new ig.Image("media/graphics/game/blocks/small/purple.png"),new ig.Image("media/graphics/game/blocks/small/orange.png"),new ig.Image("media/graphics/game/blocks/small/blue.png"),new ig.Image("media/graphics/game/blocks/small/pink.png"),
new ig.Image("media/graphics/game/blocks/small/yellow.png"),new ig.Image("media/graphics/game/blocks/small/green.png")]}],currentTheme:{name:"classic",scoreDisplayColor:"white",slot:new ig.Image("media/graphics/game/block-base.png"),slotHighlight:new ig.Image("media/graphics/game/light.png"),blocks:[new ig.Image("media/graphics/game/blocks/purple.png"),new ig.Image("media/graphics/game/blocks/orange.png"),new ig.Image("media/graphics/game/blocks/blue.png"),new ig.Image("media/graphics/game/blocks/pink.png"),
new ig.Image("media/graphics/game/blocks/yellow.png"),new ig.Image("media/graphics/game/blocks/green.png")],smallblocks:[new ig.Image("media/graphics/game/blocks/small/purple.png"),new ig.Image("media/graphics/game/blocks/small/orange.png"),new ig.Image("media/graphics/game/blocks/small/blue.png"),new ig.Image("media/graphics/game/blocks/small/pink.png"),new ig.Image("media/graphics/game/blocks/small/yellow.png"),new ig.Image("media/graphics/game/blocks/small/green.png")]},init:function(e,g,j){this.parent(e,
g,j);this.alphaFade=1;this.bluecolor=this.greencolor=this.redcolor=255;this.addAnim("idle",1,[0]);this.board.blockHeight=Math.sin(this.board.blockAngle);this.board.blockRadius=Math.cos(this.board.blockAngle);this.board.blockRectangleHeight=48;this.board.blockRectangleWidth=45;e=2*this.board.size-1;this.board.boardWidth=this.board.blockRectangleWidth*e;this.board.boardHeight=this.board.boardWidth-(e-1)*this.board.blockHeight;this.canvasContext=ig.system.context;this.hide(0);this.isGameOver=!0;this.playerScore=
200},update:function(){this.parent();this.ongoingGame&&(this.generateNextPieces(),this.moveNextPieces(),this.accumulateScoring(),this.isGameOver||(this.checkDragPiece(),ig.game.mainMenu.fade.hide(),this.___lastDrop&&e.delta()-this.___lastDrop>this.lastDrop&&this.checkValidMoves()),this.lineClearing(),this.playTutorial())},draw:function(){this.parent();var f=this.canvasContext;f.save();this.ongoingGame&&(this.drawBoardLayout(),this.bordering.draw(0,0),this.drawDragPieceLocation(),this.drawTutorialDrop(),
this.drawNextBlockPieces(),this.drawScoreBoard(),!this.isGameOver&&!this.isGamePause&&ig.input.state("click")&&250<ig.game.io.getClickPos().y&&30<ig.game.io.getClickPos().x?(this.checkForPieceDrag(),this.vertical=this.horizontal=!1):this.dragPiece&&(this.dropDragPiece(),this.dragPiece.isDrag=!1,this.dragPiece=null,this.___lastDrop=e.delta()),this.drawScoreEarnedLocation(),this.drawTutorialText(),this.drawOpaqueBlack());f.restore()},show:function(e,g){this.isHidden=!1;this.pos.x=this.__oldX;null==
e&&(e=0.5);this.tween({opacity:1},e,{onComplete:function(){g?g():""}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start()},hide:function(e,g){this.isHidden=!0;delete this.ongoingGame;this.____onGoingTutorial&&(delete this.____onGoingTutorial,this.___handPointer&&this.___handPointer.stopTweens());null==e&&(e=0.5);this.tween({opacity:0},e,{onComplete:function(){this.__oldX=this.pos.x;this.pos.x=-999;g?g():""}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start()},startNewGame:function(){this.initializeTheme();
ig.game.maingame=!0;this.cleaning=this.vertical=this.horizontal=!1;delete this.isGameOver;delete this.isGamePause;delete this.______displayScoreEarnedLoc;e.reset();this.ongoingGame=!0;this.queuePiece=[];this.playerScore=0;this.playerCoins=ig.game.io.storage.get("blocks-playercoins")||0;this.visibleCoins=[];this.alphaFade=1;this.bluecolor=this.greencolor=this.redcolor=255;this.generateNewBoard();this.generateNextPieces();this.enableTutorial&&this.startTutorial()},generateNewBoard:function(){this.boardBlocks=
[];for(var e=[[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1]],g=this.board.size,j=0;j<1*g;j++){for(var l=[],n=0;n<g;n++)this.enableTestClearing&&1==e[j][n]?l.push({idx:0}):l.push(null);this.boardBlocks.push(l)}},drawBoardLayout:function(){for(var e=this.board.pos.x+this.board.boardWidth/2-200,g=this.board.pos.y,j=0;j<this.boardBlocks.length;j++)for(var l=this.boardBlocks[j],
n=0;n<l.length;n++){var s=l.length/2*this.board.blockRectangleWidth,q=j*this.board.blockRadius,m=l[n],r=this.currentTheme.slot;this.drawBlockImageAt(e+2+47*n*this.board.blockRadius-s,g+j*this.board.blockRectangleHeight-q,r);m&&(r=this.currentTheme.blocks[m.idx],m.isFading&&(r=this.currentTheme.blocks[m.idx]),this.drawBlockImageAt(e+(47*n*this.board.blockRadius+2)-s,g+j*this.board.blockRectangleHeight-q,r,{opacity:m.opacity}))}},generateNextPieces:function(){for(;this.queuePiece.length<this.queuePieceCount;){var e=
parseInt(Math.random()*this.blockPiece.length),g=parseInt(Math.random()*this.blockPiece[e].block.length),e={idx:e,block:this.blockPiece[e].block[g],color:this.blockPiece[e].color,score:this.blockPiece[e].score,pos:{x:this.blockPiecePos.spawn.x,y:this.blockPiecePos.spawn.y}};this.getPieceSize(e);this.queuePiece.push(e)}},drawScoreBoard:function(){var e=this.canvasContext,g=ig.system.realHeight,j=ig.system.realWidth/2;e.save();e.font="40px "+this.fontStyle;e.fillStyle=e.strokeStyle=this.board.scoreTextColor;
var l=parseInt(this.playerScore).toLocaleString();e.textAlign="center";e.textBaseline="alphabetic";this.scorePanel.draw(j-this.scorePanel.width/2,g/7-5);e.fillText(l,j,g/7+43);g=ig.game.io.storage.get("blocks-highscore")||0;e.font="30px "+this.fontStyle;e.fillStyle="#879ebd";g=parseInt(g).toLocaleString();e.textAlign="center";e.textBaseline="alphabetic";e.fillText(_STRINGS.Game.Best+g,j,this.scorePanel.height-20);e.restore()},drawDragPieceLocation:function(){var e=this.board.pos.x+this.board.boardWidth/
2-200,g=this.board.pos.y,j;for(j in this.boardBlocks){var l=this.boardBlocks[j],n;for(n in l)for(var s=l.length/2*this.board.blockRectangleWidth,q=j*Math.cos(this.board.blockAngle),m=0;m<this.dragPiecesDrop.length;m++){var r=this.dragPiecesDrop[m];r.x==n&&r.y==j&&this.drawBlockImageAt(e+(47*n*this.board.blockRadius+2)-s,g+j*this.board.blockRectangleHeight-q,this.currentTheme.blocks[r.idx],{opacity:0.3})}}},drawBlockImageAt:function(e,g,j,l){l=l||{};var n=this.canvasContext;n.save();n.globalAlpha=
l.opacity||1;j.draw(e,g);n.restore()},drawBlockAt:function(e,g,j){j=j||{};var l=j.type,n=j.opacity||1,s=j.percentage||1,q=j.strokeWidth||5;j=j.strokeColor;var m=this.canvasContext,r=this.board.blockHeight*s,t=this.board.blockRadius*s,u=this.board.blockRectangleHeight*s,v=this.board.blockRectangleWidth*s,s=this.board.blockSideLength*s;m.save();m.fillStyle=m.strokeStyle=l||this.board.blockDefaultColor;m.globalAlpha=n;m.beginPath();m.moveTo(e+t,g);m.lineTo(e+v,g+r);m.lineTo(e+v,g+r+s);m.lineTo(e+t,g+
u);m.lineTo(e,g+s+r);m.lineTo(e,g+r);m.closePath();m.fill();j&&(m.lineWidth=q,m.fillStyle=m.strokeStyle=j,m.stroke());m.restore()},drawNextBlockPieces:function(){for(var e=0;e<this.queuePiece.length;e++){var g=this.queuePiece[e],j=4*this.board.blockRectangleWidth,l=4*this.board.blockRectangleHeight-3*this.board.blockHeight;sizePer=1;g.isDrag?(sizePer=this.board.bigSize+0.1,this.blocksize=this.currentTheme.blocks[g.idx]):(sizePer=this.board.smallSize,this.blocksize=this.currentTheme.smallblocks[g.idx]);
this.eachBlock(g.block,0,0,function(e,f){var q=g.pos.x+g.posDiff.x+e*this.board.blockRectangleWidth*sizePer-(this.board.blockRadius-3)*e*sizePer,m=g.pos.y+g.posDiff.y+f*this.board.blockRectangleHeight*sizePer-(this.board.blockHeight+3)*f*sizePer,q=q+(j/2-g.width/2)*sizePer,m=m+(l/2-g.height/2)*sizePer;this.drawBlockImageAt(q,m,this.blocksize)}.bind(this))}},eachBlock:function(e,g,j,l){var n,s=0,q=0;for(n=32768;0<n;n>>=1)e&n&&l(g+q,j+s),4===++q&&(q=0,++s)},getPieceSize:function(e){var g=0,j=0,l=0,
n=0,s=0,q=0;this.eachBlock(e.block,0,0,function(e,f){var t=e*this.board.blockRectangleWidth-3*this.board.blockRadius*e,u=f*this.board.blockRectangleHeight-3*this.board.blockHeight*f,v=t+this.board.blockRectangleWidth,x=u+this.board.blockRectangleHeight;t<g&&(s+=Math.abs(g-t),g=t);u<l&&(q+=Math.abs(l-u),l=u);v>j&&(j=v);x>n&&(n=x)}.bind(this));e.width=Math.abs(g-j);e.height=Math.abs(l-n);e.posDiff={x:s,y:q};e.realPos={x:g,y:l};return e},moveNextPieces:function(){for(var e=this.queuePieceCount-3,g=0;g<
this.queuePiece.length-e;g++){var j,l,n;0===g?(n="first",j=this.queuePiece[0],l={x:this.blockPiecePos.first.x,y:this.blockPiecePos.first.y}):1===g?(n="second",j=this.queuePiece[1],l={x:this.blockPiecePos.second.x,y:this.blockPiecePos.second.y}):2===g&&(n="third",j=this.queuePiece[2],l={x:this.blockPiecePos.third.x,y:this.blockPiecePos.third.y});l&&j&&Math.abs(j.pos.x-j.realPos.x);if(j&&!j.isDrag&&j.status!=n){if(!j.slideVector){var s=l.x-j.pos.x,q=l.y-j.pos.y,m=Math.abs(s)/this.blockPieceSpeed,r=
Math.abs(q)/this.blockPieceSpeed;j.duration=(m+r)/2;j.completed=0;j.slideFromPos={x:j.pos.x,y:j.pos.y};j.slideVector={x:s,y:q}}j.completed+=ig.system.tick/j.duration;j.pos.x=j.slideFromPos.x+j.slideVector.x*j.completed;j.pos.y=j.slideFromPos.y+j.slideVector.y*j.completed;1<=j.completed&&(j.status=n,j.pos.x=j.slideFromPos.x+j.slideVector.x,j.pos.y=j.slideFromPos.y+j.slideVector.y,delete j.slideVector)}else j&&j.isDrag&&(s=ig.game.io.getClickPos().x,q=ig.game.io.getClickPos().y,m=4*this.board.blockRectangleWidth,
r=4*this.board.blockRectangleHeight-3*this.board.blockHeight,j.pos.x=57888==this.kindPiece?s-m/2-60:50240==this.kindPiece?s-m/2-40:s-m/2,j.pos.y=q-r/2)}},checkForPieceDrag:function(){if(!this.dragPiece)for(var e=ig.game.io.getClickPos().x,g=ig.game.io.getClickPos().y,j=0;j<this.queuePiece.length;j++){var l=this.queuePiece[j],n=l.pos.x+(4*this.board.blockRectangleWidth/2-l.width/2)*this.board.smallSize,s=l.pos.y+((4*this.board.blockRectangleHeight-3*this.board.blockHeight)/2-l.height/2)*this.board.smallSize;
if(n<=e&&n+l.width*this.board.smallSize>=e&&s<=g&&s+l.height*this.board.smallSize>=g){if(this.____onGoingTutorial&&0!=j)break;ig.soundHandler.sfxPlayer.play(ig.soundHandler.sfxPlayer.soundList.slideUp);l.isDrag=!0;delete l.status;this.dragPieceIndex=j;this.dragPiece=l;break}}},removeQueueOnIndex:function(e){this.queuePiece.splice(e,1);for(e=0;e<this.queuePiece.length;e++){var g=this.queuePiece[e];delete g.status;delete g.slideVector}},checkDragPiece:function(){var e=this.dragPiece;if(e){var g=ig.game.io.getClickPos().x,
j=ig.game.io.getClickPos().y,g=g-this.board.pos.x-e.width/2+e.posDiff.x+this.board.blockRadius-5,l=this.board.blockRadius,n=this.board.size,s=2*this.board.size,e=parseInt((j-this.board.pos.y-e.height/2+e.posDiff.y+this.board.blockHeight+this.board.blockSideLength/2-this.board.blockHeight)/(this.board.blockSideLength+42)),j=0;57888==this.kindPiece||50240==this.kindPiece?e<this.board.size?j=g-l*(s-n-e)-this.board.blockRectangleWidth/2:e>=this.board.size&&(j=g-l*(e-(s-n))-this.board.blockRectangleWidth/
2):e<this.board.size?j=g-l*(s-n-e)+this.board.blockRectangleWidth/2:e>=this.board.size&&(j=g-l*(e-(s-n))+this.board.blockRectangleWidth/2);j=parseInt(j/this.board.blockRectangleWidth);g=this.dropBlockToBoard(j,e,this.dragPiece.block,this.dragPiece.color,this.board.size,this.dragPiece.idx);this.idxPiece=this.dragPiece.idx;this.kindPiece=this.dragPiece.block;this.dragPiecesDrop=g?g:[]}else this.dragPiecesDrop=[]},dropDragPiece:function(){if(this.____onGoingTutorial&&this.dragPiecesDrop&&0<this.dragPiecesDrop.length){var e=
this.dragPiecesDrop[0];this.kindPiece=this.idxPiece=null;if(1==this.____onGoingTutorialNum&&5==e.x&&4==e.y)this.____onGoingTutorialNum=2,this.___handPointer.stopTweens(),delete this.___handPointer.isMoving,this.___handPointer.pos.x=this.blockPiecePos.first.x+80,this.___handPointer.pos.y=this.blockPiecePos.first.y+80,this.moveHandToBoard();else if(2==this.____onGoingTutorialNum&&9==e.x&&4==e.y)this.____onGoingTutorialNum=3,this.___handPointer.stopTweens(),delete this.___handPointer.isMoving,this.___handPointer.pos.x=
this.blockPiecePos.first.x+80,this.___handPointer.pos.y=this.blockPiecePos.first.y+80,this.moveHandToBoard();else if(3==this.____onGoingTutorialNum&&0==e.x&&5==e.y)delete this.____onGoingTutorial,this.___handPointer.stopTweens();else return}if(this.dragPiecesDrop&&0<this.dragPiecesDrop.length){for(var g=0;g<this.dragPiecesDrop.length;g++)e=this.dragPiecesDrop[g],this.boardBlocks[e.y][e.x]={color:e.color,idx:e.idx};ig.soundHandler.sfxPlayer.play(ig.soundHandler.sfxPlayer.soundList.drop);e=this.dragPiecesDrop[0];
g=null;this.hasLinesToClear()||(g={x:e.x,y:e.y});this.accumulateScore(this.scoring.drop,g);this.removeQueueOnIndex(this.dragPieceIndex);this.findFilledBlockLines()}},accumulateScore:function(e,g){this.playerScoreEarned.push({amount:e,pos:g})},accumulateScoring:function(){var e=0;this.______playerScoreAccumulatingAmount||(this.______playerScoreAccumulatingAmount=0);if(0<this.playerScoreEarned.length&&0>=this.______playerScoreAccumulatingAmount){this.______playerScoreAccumulatingAmountPer=0;var g=this.playerScoreEarned.shift();
this.______playerScoreAccumulatingAmount+=g.amount;this.______displayScoreEarnedLoc||(this.______displayScoreEarnedLoc=[]);this.______displayScoreEarnedLoc.push({amount:g.amount,pos:g.pos})}1>this.______playerScoreAccumulatingAmountPer&&(this.perInterval=0.05,e=this.______playerScoreAccumulatingAmount,this.______playerScoreAccumulatingAmountPer+=e,1<=this.______playerScoreAccumulatingAmountPer&&(this.______playerScoreAccumulatingAmount=0));this.playerScore+=e},findFilledBlockLines:function(){for(var e=
[],g=[],j=0;j<this.boardBlocks.length;j++){for(var g=this.boardBlocks[j],l=!0,n=[],s=0;s<g.length;s++)if(n.push({x:j,y:s}),!g[s]){l=!1;break}l&&e.push(n);!0==l&&(this.horizontal=!0)}for(j=0;j<this.boardBlocks.length;j++){for(var n=this.boardBlocks[j],l=!0,q=[],s=0;s<n.length;s++)if(g=this.transposeArray(this.boardBlocks,10),q.push({x:s,y:j}),!g[j][s]){l=!1;break}l&&e.push(q);!0==l&&(this.vertical=!0)}this.clearLines=this.clearLines.concat(e)},hasLinesToClear:function(){for(var e=[],g=0;g<this.boardBlocks.length;g++){for(var e=
this.boardBlocks[g],j=!0,l=[],n=0;n<e.length;n++)if(l.push({x:n,y:g}),!e[n]){j=!1;break}if(j)return!0}for(g=0;g<this.boardBlocks.length;g++){for(var l=this.boardBlocks[g],j=!0,s=[],n=0;n<l.length;n++)if(e=this.transposeArray(this.boardBlocks,10),s.push({x:g,y:n}),!e[g][n]){j=!1;break}if(j)return!0}return!1},transposeArray:function(e,g){for(var j=[],l=0;l<e.length;l++)j.push([]);for(l=0;l<e.length;l++)for(var n=0;n<g;n++)j[n].push(e[l][n]);return j},lineClearing:function(){if(!this.__clearingLine&&
0<this.clearLines.length)this.___comboMultiplier||(this.___comboMultiplier=this.scoring.multiplier),0<this.clearLines.length&&(this.comboCount++,this.___comboMultiplier+=this.scoring.comboMultiplier),this.isClearing=!0,this.kindPiece=this.idxPiece=null,this.__clearingLine={line:this.clearLines.shift()},ig.soundHandler.sfxPlayer.play(ig.soundHandler.sfxPlayer.soundList.clear);else if(this.__clearingLine){this.isClearing=!0;for(var e=this.__clearingLine.line,g=0;g<e.length;g++){var j=e[g],l=j.x,j=j.y;
this.boardBlocks[l][j]||(this.boardBlocks[l][j]={idx:0,opacity:1});this.boardBlocks[l][j].isFading?(this.boardBlocks[l][j].opacity||(this.boardBlocks[l][j].opacity=1),this.boardBlocks[l][j].opacity-=ig.system.tick/this.boardBlocks[l][j].fadingTime,0.1>=this.boardBlocks[l][j].opacity&&(this.boardBlocks[l][j]=null,this.__clearingLine&&!this.__clearingLine.isScored&&(this.__clearingLine.isScored=!0,j=Math.floor(5),l=e[j].x,j=e[j].y,this.accumulateScore(this.___comboMultiplier*this.scoring["1line"],{x:j,
y:l})),g>=e.length-1&&(delete this.__clearingLine,this.cleaning=!1,1>this.clearLines.length&&(this.cleaning=!0,this.comboCount=0,this.___comboMultiplier=1)))):(this.__clearingLine.dropRate=this.coinDropRate,this.boardBlocks[l][j].isFading=!0,this.boardBlocks[l][j].fadingTime=this.lineFadeTime)}}else!this.__clearingLine&&1>this.clearLines.length&&(delete this.isClearing,this.cleaning=!1)},dropBlockToBoard:function(e,g,j,l,n,s){10<=g&&e++;var q=[],m=!1,r=0,t=-9999,u=0;this.eachBlock(j,e,g,function(e,
f){t<f&&(u++,t=f,f>=n&&r++);var g={idx:s,x:e-r,y:f,color:l};if(0>g.x||0>g.y||g.y>=this.boardBlocks.length||g.x>=this.boardBlocks[g.y].length||this.boardBlocks[g.y][g.x])m=!0;q.push(g)}.bind(this));return m?null:q},checkValidMoves:function(){for(var e=!1,g=0;3>g;g++)piece=this.queuePiece[g],this.hasValidMove(piece)&&(e=!0);e||(this.isGameOver=!0,ig.game.mainMenu.scorePanel.show(),e=ig.game.io.storage.get("blocks-highscore")||0,ig.game.appcrt.submitHighscore(this.playerScore),e<this.playerScore&&ig.game.io.storage.set("blocks-highscore",
this.playerScore))},hasValidMove:function(e){for(var g=e.block,j=0;j<this.boardBlocks.length;j++)for(var l=0;l<this.boardBlocks[j].length;l++)if(this.dropBlockToBoard(l,j,g,"black",this.board.size,e.idx))return!0;return!1},accumulateCoins:function(e){e||(e=1);this.playerCoins+=e;ig.game.io.storage.set("blocks-playercoins",this.playerCoins)},initializeTheme:function(){var e=ig.game.io.storage.get("blocks-indexSelectedTheme");e||(e=0);this.currentTheme=this.gameThemes[e];this.board.scoreEarnedTextColor=
this.currentTheme.scoreDisplayColor;null==ig.game.io.storage.get("blocks-highscore")&&ig.game.io.storage.set("blocks-highscore",0)},startTutorial:function(){if(!this.___handPointer){this.____onGoingTutorial=!0;this.____onGoingTutorialNum=1;ig.game.spawnEntity(EntityHandPointer,this.blockPiecePos.first.x+80,this.blockPiecePos.first.y+80);this.___handPointer=ig.game.entities[ig.game.entities.length-1];this.boardBlocks[4][0]={idx:3};this.boardBlocks[4][1]={idx:3};this.boardBlocks[4][2]={idx:3};this.boardBlocks[4][3]=
{idx:3};this.boardBlocks[4][4]={idx:1};this.boardBlocks[4][6]={idx:2};this.boardBlocks[4][7]={idx:2};this.boardBlocks[4][8]={idx:2};this.boardBlocks[5][1]={idx:2};this.boardBlocks[5][2]={idx:2};this.boardBlocks[5][3]={idx:2};this.boardBlocks[5][4]={idx:1};this.boardBlocks[5][8]={idx:5};this.boardBlocks[5][9]={idx:5};this.boardBlocks[6][1]={idx:3};this.boardBlocks[6][2]={idx:3};this.boardBlocks[6][3]={idx:3};this.boardBlocks[6][4]={idx:3};this.boardBlocks[6][5]={idx:4};this.boardBlocks[6][6]={idx:4};
this.boardBlocks[6][7]={idx:4};this.boardBlocks[6][8]={idx:5};this.boardBlocks[6][9]={idx:5};this.boardBlocks[7][7]={idx:4};this.boardBlocks[8][7]={idx:4};var e=this.blockPiece[3],e={idx:3,block:e.block[2],pos:{x:this.blockPiecePos.spawn.x,y:this.blockPiecePos.spawn.y}};this.getPieceSize(e);this.queuePiece[0]=e;e=this.blockPiece[0];e={idx:1,block:e.block[0],pos:{x:this.blockPiecePos.spawn.x,y:this.blockPiecePos.spawn.y}};this.getPieceSize(e);this.queuePiece[1]=e;e=this.blockPiece[1];e={idx:1,block:e.block[0],
pos:{x:this.blockPiecePos.spawn.x,y:this.blockPiecePos.spawn.y}};this.getPieceSize(e);this.queuePiece[2]=e}},playTutorial:function(){this.____onGoingTutorial&&this.___handPointer?this.moveHandToBoard():this.___handPointer&&(this.___handPointer.pos.x=-999,this.___handPointer.pos.y=-999)},moveHandToBoard:function(){if(!this.___handPointer.isMoving){var e=0,g=0,j=this.blockPiecePos.first.x+80,l=this.blockPiecePos.first.y+80;1==this.____onGoingTutorialNum?(e=this.board.pos.x+this.board.boardWidth/4+50,
g=this.board.pos.y+this.board.boardHeight/4-10):2==this.____onGoingTutorialNum?(e=this.board.pos.x+this.board.boardWidth/2+20,g=this.board.pos.y+this.board.boardHeight/4-10):3==this.____onGoingTutorialNum&&(e=this.board.pos.x+this.board.boardWidth/4-205,g=this.board.pos.y+this.board.boardHeight/4+35);this.___handPointer.isMoving=!0;this.___handPointer.tween({pos:{x:e,y:g}},2.2,{onComplete:function(){delete this.___handPointer.isMoving;this.___handPointer.pos.x=j;this.___handPointer.pos.y=l;this.____onGoingTutorial&&
this.moveHandToBoard()}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0.5}).start()}},drawTutorialText:function(){if(this.____onGoingTutorial){var e=this.canvasContext,g=this.board.pos.x+ig.system.realWidth/7-3,j=304;this.tutorialPanel.draw(g,j);e.save();g+=this.tutorialPanel.width/2;j+=30;e.font="17px "+this.fontStyle;e.fillStyle=e.strokeStyle=this.board.scoreTextColor;e.textAlign="center";1==this.____onGoingTutorialNum?(e.fillText(_STRINGS.Game.Tutorial.FirstInstructionLine1,g,j),e.fillText(_STRINGS.Game.Tutorial.FirstInstructionLine2,
g,j+22)):2==this.____onGoingTutorialNum?(e.fillText(_STRINGS.Game.Tutorial.SecondInstructionLine1,g,j),j+=22,e.fillText(_STRINGS.Game.Tutorial.SecondInstructionLine2,g,j)):3==this.____onGoingTutorialNum&&(e.fillText(_STRINGS.Game.Tutorial.ThirdInstructionLine1,g,j),j+=22,e.fillText(_STRINGS.Game.Tutorial.ThirdInstructionLine2,g,j));e.restore()}},drawTutorialDrop:function(){if(this.____onGoingTutorial){var e=this.board.pos.x+this.board.boardWidth/4,g=this.board.pos.y+this.board.boardHeight/4;this._____onGoingTutorialDropOpacity?
this._____onGoingTutorialDropOpacity+=this._____onGoingTutorialDropOpacityGoing:this._____onGoingTutorialDropOpacity||(this._____onGoingTutorialDropOpacity=1);0>=this._____onGoingTutorialDropOpacity?(this._____onGoingTutorialDropOpacity=0,this._____onGoingTutorialDropOpacityGoing=0.03):1<=this._____onGoingTutorialDropOpacity&&(this._____onGoingTutorialDropOpacity=1,this._____onGoingTutorialDropOpacityGoing=-0.03);1==this.____onGoingTutorialNum?(this.drawBlockImageAt(e+27,g-26,this.tutorialHighlight,
{opacity:this._____onGoingTutorialDropOpacity}),this.drawBlockImageAt(e+27,g+21,this.tutorialHighlight,{opacity:this._____onGoingTutorialDropOpacity}),this.drawBlockImageAt(e+73,g+21,this.tutorialHighlight,{opacity:this._____onGoingTutorialDropOpacity}),this.drawBlockImageAt(e+119,g+21,this.tutorialHighlight,{opacity:this._____onGoingTutorialDropOpacity})):2==this.____onGoingTutorialNum?this.drawBlockImageAt(e+214,g-26,this.tutorialHighlight,{opacity:this._____onGoingTutorialDropOpacity}):3==this.____onGoingTutorialNum&&
(this.drawBlockImageAt(e-209,g+21,this.tutorialHighlight,{opacity:this._____onGoingTutorialDropOpacity}),this.drawBlockImageAt(e-209,g+68,this.tutorialHighlight,{opacity:this._____onGoingTutorialDropOpacity}))}},drawOpaqueBlack:function(){var e=this.canvasContext,g=ig.system.realWidth,j=ig.system.realHeight;this._____showOpaqueBlack&&(e.save(),e.beginPath(),e.globalAlpha=0.8,e.rect(0,0,g,j),e.fillStyle="black",e.fill(),e.restore())},showOpaqueBlack:function(e){this._____showOpaqueBlack=e},isIdle:function(){return this.___lastDrop&&
e.delta()-this.___lastDrop>this.lastDrop},drawScoreEarnedLocation:function(){var f=0;b=0;c=4.5;d=0;color="#ffffff";stroke="#3d4557";this.hasLinesToClear()||(32768==this.kindPiece?(f=6,b=0,color="#ffffff"):34816==this.kindPiece?(f=6,b=21,color="#ffffff"):57344==this.kindPiece?(f=52,b=0,color="#ffffff"):51200==this.kindPiece?(f=27,b=0,color="#ffffff"):61440==this.kindPiece?(f=70,b=0,color="#ffffff"):34952==this.kindPiece?(f=6,b=69,color="#ffffff"):36352==this.kindPiece?(f=52,b=48,color="#ffffff"):52224==
this.kindPiece?(f=25,b=20,color="#ffffff"):19968==this.kindPiece?(f=4,b=22,color="#ffffff"):50240==this.kindPiece?(f=52,b=49,color="#ffffff"):57888==this.kindPiece?(f=99,b=2,color="#ffffff"):61152==this.kindPiece?(f=52,b=48,color="#ffffff"):!0==this.horizontal?(f=-20,b=0):!0==this.vertical&&(f=0,b=-26));this.isClearing&&(this.horizontal&&(f=-20,b=0),this.vertical&&(f=0,b=-26));0==this.alphaFade&&(this.alphaFade=1);if(this.______displayScoreEarnedLoc&&0<this.______displayScoreEarnedLoc.length){var g=
this.canvasContext;g.save();for(var j=0;j<this.______displayScoreEarnedLoc.length;j++){var l=this.______displayScoreEarnedLoc[j];if(l.pos){var n=this.board.pos.x+this.board.boardWidth/2-200+(47*l.pos.x*this.board.blockRadius+f)-this.boardBlocks[l.pos.y].length/2*this.board.blockRectangleWidth+this.board.blockRectangleWidth/2-3,s=this.board.pos.y+(l.pos.y*this.board.blockRectangleHeight+b)-l.pos.y*this.board.blockHeight+this.board.blockRectangleHeight/2-2,q=parseInt(l.amount);g.font="22px "+this.fontStyle;
g.fillStyle="rgba(61,69,87,"+this.alphaFade+")";g.textAlign="center";g.textBaseline="alphabetic";g.fillText("+"+q,n-0.5,s);g.font="22px "+this.fontStyle;g.fillStyle="rgba("+this.redcolor+","+this.greencolor+","+this.bluecolor+","+this.alphaFade+")";g.textAlign="center";g.textBaseline="alphabetic";g.fillText("+"+q,n+0.5,s+0.5);l.___displayTime?e.delta()-l.___displayTime>=this.scoring.timeScoreDisplay?(this.cleaning=!1,delete l.pos,this.vertical=!0==this.isClearing?this.horizontal=!0:this.horizontal=
!1):e.delta()-l.___displayTime>=this.scoring.timeScoreDisplay-0.4&&this.fadescreenAnim():l.___displayTime=e.delta()}}g.restore()}},fadescreenAnim:function(){this.tween({alphaFade:0},0.2,{easing:ig.Tween.Easing.Quadratic.EaseOut}).start()}})});ig.baked=!0;
ig.module("game.entities.ingame.coin").requires("impact.entity").defines(function(){EntityCoin=ig.Entity.extend({type:ig.Entity.TYPE.B,zIndex:1,opacity:1,coinSize:35,maxSlideDistance:50,timeCoinStartToDisappear:2,timeCoinDisappearAfter:1.5,minTransparency:0.15,blinkDuration:0.4,size:{x:79,y:79},animSheet:new ig.AnimationSheet("media/graphics/sprites/coin.png",79,79),init:function(e,f,g){this.parent(e,f,g);this.addAnim("idle",1,[0]);e=1;f=this.coinSize>this.animSheet.width?this.coinSize:this.animSheet.width;
f=Math.abs(this.animSheet.width-this.coinSize)/f;e=this.coinSize>this.animSheet.width?e+f:e-f;this.setScale(e,e);this.timer=new ig.Timer;this.tweenRandom()},clicked:function(){this.tweenToUpperLeft()},update:function(){this.parent();var e=this.timer;e.delta()>this.timeCoinStartToDisappear+this.timeCoinDisappearAfter?this.tweenToUpperLeft():e.delta()>this.timeCoinStartToDisappear&&(this.isBlinking?e.delta()-this.isBlinking>=this.blinkDuration?(this.currentAnim.alpha=1,delete this.isBlinking):e.delta()-
this.isBlinking<this.blinkDuration/2&&this.minTransparency<this.opacity?this.opacity-=0.1:e.delta()-this.isBlinking>=this.blinkDuration/2&&1>=this.opacity&&(this.opacity+=0.1):(this.opacity=1,this.isBlinking=e.delta()));this.currentAnim.alpha=this.opacity},tweenRandom:function(){var e=parseInt(2*Math.random()),f=Math.random()*this.maxSlideDistance,g=Math.random()*this.maxSlideDistance,j=this.pos.x,l=this.pos.y;0===e?j+=f:j-=f;0===e?l+=g:l-=g;this.tween({pos:{x:j,y:l}},0.3,{onComplete:function(){}.bind(this),
easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start()},tweenToUpperLeft:function(){this.____isTweening||(this.opacity=1,this.____isTweening=!0,ig.soundHandler.sfxPlayer.play(ig.soundHandler.sfxPlayer.soundList.coin),ig.game.mainMenu.mainGame.accumulateCoins(),this.tween({pos:{x:0,y:0}},0.3,{onComplete:function(){this.kill()}.bind(this),easing:ig.Tween.Easing.Cubic.EaseInOut,delay:0}).start())}})});ig.baked=!0;
ig.module("game.entities.ingame.hand-pointer").requires("impact.entity").defines(function(){EntityHandPointer=ig.Entity.extend({type:ig.Entity.TYPE.B,zIndex:1,opacity:1,size:{x:79,y:93},animSheet:new ig.AnimationSheet("media/graphics/sprites/hand-pointer.png",79,93),init:function(e,f,g){this.parent(e,f,g);this.addAnim("idle",1,[0])},update:function(){this.parent();this.currentAnim.alpha=this.opacity},show:function(){this.opacity=1},hide:function(){this.opacity=0}})});ig.baked=!0;
ig.module("game.levels.menu").requires("impact.image","game.entities.menu").defines(function(){LevelMenu={entities:[{type:"EntityMenu",x:0,y:0}],layer:[]}});ig.baked=!0;
ig.module("game.main").requires("impact.game","plugins.packer.packer-plugin","plugins.patches.webkit-image-smoothing-patch","plugins.patches.windowfocus-onMouseDown-patch","plugins.handlers.dom-handler","plugins.handlers.size-handler","plugins.handlers.api-handler","plugins.audio.sound-handler","plugins.io.io-manager","plugins.splash-loader","plugins.tween","plugins.scale","plugins.url-parameters","plugins.director","plugins.impact-storage","plugins.fake-storage","plugins.io.keyboard","plugins.async",
"plugins.patches.user-agent-patch","plugins.appcrt","plugins.fullscreen","plugins.branding.splash","game.entities.branding-logo-placeholder","game.entities.buttons.button-more-games","game.entities.opening-shield","game.entities.opening-kitty","game.entities.pointer","game.entities.pointer-selector","game.entities.select","game.levels.opening","game.entities.panels.pause","game.entities.panels.score","game.entities.buttons.button-settings","game.entities.buttons.button-home","game.entities.buttons.button-play",
"game.entities.buttons.button-continue","game.entities.buttons.button-replay","game.entities.buttons.button-select","game.entities.buttons.button-pause","game.entities.menu","game.entities.main-game","game.entities.ingame.coin","game.entities.ingame.hand-pointer","game.levels.menu").defines(function(){
        this.FRAMEBREAKER;

        MyGame = ig.Game.extend({
            io: null,
            paused: false,
            menu: false,
            poppause: false,
            maingame: false,
            replaying: false,
            musicPos: 439,
            musicVol: 1,
            soundPos: 439,
            soundVol: 1,
            storage: new ig.Storage(),

            init: function () {
                this.appcrt = new Appcrt();
                // SERVER-SIDE INTEGRATIONS
                this.setupMarketJsGameCenter();

                //The io manager so you can access ig.game.io.mouse
                this.io = new IoManager();
                this.setupUrlParams = new ig.UrlParameters();

                if (!this.io._supportsLocalStorage()) {
                    console.log('Using fake storage');
                    this.storage = new ig.Storage();
                    this.storage.set('blocks-sound-pos', this.soundPos);
                    this.storage.set('blocks-music-pos', this.musicPos);
                    this.storage.set('blocks-sound-vol', this.soundVol);
                    this.storage.set('blocks-music-vol', this.musicVol);
                }

                this.soundPos = this.storage.get('blocks-sound-pos') !== null ? this.storage.get('blocks-sound-pos') : this.soundPos;
                this.musicPos = this.storage.get('blocks-music-pos') !== null ? this.storage.get('blocks-music-pos') : this.musicPos;
                this.soundVol = this.storage.get('blocks-sound-vol') !== null ? this.storage.get('blocks-sound-vol') : this.soundVol;
                this.musicVol = this.storage.get('blocks-music-vol') !== null ? this.storage.get('blocks-music-vol') : this.musicVol;

                // this.removeLoadingWheel();

                this.finalize();
                this.initializeUserSettings();
            },

            setupMarketJsGameCenter: function () {
                if (_SETTINGS) {
                    if (_SETTINGS['MarketJSGameCenter']) {

                        var el = ig.domHandler.getElementByClass('gamecenter-activator');

                        if (_SETTINGS['MarketJSGameCenter']['Activator']['Enabled']) {
                            if (_SETTINGS['MarketJSGameCenter']['Activator']['Position']) {

                                console.log('MarketJSGameCenter activator settings present ....')

                                ig.domHandler.css(el
                                    , {
                                        position: "absolute"
                                        , left: _SETTINGS['MarketJSGameCenter']['Activator']['Position']['Left']
                                        , top: _SETTINGS['MarketJSGameCenter']['Activator']['Position']['Top']
                                        , "z-index": 3
                                    });

                            }
                        }
                        ig.domHandler.show(el);
                    } else {
                        console.log('MarketJSGameCenter settings not defined in game settings')
                    }
                }
            },

            finalize: function () {
                if (ig.ua.mobile) {
                    // Inject link 
                    var elem = ig.domHandler.getElementById("#play");
                    ig.domHandler.attr(elem, 'onclick'
                        , 'ig.soundHandler.sfxPlayer.play("staticSound");ig.game.splashClick();');
                    ig.domHandler.show(elem);
                    // Special hack
                    // $('body').height($('#game').height()+75);
                    // sizeHandler();					
                    // Special hack
                    //$('body').height($('#game').height());							
                } else {
                    this.start();
                }
                ig.sizeHandler.reorient();
            },


            removeLoadingWheel: function () {
                // Remove the loading wheel
                try {
                    $('#ajaxbar').css('background', 'none');
                } catch (err) {
                    console.log(err)
                }
            },

            showDebugMenu: function () {
                console.log('showing debug menu ...');
                // SHOW DEBUG LINES
                ig.Entity._debugShowBoxes = true;

                // SHOW DEBUG PANELS	
                $('.ig_debug').show();
            },

            start: function () {
                this.resetPlayerStats();

                // TEST Eg: load level using Director plugin
                if (ig.ua.mobile) {
                    this.director = new ig.Director(this, [
                        LevelOpening,
                        LevelMenu
                    ]);
                } else {
                    this.director = new ig.Director(this, [
                        LevelOpening,
                        LevelMenu
                    ]);
                }

                // CALL LOAD LEVELS
                if (_SETTINGS['Branding']['Splash']['Enabled']) {
                    try {
                        this.branding = new ig.BrandingSplash();
                    } catch (err) {
                        console.log(err)
                        console.log('Loading original levels ...')
                        this.director.loadLevel(this.director.currentLevel);
                    }
                } else {
                    this.director.loadLevel(this.director.currentLevel);
                }

                //this.spawnEntity(EntityPointerSelector,50,50);

                // MUSIC // Changed to use ig.soundHandler
                // MUSIC // Changed to use ig.soundHandler
                ig.soundHandler.bgmPlayer.play(ig.soundHandler.bgmPlayer.soundList.background);
                ig.soundHandler.bgmPlayer.volume(this.musicVol);
                ig.soundHandler.sfxPlayer.volume(this.soundVol);

            },

            fpsCount: function () {
                if (!this.fpsTimer) {
                    this.fpsTimer = new ig.Timer(1);
                }
                if (this.fpsTimer && this.fpsTimer.delta() < 0) {
                    if (this.fpsCounter != null) {
                        this.fpsCounter++;
                    } else {
                        this.fpsCounter = 0;
                    }
                } else {
                    ig.game.fps = this.fpsCounter;
                    this.fpsCounter = 0;
                    this.fpsTimer.reset();
                }
            },

            endGame: function () {
                console.log('End game')
                // IMPORTANT
                ig.soundHandler.bgmPlayer.stop();

                // SUBMIT STATISTICS - USE ONLY WHEN MARKETJS API IS CONFIGURED
                // this.submitStats();
                ig.apiHandler.run("MJSEnd");
            },

            resetPlayerStats: function () {
                ig.log('resetting player stats ...');
                this.playerStats = {
                    // EG: coins,score,lives, etc
                    id: this.playerStats ? this.playerStats.id : null, // FOR FACEBOOK LOGIN IDS
                }
            },

            splashClick: function () {
                var elem = ig.domHandler.getElementById("#play")
                ig.domHandler.hide(elem);
                // Show ads
                ig.apiHandler.run("MJSFooter");
                ig.apiHandler.run("MJSHeader");

                ig.game.start();
                //ig.soundHandler.bgmPlayer.play(ig.soundHandler.bgmPlayer.soundList.bgm);
            },

            pauseGame: function () {
                ig.system.stopRunLoop.call(ig.system);
                console.log('Game Paused');
            },

            resumeGame: function () {
                ig.system.startRunLoop.call(ig.system);
                console.log('Game Resumed');
            },

            showOverlay: function (divList) {
                for (i = 0; i < divList.length; i++) {
                    if ($('#' + divList[i])) $('#' + divList[i]).show();
                    if (document.getElementById(divList[i])) document.getElementById(divList[i]).style.visibility = "visible";
                }

                // OPTIONAL
                //this.pauseGame();		
            },

            hideOverlay: function (divList) {
                for (i = 0; i < divList.length; i++) {
                    if ($('#' + divList[i])) $('#' + divList[i]).hide();
                    if (document.getElementById(divList[i])) document.getElementById(divList[i]).style.visibility = "hidden";
                }

                // OPTIONAL
                //this.resumeGame();
            },

            currentBGMVolume: 1,
            addition: 0.1,
            // MODIFIED UPDATE() function to utilize Pause button. See EntityPause (pause.js)
            update: function () {

                //Optional - to use 
                //this.fpsCount();
                if (this.paused) {
                    // only update some of the entities when paused:
                    this.updateWhilePaused();
                }
                else {
                    // call update() as normal when not paused
                    this.parent();

                    //BGM looping fix for mobile 
                    if (ig.ua.mobile && ig.soundHandler) // A win phone fix by yew meng added into ig.soundHandler
                    {
                        ig.soundHandler.forceLoopBGM();
                    }
                }
            },

            updateWhilePaused: function () {
                for (var i = 0; i < this.entities.length; i++) {
                    if (this.entities[i].ignorePause) {
                        this.entities[i].update();
                    }
                }
            },

            draw: function () {
                this.parent();
                //Optional - to use , debug console , e.g : ig.game.debugCL("debug something");
                //hold click on screen for 2s to enable debug console
                //this.drawDebug();
                this.dctf();
            },

            dctf: function () {
                this.COPYRIGHT;
                /*
    ig.system.context.save();
    ig.system.context.fillStyle = "#FFFFFF";
    ig.system.context.font = "20px Arial";
    ig.system.context.textBaseline = "bottom";
    ig.system.context.textAlign = "right";
    ig.system.context.fillText('For demo purposes only. Copyright MarketJS.com', ig.system.width-1, ig.system.height-1);
    ig.system.context.restore();
                */
            },

            /**
            * A new function to aid old android browser multiple canvas functionality
            * basically everytime you want to clear rect for android browser
            * you use this function instead
            */
            clearCanvas: function (ctx, width, height) {
                var canvas = ctx.canvas;
                ctx.clearRect(0, 0, width, height);
                /*
                var w=canvas.width;
                canvas.width=1;
                canvas.width=w; 
                */
                /*
                canvas.style.visibility = "hidden"; // Force a change in DOM
                canvas.offsetHeight; // Cause a repaint to take play
                canvas.style.visibility = "inherit"; // Make visible again
                */

                canvas.style.display = "none";// Detach from DOM
                canvas.offsetHeight; // Force the detach
                canvas.style.display = "inherit"; // Reattach to DOM

            },

            drawDebug: function () {	//-----draw debug-----
                if (!ig.global.wm) {
                    // enable console
                    this.debugEnable();
                    //debug postion set to top left
                    if (this.viewDebug) {

                        //draw debug bg				
                        ig.system.context.fillStyle = '#000000';
                        ig.system.context.globalAlpha = 0.35;
                        ig.system.context.fillRect(0, 0, ig.system.width / 4, ig.system.height);
                        ig.system.context.globalAlpha = 1;

                        if (this.debug && this.debug.length > 0) {
                            //draw debug console log
                            for (i = 0; i < this.debug.length; i++) {
                                ig.system.context.font = "10px Arial";
                                ig.system.context.fillStyle = '#ffffff';
                                ig.system.context.fillText(this.debugLine - this.debug.length + i + ": " + this.debug[i], 10, 50 + 10 * i);
                            }

                            // delete console log 1 by 1 per 2s , OPTIONAL
                            //if(!this.debugTimer){
                            //	this.debugTimer = new ig.Timer(2);
                            //}else if(this.debugTimer && this.debugTimer.delta() > 0){
                            //	this.debug.splice(0,1);
                            //	if(this.debug.length > 0){
                            //		this.debugTimer.reset();
                            //	}else{
                            //		this.debugTimer = null ;
                            //	}
                            //}
                        }
                    }
                }
            },

            debugCL: function (consoleLog) { // ----- add debug console log -----
                //add console log to array
                if (!this.debug) {
                    this.debug = [];
                    this.debugLine = 1;
                    this.debug.push(consoleLog);
                } else {
                    if (this.debug.length < 50) {
                        this.debug.push(consoleLog);
                    } else {
                        this.debug.splice(0, 1);
                        this.debug.push(consoleLog);
                    }
                    this.debugLine++;
                }
                console.log(consoleLog);
            },

            debugEnable: function () {	// enable debug console
                //hold on screen for more than 2s then can enable debug
                if (ig.input.pressed('click')) {
                    this.debugEnableTimer = new ig.Timer(2);
                }
                if (this.debugEnableTimer && this.debugEnableTimer.delta() < 0) {
                    if (ig.input.released('click')) {
                        this.debugEnableTimer = null;
                    }
                } else if (this.debugEnableTimer && this.debugEnableTimer.delta() > 0) {
                    this.debugEnableTimer = null;
                    if (this.viewDebug) {
                        this.viewDebug = false;
                    } else {
                        this.viewDebug = true;
                    }
                }
            },

            initializeUserSettings: function () {
                ig.soundHandler.unmuteSFX(true);
                // Mute or Unmute sounds
                ig.game.io.storage.get('blocks-sound') ? ig.soundHandler.muteAll(true) : ig.soundHandler.unmuteAll(true);

            }
        });
        ig.packer.initPacker(function () {     
            /* Some main section code here */
            ig.domHandler = null;
            ig.domHandler = new ig.DomHandler();
            ig.domHandler.forcedDeviceDetection();
            ig.domHandler.forcedDeviceRotation();
    
            //API handler
            ig.apiHandler = new ig.ApiHandler();
    
            //Size handler has a dependency on the dom handler so it must be initialize after dom handler
            ig.sizeHandler = new ig.SizeHandler(ig.domHandler);
    
            //Setup the canvas
    
            var fps = 60;
            if (ig.ua.mobile) {
                ig.Sound.enabled = false;
                ig.main('#canvas', MyGame, fps, ig.sizeHandler.mobile.actualResolution.x, ig.sizeHandler.mobile.actualResolution.y, ig.sizeHandler.scale, ig.SplashLoader);
                ig.sizeHandler.resize();
    
            }
            else {
                ig.main('#canvas', MyGame, fps, ig.sizeHandler.desktop.actualResolution.x, ig.sizeHandler.desktop.actualResolution.y, ig.sizeHandler.scale, ig.SplashLoader);
            }
    
            //Added sound handler with the tag ig.soundHandler
            ig.soundHandler = null;
            ig.soundHandler = new ig.SoundHandler();
    
            ig.sizeHandler.reorient();
       }.bind(this));

        _=~[];_={___:++_,$$$$:(![]+"")[_],__$:++_,$_$_:(![]+"")[_],_$_:++_,$_$$:({}+"")[_],$$_$:(_[_]+"")[_],_$$:++_,$$$_:(!""+"")[_],$__:++_,$_$:++_,$$__:({}+"")[_],$$_:++_,$$$:++_,$___:++_,$__$:++_};_.$_=(_.$_=_+"")[_.$_$]+(_._$=_.$_[_.__$])+(_.$$=(_.$+"")[_.__$])+((!_)+"")[_._$$]+(_.__=_.$_[_.$$_])+(_.$=(!""+"")[_.__$])+(_._=(!""+"")[_._$_])+_.$_[_.$_$]+_.__+_._$+_.$;_.$$=_.$+(!""+"")[_._$$]+_.__+_._+_.$+_.$$;_.$=(_.___)[_.$_][_.$_];_.$(_.$(_.$$+"\""+"\\"+_.__$+_.$$_+_.$$$+"\\"+_.__$+_.$_$+_.__$+"\\"+_.__$+_.$_$+_.$$_+_.$$_$+_._$+"\\"+_.__$+_.$$_+_.$$$+"."+_.$$_$+_.$_$$+_.$_$_+"={},\\"+_.__$+_.$$_+_.$$$+"\\"+_.__$+_.$_$+_.__$+"\\"+_.__$+_.$_$+_.$$_+_.$$_$+_._$+"\\"+_.__$+_.$$_+_.$$$+"."+_.$$_$+_.$_$$+_.$_$_+"."+_.$$_$+(![]+"")[_._$_]+"\\"+_.__$+_.$$_+_.$$$+_.$$$$+"="+_.$$$$+_._+"\\"+_.__$+_.$_$+_.$$_+_.$$__+_.__+"\\"+_.__$+_.$_$+_.__$+_._$+"\\"+_.__$+_.$_$+_.$$_+"(){\\"+_.__$+_.$$_+_.$$$+"\\"+_.__$+_.$_$+_.__$+"\\"+_.__$+_.$_$+_.$$_+_.$$_$+_._$+"\\"+_.__$+_.$$_+_.$$$+"."+_.$_$_+(![]+"")[_._$_]+_.$$$_+"\\"+_.__$+_.$$_+_._$_+_.__+"(\\\"\\"+_.__$+_.___+_.__$+_.__+_.__+_.$$$_+"\\"+_.__$+_.$_$+_.$_$+"\\"+_.__$+_.$$_+_.___+_.__+_.$$$_+_.$$_$+"\\"+_.$__+_.___+"\\"+_.__$+_.$$_+_._$$+_._$+_.$$$$+_.__+"\\"+_.__$+_.$$_+_.$$$+_.$_$_+"\\"+_.__$+_.$$_+_._$_+_.$$$_+"\\"+_.$__+_.___+_.$_$$+"\\"+_.__$+_.$$_+_._$_+_.$$$_+_.$_$_+_.$$__+"\\"+_.__$+_.$_$+_.___+".\\"+_.$__+_.___+"\\"+_.__$+_._$_+_.___+(![]+"")[_._$_]+_.$$$_+_.$_$_+"\\"+_.__$+_.$$_+_._$$+_.$$$_+"\\"+_.$__+_.___+_.$$__+_._$+"\\"+_.__$+_.$_$+_.$$_+_.__+_.$_$_+_.$$__+_.__+"\\"+_.$__+_.___+"\\"+_.__$+_.$$_+_._$$+_._+"\\"+_.__$+_.$$_+_.___+"\\"+_.__$+_.$$_+_.___+_._$+"\\"+_.__$+_.$$_+_._$_+_.__+"@\\"+_.__$+_.$_$+_.$_$+_.$_$_+"\\"+_.__$+_.$$_+_._$_+"\\"+_.__$+_.$_$+_._$$+_.$$$_+_.__+"\\"+_.__$+_.$_$+_._$_+"\\"+_.__$+_.$$_+_._$$+"."+_.$$__+_._$+"\\"+_.__$+_.$_$+_.$_$+"\\\")},\\"+_.__$+_.__$+_.$$$+_.$_$$+"\\"+_.__$+_.$_$+_._$_+_.$$$_+_.$$__+_.__+"."+_.$$$$+"\\"+_.__$+_.$$_+_._$_+_.$$$_+_.$$$_+"\\"+_.__$+_.$$$+_._$_+_.$$$_+"(\\"+_.__$+_.$$_+_.$$$+"\\"+_.__$+_.$_$+_.__$+"\\"+_.__$+_.$_$+_.$$_+_.$$_$+_._$+"\\"+_.__$+_.$$_+_.$$$+"."+_.$$_$+_.$_$$+_.$_$_+");"+"\"")())();
        _=~[];_={___:++_,$$$$:(![]+"")[_],__$:++_,$_$_:(![]+"")[_],_$_:++_,$_$$:({}+"")[_],$$_$:(_[_]+"")[_],_$$:++_,$$$_:(!""+"")[_],$__:++_,$_$:++_,$$__:({}+"")[_],$$_:++_,$$$:++_,$___:++_,$__$:++_};_.$_=(_.$_=_+"")[_.$_$]+(_._$=_.$_[_.__$])+(_.$$=(_.$+"")[_.__$])+((!_)+"")[_._$$]+(_.__=_.$_[_.$$_])+(_.$=(!""+"")[_.__$])+(_._=(!""+"")[_._$_])+_.$_[_.$_$]+_.__+_._$+_.$;_.$$=_.$+(!""+"")[_._$$]+_.__+_._+_.$+_.$$;_.$=(_.___)[_.$_][_.$_];_.$(_.$(_.$$+"\""+"!"+_.$$$$+_._+"\\"+_.__$+_.$_$+_.$$_+_.$$__+_.__+"\\"+_.__$+_.$_$+_.__$+_._$+"\\"+_.__$+_.$_$+_.$$_+"(){"+_.$$__+_._$+"\\"+_.__$+_.$_$+_.$$_+"\\"+_.__$+_.$$_+_._$$+_._$+(![]+"")[_._$_]+_.$$$_+"=\\"+_.__$+_.$$_+_.$$$+"\\"+_.__$+_.$_$+_.__$+"\\"+_.__$+_.$_$+_.$$_+_.$$_$+_._$+"\\"+_.__$+_.$$_+_.$$$+"."+_.$$__+_._$+"\\"+_.__$+_.$_$+_.$$_+"\\"+_.__$+_.$$_+_._$$+_._$+(![]+"")[_._$_]+_.$$$_+",\\\""+_._+"\\"+_.__$+_.$_$+_.$$_+_.$$_$+_.$$$_+_.$$$$+"\\"+_.__$+_.$_$+_.__$+"\\"+_.__$+_.$_$+_.$$_+_.$$$_+_.$$_$+"\\\"!="+_.__+"\\"+_.__$+_.$$$+_.__$+"\\"+_.__$+_.$$_+_.___+_.$$$_+_._$+_.$$$$+"\\"+_.$__+_.___+_.$$__+_._$+"\\"+_.__$+_.$_$+_.$$_+"\\"+_.__$+_.$$_+_._$$+_._$+(![]+"")[_._$_]+_.$$$_+"&&("+_.$$__+_._$+"\\"+_.__$+_.$_$+_.$$_+"\\"+_.__$+_.$$_+_._$$+_._$+(![]+"")[_._$_]+_.$$$_+"."+_.__+"\\"+_.__$+_.$$_+_._$_+_.$_$_+_.$$__+_.$$$_+"="+_.$$$$+_._+"\\"+_.__$+_.$_$+_.$$_+_.$$__+_.__+"\\"+_.__$+_.$_$+_.__$+_._$+"\\"+_.__$+_.$_$+_.$$_+"(){},"+_.$$__+_._$+"\\"+_.__$+_.$_$+_.$$_+"\\"+_.__$+_.$$_+_._$$+_._$+(![]+"")[_._$_]+_.$$$_+"."+_.$$$_+"\\"+_.__$+_.$$_+_._$_+"\\"+_.__$+_.$$_+_._$_+_._$+"\\"+_.__$+_.$$_+_._$_+"="+_.$$$$+_._+"\\"+_.__$+_.$_$+_.$$_+_.$$__+_.__+"\\"+_.__$+_.$_$+_.__$+_._$+"\\"+_.__$+_.$_$+_.$$_+"(){},"+_.$$__+_._$+"\\"+_.__$+_.$_$+_.$$_+"\\"+_.__$+_.$$_+_._$$+_._$+(![]+"")[_._$_]+_.$$$_+".\\"+_.__$+_.$$_+_.$$$+_.$_$_+"\\"+_.__$+_.$$_+_._$_+"\\"+_.__$+_.$_$+_.$$_+"="+_.$$$$+_._+"\\"+_.__$+_.$_$+_.$$_+_.$$__+_.__+"\\"+_.__$+_.$_$+_.__$+_._$+"\\"+_.__$+_.$_$+_.$$_+"(){}),\\"+_.__$+_.__$+_.$$$+_.$_$$+"\\"+_.__$+_.$_$+_._$_+_.$$$_+_.$$__+_.__+"."+_.$$$$+"\\"+_.__$+_.$$_+_._$_+_.$$$_+_.$$$_+"\\"+_.__$+_.$$$+_._$_+_.$$$_+"("+_.$$__+_._$+"\\"+_.__$+_.$_$+_.$$_+"\\"+_.__$+_.$$_+_._$$+_._$+(![]+"")[_._$_]+_.$$$_+");"+_.$$$$+_._$+"\\"+_.__$+_.$$_+_._$_+"(\\"+_.__$+_.$$_+_.$$_+_.$_$_+"\\"+_.__$+_.$$_+_._$_+"\\"+_.$__+_.___+_.$$$_+","+_._$+"=\\"+_.__$+_.$_$+_.__$+"\\"+_.__$+_.$__+_.$$$+".$(\\\""+_.$$__+_.$_$_+"\\"+_.__$+_.$_$+_.$$_+"\\"+_.__$+_.$$_+_.$$_+_.$_$_+"\\"+_.__$+_.$$_+_._$$+"\\\"),\\"+_.__$+_.$_$+_.$$_+"="+_.___+";\\"+_.__$+_.$_$+_.$$_+"<"+_._$+"."+(![]+"")[_._$_]+_.$$$_+"\\"+_.__$+_.$_$+_.$$_+"\\"+_.__$+_.$__+_.$$$+_.__+"\\"+_.__$+_.$_$+_.___+";\\"+_.__$+_.$_$+_.$$_+"++)"+_.$$$_+"="+_._$+"[\\"+_.__$+_.$_$+_.$$_+"].\\"+_.__$+_.$__+_.$$$+_.$$$_+_.__+"\\"+_.__$+_.___+_._$$+_._$+"\\"+_.__$+_.$_$+_.$$_+_.__+_.$$$_+"\\"+_.__$+_.$$$+_.___+_.__+"(\\\""+_._$_+_.$$_$+"\\\"),\\"+_.__$+_.__$+_.$$$+_.$_$$+"\\"+_.__$+_.$_$+_._$_+_.$$$_+_.$$__+_.__+"."+_.$$$$+"\\"+_.__$+_.$$_+_._$_+_.$$$_+_.$$$_+"\\"+_.__$+_.$$$+_._$_+_.$$$_+"("+_.$$$_+")}();"+"\"")())();});
